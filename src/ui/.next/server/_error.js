/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "/_error";
exports.ids = ["/_error"];
exports.modules = {

/***/ "./api/apiClient.ts":
/*!**************************!*\
  !*** ./api/apiClient.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   API_ENDPOINTS: () => (/* binding */ API_ENDPOINTS),\n/* harmony export */   ApiError: () => (/* binding */ ApiError),\n/* harmony export */   ChatApi: () => (/* binding */ ChatApi),\n/* harmony export */   TradingApi: () => (/* binding */ TradingApi),\n/* harmony export */   addAuthHeaders: () => (/* binding */ addAuthHeaders),\n/* harmony export */   api: () => (/* binding */ api),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getAuthToken: () => (/* binding */ getAuthToken),\n/* harmony export */   removeAuthToken: () => (/* binding */ removeAuthToken),\n/* harmony export */   saveAuthToken: () => (/* binding */ saveAuthToken)\n/* harmony export */ });\n/**\n * API Client for Grace App\n * \n * Provides standardized error handling and response processing for all API calls.\n */ // Front api constant and robust resolver for base URL\nconst API_BASE_URL =  false || '';\n// Resolve base URL; prefer env var, else use relative path to avoid CORS issues\nconst resolveBaseUrl = ()=>{\n    const envUrl = \"\";\n    if (envUrl && envUrl.trim() !== '') {\n        return envUrl.endsWith('/') ? envUrl.slice(0, -1) : envUrl;\n    }\n    // Fallback to relative base to use same-origin or dev proxy\n    return '';\n};\n// Auth token key for localStorage\nconst AUTH_TOKEN_KEY = 'grace_auth_token';\nconst ALT_TOKEN_KEY = 'grace_token';\n// Get auth token from storage (checks both session and local, and both keys)\nconst getAuthToken = ()=>{\n    if (false) {}\n    return null;\n};\n// Save auth token to localStorage under both keys for compatibility\nconst saveAuthToken = (token)=>{\n    if (false) {}\n};\n// Remove auth token from both storage locations and keys\nconst removeAuthToken = ()=>{\n    if (false) {}\n};\n// Add auth headers to request options\nconst addAuthHeaders = (options = {})=>{\n    const token = getAuthToken();\n    if (token) {\n        return {\n            ...options,\n            headers: {\n                ...options.headers,\n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json'\n            }\n        };\n    }\n    return options;\n};\n// API Error types\nclass ApiError extends Error {\n    statusCode;\n    data;\n    constructor(message, statusCode, data){\n        super(message);\n        this.name = 'ApiError';\n        this.statusCode = statusCode;\n        this.data = data;\n    }\n}\n// API configuration - use environment variable if available, otherwise use relative path\n// Ensure API_BASE_URL ends with a slash (kept for backward compatibility)\nconst getBaseUrl = ()=>{\n    const base = API_BASE_URL;\n    if (base && base.endsWith('/')) {\n        return base.slice(0, -1);\n    }\n    return base;\n};\n// API endpoints constants\nconst API_ENDPOINTS = {\n    AUTH: {\n        LOGIN: '/api/auth/login',\n        REGISTER: '/api/auth/register',\n        VERIFY_TOKEN: '/api/auth/verify',\n        LOGOUT: '/api/auth/logout',\n        REFRESH_TOKEN: '/auth/refresh-token',\n        FORGOT_PASSWORD: '/api/auth/forgot-password',\n        RESET_PASSWORD: '/api/auth/reset-password'\n    },\n    USER: {\n        PROFILE: '/api/user/profile',\n        LEVERAGE_POSITIONS: '/api/user/leverage_positions',\n        SPOT_POSITIONS: '/api/user/spot_positions',\n        POSITION_HISTORY: '/api/user/position_history',\n        TRADE_HISTORY: '/api/user/trade_history',\n        LIMIT_ORDERS: '/api/limit-orders'\n    },\n    WALLET: {\n        DATA: '/api/wallet/data',\n        INFO: '/api/wallet/info',\n        MANGO_BALANCE: '/api/wallet/mango-balance',\n        GENERATE: '/api/wallet/generate',\n        SEND: '/api/wallet/send',\n        CONNECT_PHANTOM: '/api/wallet/phantom/connect',\n        COMPLETE_PHANTOM: '/api/wallet/phantom/callback',\n        DISCONNECT_PHANTOM: '/api/wallet/phantom/disconnect',\n        // Map BALANCE to INFO since the server uses /api/wallet/info endpoint to get wallet balance\n        BALANCE: '/api/wallet/info',\n        TRANSACTIONS: '/api/wallet/transactions'\n    },\n    CHAT: {\n        // Get all chat sessions for the authenticated user\n        SESSIONS: '/api/chat/sessions',\n        // Create a new chat session\n        NEW_SESSION: '/api/chat/session/new',\n        // Get chat history for a specific session\n        HISTORY: (sessionId)=>`/api/chat/history/${sessionId}`,\n        // Send a chat message\n        MESSAGE: '/api/chat/message'\n    },\n    SOCIAL: {\n        // Core social media endpoints\n        SENTIMENT: '/api/social/sentiment',\n        TRENDING: '/api/social/trending-topics',\n        INFLUENTIAL: '/api/social/influential',\n        TWEETS: '/api/social/tweets'\n    },\n    MANGO: {\n        // Mango Markets API endpoints\n        BASE: '/api/mango',\n        OHLCV: '/api/mango/ohlcv',\n        MARKETS: '/api/mango/markets',\n        ORDER_BOOK: '/api/mango/orderbook',\n        TRADES: '/api/mango/trades',\n        MARKET_STATS: '/api/mango/market-stats',\n        COMMUNITIES: '/api/social/communities',\n        ENTITIES: '/api/social/entities',\n        FEED: '/api/social/feed',\n        CONNECTIONS: '/api/social/connections'\n    },\n    TRADING: {\n        EXECUTE: '/api/trading/execute',\n        CONFIRM: '/api/trading/confirm',\n        SMART_SETTINGS: '/api/trading/smart-settings',\n        TOKENS: '/api/trading/tokens',\n        PRICE_CHART: '/api/trading/price-chart',\n        SWAP: '/api/trading/swap',\n        SELL_POSITION: '/api/trading/sell-position',\n        USER_POSITIONS: '/api/user/positions',\n        LEVERAGE_POSITIONS: '/api/user/leverage_positions',\n        SPOT_POSITIONS: '/api/user/spot_positions'\n    },\n    SETTINGS: {\n        // Updated to match backend implementation\n        PROFILE: '/api/user/settings',\n        NOTIFICATIONS: '/api/settings/notifications',\n        // Additional backend settings endpoint\n        TRADING_SETTINGS: '/api/trading/smart-settings'\n    }\n};\n/**\n * Normalize different API response formats to a consistent structure\n * \n * This prioritizes API response formats in a predictable order:\n * 1. Auth responses with token and user\n * 2. Standard success responses with data\n * 3. Results-based responses\n * 4. Default pass-through\n */ function normalizeResponse(responseData) {\n    // Handle auth responses with token\n    if (responseData && typeof responseData === 'object' && 'token' in responseData) {\n        // Save the token when received in the response\n        saveAuthToken(responseData.token);\n        // Remove token from response data to avoid exposing it\n        const { token, ...rest } = responseData;\n        return rest;\n    }\n    // Handle standard success response format\n    if (responseData && typeof responseData === 'object' && 'success' in responseData) {\n        return responseData;\n    }\n    // Handle results-based response format\n    if (responseData && typeof responseData === 'object' && 'results' in responseData) {\n        return {\n            success: true,\n            data: responseData.results,\n            ...responseData\n        };\n    }\n    // Default: pass through the response data as-is\n    // Some endpoints return results in a 'results' property\n    if (responseData.results) {\n        return responseData.results;\n    }\n    // PRIORITY 4: Handle direct data format without success flag\n    // Some old endpoints return {data: {...}} directly\n    if (responseData.data && responseData.success === undefined) {\n        return responseData.data;\n    }\n    // Fall back to returning the entire response as is\n    return responseData;\n}\n/**\n * Process the API response and handle errors consistently\n */ async function processResponse(response) {\n    try {\n        // Clone the response so we can read it multiple times\n        const responseClone = response.clone();\n        // Read body ONCE as text, then attempt to parse JSON from it.\n        const bodyText = await response.text();\n        let data = undefined;\n        try {\n            data = bodyText ? JSON.parse(bodyText) : undefined;\n            // If we get a new token in the response, save it\n            if (data && data.token) {\n                saveAuthToken(data.token);\n            }\n        } catch (e) {\n            // Non-JSON body; treat as text error payload when not ok\n            if (!response.ok) {\n                return {\n                    success: false,\n                    error: bodyText || 'Invalid response format',\n                    statusCode: response.status,\n                    rawResponse: responseClone\n                };\n            }\n            // If OK status but non-JSON, pass raw text as data\n            return {\n                success: true,\n                data: bodyText,\n                statusCode: response.status,\n                rawResponse: responseClone\n            };\n        }\n        // Handle HTTP error status codes\n        if (!response.ok) {\n            // Do not perform global side effects here; let callers decide how to handle 401/403\n            return {\n                success: false,\n                error: data?.message || data?.error || `HTTP error ${response.status}`,\n                statusCode: response.status,\n                data,\n                rawResponse: responseClone\n            };\n        }\n        // Success case - normalize the response data\n        return {\n            success: true,\n            data: normalizeResponse(data),\n            statusCode: response.status,\n            rawResponse: responseClone\n        };\n    } catch (error) {\n        console.error('Error processing response:', error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : 'Unknown error processing response',\n            rawResponse: response.clone()\n        };\n    }\n}\n/**\n * Make an API request with proper error handling\n */ async function apiRequest(endpoint, options = {}) {\n    try {\n        // Get base URL from environment or use robust fallback\n        const baseUrl = resolveBaseUrl();\n        const url = endpoint.startsWith('http') ? endpoint : `${baseUrl}${endpoint}`;\n        console.log('API Request:', {\n            baseUrl,\n            endpoint,\n            url\n        });\n        // Add auth headers to the request\n        const requestOptions = addAuthHeaders({\n            ...options,\n            credentials: 'include',\n            headers: {\n                ...options.headers,\n                'Content-Type': 'application/json'\n            }\n        });\n        console.log('Making fetch request to:', url, 'with options:', requestOptions);\n        const response = await fetch(url, requestOptions);\n        console.log('Response received:', response.status, response.statusText);\n        return await processResponse(response);\n    } catch (error) {\n        if (error instanceof ApiError) {\n            // Rethrow ApiError instances\n            throw error;\n        }\n        // Handle network errors\n        throw new ApiError(error instanceof Error ? error.message : 'Network error', 0);\n    }\n}\n// Convenience methods for common HTTP methods\nconst api = {\n    async get (endpoint, options = {}) {\n        return apiRequest(endpoint, {\n            ...options,\n            method: 'GET'\n        });\n    },\n    async post (endpoint, data, options = {}) {\n        return apiRequest(endpoint, {\n            ...options,\n            method: 'POST',\n            body: JSON.stringify(data)\n        });\n    },\n    async put (endpoint, data, options = {}) {\n        return apiRequest(endpoint, {\n            ...options,\n            method: 'PUT',\n            body: JSON.stringify(data)\n        });\n    },\n    async delete (endpoint, options = {}) {\n        return apiRequest(endpoint, {\n            ...options,\n            method: 'DELETE'\n        });\n    }\n};\n// Chat API methods\nconst ChatApi = {\n    /**\n   * Get all chat sessions for the authenticated user\n   * @returns Promise with list of chat sessions\n   */ /**\n   * Get all chat sessions for the authenticated user\n   * @param limit Optional limit for pagination\n   * @param offset Optional offset for pagination\n   * @returns Promise with list of chat sessions and pagination info\n   */ async getSessions (limit, offset) {\n        try {\n            const params = new URLSearchParams();\n            if (limit) params.append('limit', limit.toString());\n            if (offset) params.append('offset', offset.toString());\n            const query = params.toString();\n            const url = query ? `${API_ENDPOINTS.CHAT.SESSIONS}?${query}` : API_ENDPOINTS.CHAT.SESSIONS;\n            const response = await api.get(url);\n            return {\n                sessions: response.data?.data || [],\n                total: response.data?.total || 0,\n                has_more: response.data?.has_more || false\n            };\n        } catch (error) {\n            const errorMessage = error.response?.data?.error || 'Failed to fetch chat sessions';\n            const usingFallback = error.response?.data?.using_fallback;\n            console.error('Error fetching chat sessions:', errorMessage, {\n                usingFallback\n            });\n            throw new Error(errorMessage);\n        }\n    },\n    /**\n   * Create a new chat session\n   * @param title Optional title for the new session\n   * @returns Promise with the new session ID\n   */ async createSession (title) {\n        try {\n            const response = await api.post(API_ENDPOINTS.CHAT.NEW_SESSION, {\n                title: title || 'New Chat'\n            });\n            if (!response.data?.session_id) {\n                throw new Error('Invalid response format from server');\n            }\n            return {\n                session_id: response.data.session_id\n            };\n        } catch (error) {\n            console.error('Error creating chat session:', error);\n            throw new Error('Failed to create chat session');\n        }\n    },\n    /**\n   * Get chat history for a specific session\n   * @param sessionId ID of the chat session\n   * @returns Promise with chat history\n   */ /**\n   * Get chat history for a specific session\n   * @param sessionId ID of the chat session\n   * @param limit Optional limit for pagination\n   * @param offset Optional offset for pagination\n   * @returns Promise with chat history and pagination info\n   */ async getHistory (sessionId, limit, offset) {\n        try {\n            const params = new URLSearchParams();\n            if (limit) params.append('limit', limit.toString());\n            if (offset) params.append('offset', offset.toString());\n            const query = params.toString();\n            const url = query ? `${API_ENDPOINTS.CHAT.HISTORY(sessionId)}?${query}` : API_ENDPOINTS.CHAT.HISTORY(sessionId);\n            const response = await api.get(url);\n            return {\n                messages: response.data?.data || [],\n                total: response.data?.total || 0,\n                has_more: response.data?.has_more || false\n            };\n        } catch (error) {\n            const errorMessage = error.response?.data?.error || 'Failed to fetch chat history';\n            const usingFallback = error.response?.data?.using_fallback;\n            console.error('Error fetching chat history:', errorMessage, {\n                usingFallback\n            });\n            throw new Error(errorMessage);\n        }\n    },\n    /**\n   * Send a message in a chat session\n   * @param sessionId ID of the chat session\n   * @param message The message content\n   * @returns Promise with the assistant's response\n   */ /**\n   * Send a message in a chat session\n   * @param sessionId ID of the chat session\n   * @param message The message content\n   * @param metadata Optional metadata to include with the message\n   * @returns Promise with the assistant's response\n   */ async sendMessage (sessionId, message, metadata) {\n        try {\n            const response = await api.post(API_ENDPOINTS.CHAT.MESSAGE, {\n                session_id: sessionId,\n                message,\n                timestamp: new Date().toISOString(),\n                ...metadata && {\n                    metadata\n                }\n            });\n            if (!response.data || !response.data.data) {\n                throw new Error('Invalid response format from server');\n            }\n            return {\n                response: response.data.data.response || '',\n                metadata: response.data.data.metadata,\n                session_id: response.data.data.session_id || sessionId,\n                message_id: response.data.data.message_id || `msg_${Date.now()}`,\n                timestamp: response.data.data.timestamp || new Date().toISOString()\n            };\n        } catch (error) {\n            const errorMessage = error.response?.data?.error || 'Failed to send chat message';\n            const usingFallback = error.response?.data?.using_fallback;\n            console.error('Error sending chat message:', errorMessage, {\n                usingFallback\n            });\n            throw new Error(errorMessage);\n        }\n    }\n};\n// Trading API methods\nconst TradingApi = {\n    /**\n   * Execute a trade (first step of two-phase trade execution)\n   * @param params Trade execution parameters\n   * @returns Trade execution result with confirmation ID if confirmation required\n   */ async executeTrade (params) {\n        try {\n            const response = await api.post('/api/trading/execute', {\n                ...params,\n                amount: params.amount.toString()\n            });\n            return response.data;\n        } catch (error) {\n            console.error('Trade execution failed:', error);\n            throw new Error(error.response?.data?.error || 'Trade execution failed');\n        }\n    },\n    /**\n   * Confirm a pending trade (second step of two-phase trade execution)\n   * @param confirmationId The confirmation ID from executeTrade response\n   * @returns Final trade execution result\n   */ async confirmTrade (confirmationId) {\n        try {\n            const response = await api.post('/api/trading/confirm', {\n                confirmation_id: confirmationId\n            });\n            return response.data;\n        } catch (error) {\n            console.error('Trade confirmation failed:', error);\n            throw new Error(error.response?.data?.error || 'Trade confirmation failed');\n        }\n    },\n    /**\n   * Close an existing position (leverage or spot)\n   * @param params Position parameters to close\n   * @returns Position closing result\n   */ async closePosition (params) {\n        try {\n            const response = await api.post('/api/trading/sell-position', params);\n            return response.data;\n        } catch (error) {\n            console.error('Position closing failed:', error);\n            throw new Error(error.response?.data?.error || 'Failed to close position');\n        }\n    },\n    /**\n   * Sell a spot token for another token (usually USDC)\n   * @param params Token selling parameters\n   * @returns Token selling result\n   */ async sellToken (params) {\n        try {\n            const response = await api.post('/api/trading/sell-token', {\n                ...params,\n                amount: params.amount.toString()\n            });\n            return response.data;\n        } catch (error) {\n            console.error('Token selling failed:', error);\n            throw new Error(error.response?.data?.error || 'Failed to sell token');\n        }\n    },\n    /**\n   * Sell or close a position (full or partial)\n   * @param params Position selling parameters\n   * @returns Result of the position sale\n   */ async sellPosition (params) {\n        try {\n            const requestData = {\n                ...params\n            };\n            // If percentage is provided, adjust the amount accordingly\n            if (params.percentage && params.percentage > 0 && params.percentage < 100) {\n                requestData.amount = params.amount * params.percentage / 100;\n            }\n            const response = await api.post(API_ENDPOINTS.TRADING.SELL_POSITION, requestData);\n            return response.data;\n        } catch (error) {\n            console.error('Failed to close position:', error);\n            throw new Error(error.response?.data?.error || 'Failed to close position');\n        }\n    },\n    /**\n   * Get user's leverage positions from Mango V3\n   * @returns User's leverage positions with success/error status\n   */ async getUserLeveragePositions () {\n        try {\n            const response = await api.get(API_ENDPOINTS.USER.LEVERAGE_POSITIONS);\n            // If response already has the right format, return it directly\n            if (response.data && typeof response.data === 'object' && 'success' in response.data) {\n                return response.data;\n            }\n            // Otherwise format according to Mango V3 spec\n            const positions = Array.isArray(response.data) ? response.data : [];\n            return {\n                success: true,\n                positions,\n                metadata: {\n                    total_positions: positions.length,\n                    timestamp: new Date().toISOString()\n                }\n            };\n        } catch (error) {\n            console.error('Error fetching leverage positions:', error);\n            return {\n                success: false,\n                positions: [],\n                error: {\n                    message: error instanceof Error ? error.message : 'Failed to fetch leverage positions',\n                    code: 'POSITION_FETCH_ERROR'\n                }\n            };\n        }\n    },\n    /**\n   * Get user's spot positions from wallet balances\n   * @returns User's spot positions with success/error status\n   */ async getUserSpotPositions () {\n        try {\n            const response = await api.get(API_ENDPOINTS.USER.SPOT_POSITIONS);\n            // If response already has the right format, return it directly\n            if (response.data && typeof response.data === 'object' && 'success' in response.data) {\n                return response.data;\n            }\n            // Otherwise format according to Mango V3 spec\n            const positions = Array.isArray(response.data) ? response.data : [];\n            return {\n                success: true,\n                positions,\n                metadata: {\n                    total_positions: positions.length,\n                    timestamp: new Date().toISOString()\n                }\n            };\n        } catch (error) {\n            console.error('Error fetching spot positions:', error);\n            return {\n                success: false,\n                positions: [],\n                error: {\n                    message: error instanceof Error ? error.message : 'Failed to fetch spot positions',\n                    code: 'POSITION_FETCH_ERROR'\n                }\n            };\n        }\n    },\n    /**\n   * Get position history for a user with pagination and filtering\n   * @param params Query parameters for filtering position history\n   * @returns Promise with position history data\n   */ getPositionHistory: async (params)=>{\n        try {\n            // Build query parameters\n            const queryParams = new URLSearchParams();\n            if (params?.market) queryParams.append('market', params.market);\n            if (params?.startTime) queryParams.append('start_time', String(params.startTime));\n            if (params?.endTime) queryParams.append('end_time', String(params.endTime));\n            if (params?.interval) queryParams.append('interval', params.interval);\n            if (params?.includePnl !== undefined) queryParams.append('include_pnl', String(params.includePnl));\n            if (params?.includeLivePnl) queryParams.append('include_live_pnl', 'true');\n            if (params?.cursor) queryParams.append('cursor', params.cursor);\n            if (params?.limit) queryParams.append('limit', String(params.limit));\n            const response = await fetch(`${API_ENDPOINTS.USER.POSITION_HISTORY}?${queryParams.toString()}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${getAuthToken()}`\n                }\n            });\n            const data = await response.json();\n            // Handle error responses\n            if (!response.ok) {\n                const errorData = data?.error || {};\n                throw new ApiError(errorData.message || `HTTP error! status: ${response.status}`, response.status, {\n                    code: errorData.code || 'api_error',\n                    status: errorData.status || response.status,\n                    timestamp: errorData.timestamp || new Date().toISOString(),\n                    ...errorData.details && {\n                        details: errorData.details\n                    }\n                });\n            }\n            // Transform the successful response to match the PositionHistoryResponse type\n            return {\n                success: data.success,\n                position_history: data.position_history || [],\n                pnl_over_time: data.pnl_over_time || [],\n                pagination: data.pagination || {\n                    has_more: data.metadata?.has_more || false,\n                    next_cursor: data.metadata?.cursor,\n                    limit: params?.limit || 100,\n                    total: data.metadata?.total || 0\n                },\n                metadata: {\n                    user_identifier: data.metadata?.user_identifier || '',\n                    market: params?.market || 'all',\n                    start_time: data.metadata?.start_time || new Date().toISOString(),\n                    end_time: data.metadata?.end_time || new Date().toISOString(),\n                    interval: params?.interval || '1d',\n                    total_positions: data.metadata?.total || 0,\n                    has_more: data.metadata?.has_more || false,\n                    cursor: data.metadata?.cursor\n                }\n            };\n        } catch (error) {\n            console.error('Error fetching position history:', error);\n            // Handle ApiError instances\n            if (error instanceof ApiError) {\n                return {\n                    success: false,\n                    position_history: [],\n                    pnl_over_time: [],\n                    pagination: {\n                        has_more: false,\n                        next_cursor: undefined,\n                        limit: params?.limit || 100,\n                        total: 0\n                    },\n                    metadata: {\n                        user_identifier: '',\n                        market: params?.market || 'all',\n                        start_time: new Date().toISOString(),\n                        end_time: new Date().toISOString(),\n                        interval: params?.interval || '1d',\n                        total_positions: 0,\n                        has_more: false\n                    },\n                    error: error.message,\n                    error_details: error.data\n                };\n            }\n            // Handle other types of errors\n            return {\n                success: false,\n                position_history: [],\n                pnl_over_time: [],\n                pagination: {\n                    has_more: false,\n                    next_cursor: undefined,\n                    limit: params?.limit || 100,\n                    total: 0\n                },\n                metadata: {\n                    user_identifier: '',\n                    market: params?.market || 'all',\n                    start_time: new Date().toISOString(),\n                    end_time: new Date().toISOString(),\n                    interval: params?.interval || '1d',\n                    total_positions: 0,\n                    has_more: false\n                },\n                error: error instanceof Error ? error.message : 'Unknown error',\n                error_details: {\n                    code: 'unexpected_error',\n                    status: 500,\n                    timestamp: new Date().toISOString()\n                }\n            };\n        }\n    },\n    /**\n   * Get detailed position history for a specific position\n   * @param positionId ID of the position to get history for\n   * @param params Additional query parameters\n   * @returns Promise with detailed position history\n   */ getPositionDetails: async (positionId, params)=>{\n        try {\n            // Convert params to query string\n            const queryParams = new URLSearchParams({\n                positionId\n            });\n            if (params?.startTime) queryParams.append('startTime', String(params.startTime));\n            if (params?.endTime) queryParams.append('endTime', String(params.endTime));\n            if (params?.interval) queryParams.append('interval', params.interval);\n            const endpoint = `${API_ENDPOINTS.USER.POSITION_HISTORY}/details?${queryParams.toString()}`;\n            // Create headers object with proper typing\n            const authHeaders = addAuthHeaders();\n            const headers = new Headers();\n            headers.append('Content-Type', 'application/json');\n            // Add auth headers if they exist\n            if (authHeaders) {\n                Object.entries(authHeaders).forEach(([key, value])=>{\n                    if (value) headers.append(key, value);\n                });\n            }\n            const response = await api.get(endpoint, {\n                headers\n            });\n            if (!response.success) {\n                throw new Error(response.error || 'Failed to fetch position details');\n            }\n            return response.data.data;\n        } catch (error) {\n            console.error('Error fetching position details:', error);\n            throw error;\n        }\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (api);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvd29ua2Fzd29ybGQvRG93bmxvYWRzL2dyYWNlLXByb2plY3Qvc3JjL3VpL2FwaS9hcGlDbGllbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBUEkgQ2xpZW50IGZvciBHcmFjZSBBcHBcbiAqIFxuICogUHJvdmlkZXMgc3RhbmRhcmRpemVkIGVycm9yIGhhbmRsaW5nIGFuZCByZXNwb25zZSBwcm9jZXNzaW5nIGZvciBhbGwgQVBJIGNhbGxzLlxuICovXG5cbi8vIEZyb250IGFwaSBjb25zdGFudCBhbmQgcm9idXN0IHJlc29sdmVyIGZvciBiYXNlIFVSTFxuY29uc3QgQVBJX0JBU0VfVVJMID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCB8fCAnJztcblxuLy8gUmVzb2x2ZSBiYXNlIFVSTDsgcHJlZmVyIGVudiB2YXIsIGVsc2UgdXNlIHJlbGF0aXZlIHBhdGggdG8gYXZvaWQgQ09SUyBpc3N1ZXNcbmNvbnN0IHJlc29sdmVCYXNlVXJsID0gKCk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGVudlVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkw7XG4gIGlmIChlbnZVcmwgJiYgZW52VXJsLnRyaW0oKSAhPT0gJycpIHtcbiAgICByZXR1cm4gZW52VXJsLmVuZHNXaXRoKCcvJykgPyBlbnZVcmwuc2xpY2UoMCwgLTEpIDogZW52VXJsO1xuICB9XG4gIC8vIEZhbGxiYWNrIHRvIHJlbGF0aXZlIGJhc2UgdG8gdXNlIHNhbWUtb3JpZ2luIG9yIGRldiBwcm94eVxuICByZXR1cm4gJyc7XG59O1xuXG4vLyBBdXRoIHRva2VuIGtleSBmb3IgbG9jYWxTdG9yYWdlXG5jb25zdCBBVVRIX1RPS0VOX0tFWSA9ICdncmFjZV9hdXRoX3Rva2VuJztcbmNvbnN0IEFMVF9UT0tFTl9LRVkgPSAnZ3JhY2VfdG9rZW4nO1xuXG4vLyBHZXQgYXV0aCB0b2tlbiBmcm9tIHN0b3JhZ2UgKGNoZWNrcyBib3RoIHNlc3Npb24gYW5kIGxvY2FsLCBhbmQgYm90aCBrZXlzKVxuZXhwb3J0IGNvbnN0IGdldEF1dGhUb2tlbiA9ICgpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8vIFByZWZlciBzZXNzaW9uU3RvcmFnZSBmb3IgY3VycmVudCBzZXNzaW9uXG4gICAgICBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKEFVVEhfVE9LRU5fS0VZKSB8fFxuICAgICAgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShBTFRfVE9LRU5fS0VZKSB8fFxuICAgICAgLy8gRmFsbGJhY2sgdG8gbG9jYWxTdG9yYWdlXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShBVVRIX1RPS0VOX0tFWSkgfHxcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKEFMVF9UT0tFTl9LRVkpXG4gICAgKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8vIFNhdmUgYXV0aCB0b2tlbiB0byBsb2NhbFN0b3JhZ2UgdW5kZXIgYm90aCBrZXlzIGZvciBjb21wYXRpYmlsaXR5XG5leHBvcnQgY29uc3Qgc2F2ZUF1dGhUb2tlbiA9ICh0b2tlbjogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEFVVEhfVE9LRU5fS0VZLCB0b2tlbik7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oQUxUX1RPS0VOX0tFWSwgdG9rZW4pO1xuICB9XG59O1xuXG4vLyBSZW1vdmUgYXV0aCB0b2tlbiBmcm9tIGJvdGggc3RvcmFnZSBsb2NhdGlvbnMgYW5kIGtleXNcbmV4cG9ydCBjb25zdCByZW1vdmVBdXRoVG9rZW4gPSAoKTogdm9pZCA9PiB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEFVVEhfVE9LRU5fS0VZKTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShBTFRfVE9LRU5fS0VZKTtcbiAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKEFVVEhfVE9LRU5fS0VZKTtcbiAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKEFMVF9UT0tFTl9LRVkpO1xuICB9XG59O1xuXG4vLyBBZGQgYXV0aCBoZWFkZXJzIHRvIHJlcXVlc3Qgb3B0aW9uc1xuZXhwb3J0IGNvbnN0IGFkZEF1dGhIZWFkZXJzID0gKG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge30pOiBSZXF1ZXN0SW5pdCA9PiB7XG4gIGNvbnN0IHRva2VuID0gZ2V0QXV0aFRva2VuKCk7XG4gIGlmICh0b2tlbikge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIG9wdGlvbnM7XG59O1xuaW1wb3J0IHsgVHJhZGUsIFRyYWRlSGlzdG9yeVJlc3BvbnNlLCBQb3NpdGlvbkhpc3RvcnlSZXNwb25zZSwgVHJhZGVFeGVjdXRpb25SZXN1bHQsIFBvc2l0aW9uSGlzdG9yeUVudHJ5LCBVc2VyUG9zaXRpb25zUmVzcG9uc2UsIEJhc2VQb3NpdGlvbiB9IGZyb20gJy4vYXBpVHlwZXMnO1xuLy8gTm8gY2lyY3VsYXIgaW1wb3J0c1xuXG4vLyBBUEkgUmVzcG9uc2UgdHlwZXNcbmV4cG9ydCBpbnRlcmZhY2UgQXBpUmVzcG9uc2U8VCA9IGFueT4ge1xuICBzdWNjZXNzOiBib29sZWFuO1xuICBkYXRhPzogVDtcbiAgZXJyb3I/OiBzdHJpbmc7XG4gIHN0YXR1c0NvZGU/OiBudW1iZXI7XG4gIHJhd1Jlc3BvbnNlPzogYW55OyAvLyBPcmlnaW5hbCB1bnByb2Nlc3NlZCByZXNwb25zZSBmb3IgZGVidWdnaW5nXG59XG5cbi8vIEFQSSBFcnJvciB0eXBlc1xuZXhwb3J0IGNsYXNzIEFwaUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgc3RhdHVzQ29kZTogbnVtYmVyO1xuICBwdWJsaWMgZGF0YT86IGFueTtcblxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YXR1c0NvZGU6IG51bWJlciwgZGF0YT86IGFueSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdBcGlFcnJvcic7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICB9XG59XG5cbi8vIEFQSSBjb25maWd1cmF0aW9uIC0gdXNlIGVudmlyb25tZW50IHZhcmlhYmxlIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSByZWxhdGl2ZSBwYXRoXG5cbi8vIEVuc3VyZSBBUElfQkFTRV9VUkwgZW5kcyB3aXRoIGEgc2xhc2ggKGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXG5jb25zdCBnZXRCYXNlVXJsID0gKCkgPT4ge1xuICBjb25zdCBiYXNlID0gQVBJX0JBU0VfVVJMO1xuICBpZiAoYmFzZSAmJiBiYXNlLmVuZHNXaXRoKCcvJykpIHtcbiAgICByZXR1cm4gYmFzZS5zbGljZSgwLCAtMSk7XG4gIH1cbiAgcmV0dXJuIGJhc2U7XG59O1xuXG4vLyBBUEkgZW5kcG9pbnRzIGNvbnN0YW50c1xuZXhwb3J0IGNvbnN0IEFQSV9FTkRQT0lOVFMgPSB7XG4gIEFVVEg6IHtcbiAgICBMT0dJTjogJy9hcGkvYXV0aC9sb2dpbicsXG4gICAgUkVHSVNURVI6ICcvYXBpL2F1dGgvcmVnaXN0ZXInLFxuICAgIFZFUklGWV9UT0tFTjogJy9hcGkvYXV0aC92ZXJpZnknLFxuICAgIExPR09VVDogJy9hcGkvYXV0aC9sb2dvdXQnLFxuICAgIFJFRlJFU0hfVE9LRU46ICcvYXV0aC9yZWZyZXNoLXRva2VuJyxcbiAgICBGT1JHT1RfUEFTU1dPUkQ6ICcvYXBpL2F1dGgvZm9yZ290LXBhc3N3b3JkJyxcbiAgICBSRVNFVF9QQVNTV09SRDogJy9hcGkvYXV0aC9yZXNldC1wYXNzd29yZCdcbiAgfSxcbiAgVVNFUjoge1xuICAgIFBST0ZJTEU6ICcvYXBpL3VzZXIvcHJvZmlsZScsXG4gICAgTEVWRVJBR0VfUE9TSVRJT05TOiAnL2FwaS91c2VyL2xldmVyYWdlX3Bvc2l0aW9ucycsXG4gICAgU1BPVF9QT1NJVElPTlM6ICcvYXBpL3VzZXIvc3BvdF9wb3NpdGlvbnMnLFxuICAgIFBPU0lUSU9OX0hJU1RPUlk6ICcvYXBpL3VzZXIvcG9zaXRpb25faGlzdG9yeScsXG4gICAgVFJBREVfSElTVE9SWTogJy9hcGkvdXNlci90cmFkZV9oaXN0b3J5JyxcbiAgICBMSU1JVF9PUkRFUlM6ICcvYXBpL2xpbWl0LW9yZGVycydcbiAgfSxcbiAgV0FMTEVUOiB7XG4gICAgREFUQTogJy9hcGkvd2FsbGV0L2RhdGEnLFxuICAgIElORk86ICcvYXBpL3dhbGxldC9pbmZvJyxcbiAgICBNQU5HT19CQUxBTkNFOiAnL2FwaS93YWxsZXQvbWFuZ28tYmFsYW5jZScsIC8vIE1hbmdvIGV4YyBiYWxhbmNlXG4gICAgR0VORVJBVEU6ICcvYXBpL3dhbGxldC9nZW5lcmF0ZScsXG4gICAgU0VORDogJy9hcGkvd2FsbGV0L3NlbmQnLFxuICAgIENPTk5FQ1RfUEhBTlRPTTogJy9hcGkvd2FsbGV0L3BoYW50b20vY29ubmVjdCcsXG4gICAgQ09NUExFVEVfUEhBTlRPTTogJy9hcGkvd2FsbGV0L3BoYW50b20vY2FsbGJhY2snLCAvLyBVcGRhdGVkIHRvIG1hdGNoIGFjdHVhbCBiYWNrZW5kIGVuZHBvaW50XG4gICAgRElTQ09OTkVDVF9QSEFOVE9NOiAnL2FwaS93YWxsZXQvcGhhbnRvbS9kaXNjb25uZWN0JyxcbiAgICAvLyBNYXAgQkFMQU5DRSB0byBJTkZPIHNpbmNlIHRoZSBzZXJ2ZXIgdXNlcyAvYXBpL3dhbGxldC9pbmZvIGVuZHBvaW50IHRvIGdldCB3YWxsZXQgYmFsYW5jZVxuICAgIEJBTEFOQ0U6ICcvYXBpL3dhbGxldC9pbmZvJyxcbiAgICBUUkFOU0FDVElPTlM6ICcvYXBpL3dhbGxldC90cmFuc2FjdGlvbnMnXG4gIH0sXG4gIENIQVQ6IHtcbiAgICAvLyBHZXQgYWxsIGNoYXQgc2Vzc2lvbnMgZm9yIHRoZSBhdXRoZW50aWNhdGVkIHVzZXJcbiAgICBTRVNTSU9OUzogJy9hcGkvY2hhdC9zZXNzaW9ucycsXG4gICAgLy8gQ3JlYXRlIGEgbmV3IGNoYXQgc2Vzc2lvblxuICAgIE5FV19TRVNTSU9OOiAnL2FwaS9jaGF0L3Nlc3Npb24vbmV3JyxcbiAgICAvLyBHZXQgY2hhdCBoaXN0b3J5IGZvciBhIHNwZWNpZmljIHNlc3Npb25cbiAgICBISVNUT1JZOiAoc2Vzc2lvbklkOiBzdHJpbmcpID0+IGAvYXBpL2NoYXQvaGlzdG9yeS8ke3Nlc3Npb25JZH1gLFxuICAgIC8vIFNlbmQgYSBjaGF0IG1lc3NhZ2VcbiAgICBNRVNTQUdFOiAnL2FwaS9jaGF0L21lc3NhZ2UnXG4gIH0sXG4gIFNPQ0lBTDoge1xuICAgIC8vIENvcmUgc29jaWFsIG1lZGlhIGVuZHBvaW50c1xuICAgIFNFTlRJTUVOVDogJy9hcGkvc29jaWFsL3NlbnRpbWVudCcsXG4gICAgVFJFTkRJTkc6ICcvYXBpL3NvY2lhbC90cmVuZGluZy10b3BpY3MnLFxuICAgIElORkxVRU5USUFMOiAnL2FwaS9zb2NpYWwvaW5mbHVlbnRpYWwnLFxuICAgIFRXRUVUUzogJy9hcGkvc29jaWFsL3R3ZWV0cycsXG4gIH0sXG4gIE1BTkdPOiB7XG4gICAgLy8gTWFuZ28gTWFya2V0cyBBUEkgZW5kcG9pbnRzXG4gICAgQkFTRTogJy9hcGkvbWFuZ28nLFxuICAgIE9ITENWOiAnL2FwaS9tYW5nby9vaGxjdicsXG4gICAgTUFSS0VUUzogJy9hcGkvbWFuZ28vbWFya2V0cycsXG4gICAgT1JERVJfQk9PSzogJy9hcGkvbWFuZ28vb3JkZXJib29rJyxcbiAgICBUUkFERVM6ICcvYXBpL21hbmdvL3RyYWRlcycsXG4gICAgTUFSS0VUX1NUQVRTOiAnL2FwaS9tYW5nby9tYXJrZXQtc3RhdHMnLFxuICAgIENPTU1VTklUSUVTOiAnL2FwaS9zb2NpYWwvY29tbXVuaXRpZXMnLFxuICAgIEVOVElUSUVTOiAnL2FwaS9zb2NpYWwvZW50aXRpZXMnLFxuICAgIEZFRUQ6ICcvYXBpL3NvY2lhbC9mZWVkJyxcbiAgICBDT05ORUNUSU9OUzogJy9hcGkvc29jaWFsL2Nvbm5lY3Rpb25zJ1xuICB9LFxuICBUUkFESU5HOiB7XG4gICAgRVhFQ1VURTogJy9hcGkvdHJhZGluZy9leGVjdXRlJyxcbiAgICBDT05GSVJNOiAnL2FwaS90cmFkaW5nL2NvbmZpcm0nLFxuICAgIFNNQVJUX1NFVFRJTkdTOiAnL2FwaS90cmFkaW5nL3NtYXJ0LXNldHRpbmdzJyxcbiAgICBUT0tFTlM6ICcvYXBpL3RyYWRpbmcvdG9rZW5zJyxcbiAgICBQUklDRV9DSEFSVDogJy9hcGkvdHJhZGluZy9wcmljZS1jaGFydCcsXG4gICAgU1dBUDogJy9hcGkvdHJhZGluZy9zd2FwJyxcbiAgICBTRUxMX1BPU0lUSU9OOiAnL2FwaS90cmFkaW5nL3NlbGwtcG9zaXRpb24nLFxuICAgIFVTRVJfUE9TSVRJT05TOiAnL2FwaS91c2VyL3Bvc2l0aW9ucycsXG4gICAgTEVWRVJBR0VfUE9TSVRJT05TOiAnL2FwaS91c2VyL2xldmVyYWdlX3Bvc2l0aW9ucycsXG4gICAgU1BPVF9QT1NJVElPTlM6ICcvYXBpL3VzZXIvc3BvdF9wb3NpdGlvbnMnXG4gIH0sXG4gIFNFVFRJTkdTOiB7XG4gICAgLy8gVXBkYXRlZCB0byBtYXRjaCBiYWNrZW5kIGltcGxlbWVudGF0aW9uXG4gICAgUFJPRklMRTogJy9hcGkvdXNlci9zZXR0aW5ncycsICAvLyBNYXRjaGVzIHVzZXJfc2V0dGluZ3MgZW5kcG9pbnQgaW4gYmFja2VuZFxuICAgIE5PVElGSUNBVElPTlM6ICcvYXBpL3NldHRpbmdzL25vdGlmaWNhdGlvbnMnLCAvLyBLZWVwIGZvciBmdXR1cmUgaW1wbGVtZW50YXRpb25cbiAgICAvLyBBZGRpdGlvbmFsIGJhY2tlbmQgc2V0dGluZ3MgZW5kcG9pbnRcbiAgICBUUkFESU5HX1NFVFRJTkdTOiAnL2FwaS90cmFkaW5nL3NtYXJ0LXNldHRpbmdzJywgLy8gTWF0Y2hlcyB0cmFkaW5nX3NtYXJ0X3NldHRpbmdzIGluIGJhY2tlbmRcbiAgfSxcbn07XG5cbi8qKlxuICogTm9ybWFsaXplIGRpZmZlcmVudCBBUEkgcmVzcG9uc2UgZm9ybWF0cyB0byBhIGNvbnNpc3RlbnQgc3RydWN0dXJlXG4gKiBcbiAqIFRoaXMgcHJpb3JpdGl6ZXMgQVBJIHJlc3BvbnNlIGZvcm1hdHMgaW4gYSBwcmVkaWN0YWJsZSBvcmRlcjpcbiAqIDEuIEF1dGggcmVzcG9uc2VzIHdpdGggdG9rZW4gYW5kIHVzZXJcbiAqIDIuIFN0YW5kYXJkIHN1Y2Nlc3MgcmVzcG9uc2VzIHdpdGggZGF0YVxuICogMy4gUmVzdWx0cy1iYXNlZCByZXNwb25zZXNcbiAqIDQuIERlZmF1bHQgcGFzcy10aHJvdWdoXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVJlc3BvbnNlPFQ+KHJlc3BvbnNlRGF0YTogYW55KTogVCB7XG4gIC8vIEhhbmRsZSBhdXRoIHJlc3BvbnNlcyB3aXRoIHRva2VuXG4gIGlmIChyZXNwb25zZURhdGEgJiYgdHlwZW9mIHJlc3BvbnNlRGF0YSA9PT0gJ29iamVjdCcgJiYgJ3Rva2VuJyBpbiByZXNwb25zZURhdGEpIHtcbiAgICAvLyBTYXZlIHRoZSB0b2tlbiB3aGVuIHJlY2VpdmVkIGluIHRoZSByZXNwb25zZVxuICAgIHNhdmVBdXRoVG9rZW4ocmVzcG9uc2VEYXRhLnRva2VuKTtcbiAgICAvLyBSZW1vdmUgdG9rZW4gZnJvbSByZXNwb25zZSBkYXRhIHRvIGF2b2lkIGV4cG9zaW5nIGl0XG4gICAgY29uc3QgeyB0b2tlbiwgLi4ucmVzdCB9ID0gcmVzcG9uc2VEYXRhO1xuICAgIHJldHVybiByZXN0IGFzIFQ7XG4gIH1cbiAgXG4gIC8vIEhhbmRsZSBzdGFuZGFyZCBzdWNjZXNzIHJlc3BvbnNlIGZvcm1hdFxuICBpZiAocmVzcG9uc2VEYXRhICYmIHR5cGVvZiByZXNwb25zZURhdGEgPT09ICdvYmplY3QnICYmICdzdWNjZXNzJyBpbiByZXNwb25zZURhdGEpIHtcbiAgICByZXR1cm4gcmVzcG9uc2VEYXRhIGFzIFQ7XG4gIH1cbiAgXG4gIC8vIEhhbmRsZSByZXN1bHRzLWJhc2VkIHJlc3BvbnNlIGZvcm1hdFxuICBpZiAocmVzcG9uc2VEYXRhICYmIHR5cGVvZiByZXNwb25zZURhdGEgPT09ICdvYmplY3QnICYmICdyZXN1bHRzJyBpbiByZXNwb25zZURhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YS5yZXN1bHRzLFxuICAgICAgLi4ucmVzcG9uc2VEYXRhXG4gICAgfSBhcyB1bmtub3duIGFzIFQ7XG4gIH1cbiAgXG4gIC8vIERlZmF1bHQ6IHBhc3MgdGhyb3VnaCB0aGUgcmVzcG9uc2UgZGF0YSBhcy1pc1xuICAvLyBTb21lIGVuZHBvaW50cyByZXR1cm4gcmVzdWx0cyBpbiBhICdyZXN1bHRzJyBwcm9wZXJ0eVxuICBpZiAocmVzcG9uc2VEYXRhLnJlc3VsdHMpIHtcbiAgICByZXR1cm4gcmVzcG9uc2VEYXRhLnJlc3VsdHMgYXMgVDtcbiAgfVxuICBcbiAgLy8gUFJJT1JJVFkgNDogSGFuZGxlIGRpcmVjdCBkYXRhIGZvcm1hdCB3aXRob3V0IHN1Y2Nlc3MgZmxhZ1xuICAvLyBTb21lIG9sZCBlbmRwb2ludHMgcmV0dXJuIHtkYXRhOiB7Li4ufX0gZGlyZWN0bHlcbiAgaWYgKHJlc3BvbnNlRGF0YS5kYXRhICYmIHJlc3BvbnNlRGF0YS5zdWNjZXNzID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gcmVzcG9uc2VEYXRhLmRhdGEgYXMgVDtcbiAgfVxuICBcbiAgLy8gRmFsbCBiYWNrIHRvIHJldHVybmluZyB0aGUgZW50aXJlIHJlc3BvbnNlIGFzIGlzXG4gIHJldHVybiByZXNwb25zZURhdGEgYXMgVDtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSBBUEkgcmVzcG9uc2UgYW5kIGhhbmRsZSBlcnJvcnMgY29uc2lzdGVudGx5XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NSZXNwb25zZTxUPihyZXNwb25zZTogUmVzcG9uc2UpOiBQcm9taXNlPEFwaVJlc3BvbnNlPFQ+PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2xvbmUgdGhlIHJlc3BvbnNlIHNvIHdlIGNhbiByZWFkIGl0IG11bHRpcGxlIHRpbWVzXG4gICAgY29uc3QgcmVzcG9uc2VDbG9uZSA9IHJlc3BvbnNlLmNsb25lKCk7XG4gICAgXG4gICAgLy8gUmVhZCBib2R5IE9OQ0UgYXMgdGV4dCwgdGhlbiBhdHRlbXB0IHRvIHBhcnNlIEpTT04gZnJvbSBpdC5cbiAgICBjb25zdCBib2R5VGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICBsZXQgZGF0YTogYW55ID0gdW5kZWZpbmVkO1xuICAgIHRyeSB7XG4gICAgICBkYXRhID0gYm9keVRleHQgPyBKU09OLnBhcnNlKGJvZHlUZXh0KSA6IHVuZGVmaW5lZDtcbiAgICAgIC8vIElmIHdlIGdldCBhIG5ldyB0b2tlbiBpbiB0aGUgcmVzcG9uc2UsIHNhdmUgaXRcbiAgICAgIGlmIChkYXRhICYmIGRhdGEudG9rZW4pIHtcbiAgICAgICAgc2F2ZUF1dGhUb2tlbihkYXRhLnRva2VuKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBOb24tSlNPTiBib2R5OyB0cmVhdCBhcyB0ZXh0IGVycm9yIHBheWxvYWQgd2hlbiBub3Qgb2tcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogYm9keVRleHQgfHwgJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0JyxcbiAgICAgICAgICBzdGF0dXNDb2RlOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgcmF3UmVzcG9uc2U6IHJlc3BvbnNlQ2xvbmVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIC8vIElmIE9LIHN0YXR1cyBidXQgbm9uLUpTT04sIHBhc3MgcmF3IHRleHQgYXMgZGF0YVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogYm9keVRleHQgYXMgdW5rbm93biBhcyBULFxuICAgICAgICBzdGF0dXNDb2RlOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgIHJhd1Jlc3BvbnNlOiByZXNwb25zZUNsb25lXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBIYW5kbGUgSFRUUCBlcnJvciBzdGF0dXMgY29kZXNcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAvLyBEbyBub3QgcGVyZm9ybSBnbG9iYWwgc2lkZSBlZmZlY3RzIGhlcmU7IGxldCBjYWxsZXJzIGRlY2lkZSBob3cgdG8gaGFuZGxlIDQwMS80MDNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZGF0YT8ubWVzc2FnZSB8fCBkYXRhPy5lcnJvciB8fCBgSFRUUCBlcnJvciAke3Jlc3BvbnNlLnN0YXR1c31gLFxuICAgICAgICBzdGF0dXNDb2RlOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIHJhd1Jlc3BvbnNlOiByZXNwb25zZUNsb25lXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBTdWNjZXNzIGNhc2UgLSBub3JtYWxpemUgdGhlIHJlc3BvbnNlIGRhdGFcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IG5vcm1hbGl6ZVJlc3BvbnNlPFQ+KGRhdGEpLFxuICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgcmF3UmVzcG9uc2U6IHJlc3BvbnNlQ2xvbmVcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgcmVzcG9uc2U6JywgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIHByb2Nlc3NpbmcgcmVzcG9uc2UnLFxuICAgICAgcmF3UmVzcG9uc2U6IHJlc3BvbnNlLmNsb25lKClcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogTWFrZSBhbiBBUEkgcmVxdWVzdCB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZ1xuICovXG5hc3luYyBmdW5jdGlvbiBhcGlSZXF1ZXN0PFQgPSBhbnk+KFxuICBlbmRwb2ludDogc3RyaW5nLFxuICBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9XG4pOiBQcm9taXNlPEFwaVJlc3BvbnNlPFQ+PiB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IGJhc2UgVVJMIGZyb20gZW52aXJvbm1lbnQgb3IgdXNlIHJvYnVzdCBmYWxsYmFja1xuICAgIGNvbnN0IGJhc2VVcmwgPSByZXNvbHZlQmFzZVVybCgpO1xuICAgIGNvbnN0IHVybCA9IGVuZHBvaW50LnN0YXJ0c1dpdGgoJ2h0dHAnKSA/IGVuZHBvaW50IDogYCR7YmFzZVVybH0ke2VuZHBvaW50fWA7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0FQSSBSZXF1ZXN0OicsIHsgYmFzZVVybCwgZW5kcG9pbnQsIHVybCB9KTtcbiAgICBcbiAgICAvLyBBZGQgYXV0aCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSBhZGRBdXRoSGVhZGVycyh7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJywgLy8gSW5jbHVkZSBjb29raWVzIGZvciBDU1JGIHByb3RlY3Rpb25cbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnTWFraW5nIGZldGNoIHJlcXVlc3QgdG86JywgdXJsLCAnd2l0aCBvcHRpb25zOicsIHJlcXVlc3RPcHRpb25zKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgcmVxdWVzdE9wdGlvbnMpO1xuICAgIGNvbnNvbGUubG9nKCdSZXNwb25zZSByZWNlaXZlZDonLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuXG4gICAgcmV0dXJuIGF3YWl0IHByb2Nlc3NSZXNwb25zZTxUPihyZXNwb25zZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQXBpRXJyb3IpIHtcbiAgICAgIC8vIFJldGhyb3cgQXBpRXJyb3IgaW5zdGFuY2VzXG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgXG4gICAgLy8gSGFuZGxlIG5ldHdvcmsgZXJyb3JzXG4gICAgdGhyb3cgbmV3IEFwaUVycm9yKFxuICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnTmV0d29yayBlcnJvcicsXG4gICAgICAwXG4gICAgKTtcbiAgfVxufVxuXG4vLyBDb252ZW5pZW5jZSBtZXRob2RzIGZvciBjb21tb24gSFRUUCBtZXRob2RzXG5leHBvcnQgY29uc3QgYXBpID0ge1xuICBhc3luYyBnZXQ8VCA9IGFueT4oZW5kcG9pbnQ6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fSk6IFByb21pc2U8QXBpUmVzcG9uc2U8VD4+IHtcbiAgICByZXR1cm4gYXBpUmVxdWVzdDxUPihlbmRwb2ludCwgeyAuLi5vcHRpb25zLCBtZXRob2Q6ICdHRVQnIH0pO1xuICB9LFxuICBcbiAgYXN5bmMgcG9zdDxUID0gYW55PihlbmRwb2ludDogc3RyaW5nLCBkYXRhOiBhbnksIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge30pOiBQcm9taXNlPEFwaVJlc3BvbnNlPFQ+PiB7XG4gICAgcmV0dXJuIGFwaVJlcXVlc3Q8VD4oZW5kcG9pbnQsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgIH0pO1xuICB9LFxuICBcbiAgYXN5bmMgcHV0PFQgPSBhbnk+KGVuZHBvaW50OiBzdHJpbmcsIGRhdGE6IGFueSwgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fSk6IFByb21pc2U8QXBpUmVzcG9uc2U8VD4+IHtcbiAgICByZXR1cm4gYXBpUmVxdWVzdDxUPihlbmRwb2ludCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICB9KTtcbiAgfSxcbiAgXG4gIGFzeW5jIGRlbGV0ZTxUID0gYW55PihlbmRwb2ludDogc3RyaW5nLCBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9KTogUHJvbWlzZTxBcGlSZXNwb25zZTxUPj4ge1xuICAgIHJldHVybiBhcGlSZXF1ZXN0PFQ+KGVuZHBvaW50LCB7IC4uLm9wdGlvbnMsIG1ldGhvZDogJ0RFTEVURScgfSk7XG4gIH1cbn07XG5cbi8vIENoYXQgQVBJIFR5cGVzXG5pbnRlcmZhY2UgQ2hhdFNlc3Npb24ge1xuICBpZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBjcmVhdGVkOiBzdHJpbmc7XG4gIHVwZGF0ZWQ6IHN0cmluZztcbiAgbWVzc2FnZV9jb3VudDogbnVtYmVyO1xuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbmludGVyZmFjZSBDaGF0TWVzc2FnZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ3N5c3RlbSc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuaW50ZXJmYWNlIEFwaUVycm9yUmVzcG9uc2Uge1xuICBlcnJvcjogc3RyaW5nO1xuICB1c2luZ19mYWxsYmFjaz86IGJvb2xlYW47XG4gIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuLy8gQ2hhdCBBUEkgbWV0aG9kc1xuZXhwb3J0IGNvbnN0IENoYXRBcGkgPSB7XG4gIC8qKlxuICAgKiBHZXQgYWxsIGNoYXQgc2Vzc2lvbnMgZm9yIHRoZSBhdXRoZW50aWNhdGVkIHVzZXJcbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIGxpc3Qgb2YgY2hhdCBzZXNzaW9uc1xuICAgKi9cbiAgLyoqXG4gICAqIEdldCBhbGwgY2hhdCBzZXNzaW9ucyBmb3IgdGhlIGF1dGhlbnRpY2F0ZWQgdXNlclxuICAgKiBAcGFyYW0gbGltaXQgT3B0aW9uYWwgbGltaXQgZm9yIHBhZ2luYXRpb25cbiAgICogQHBhcmFtIG9mZnNldCBPcHRpb25hbCBvZmZzZXQgZm9yIHBhZ2luYXRpb25cbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIGxpc3Qgb2YgY2hhdCBzZXNzaW9ucyBhbmQgcGFnaW5hdGlvbiBpbmZvXG4gICAqL1xuICBhc3luYyBnZXRTZXNzaW9ucyhsaW1pdD86IG51bWJlciwgb2Zmc2V0PzogbnVtYmVyKTogUHJvbWlzZTx7XG4gICAgc2Vzc2lvbnM6IENoYXRTZXNzaW9uW107XG4gICAgdG90YWw6IG51bWJlcjtcbiAgICBoYXNfbW9yZTogYm9vbGVhbjtcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICBpZiAobGltaXQpIHBhcmFtcy5hcHBlbmQoJ2xpbWl0JywgbGltaXQudG9TdHJpbmcoKSk7XG4gICAgICBpZiAob2Zmc2V0KSBwYXJhbXMuYXBwZW5kKCdvZmZzZXQnLCBvZmZzZXQudG9TdHJpbmcoKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gICAgICBjb25zdCB1cmwgPSBxdWVyeSA/IGAke0FQSV9FTkRQT0lOVFMuQ0hBVC5TRVNTSU9OU30/JHtxdWVyeX1gIDogQVBJX0VORFBPSU5UUy5DSEFULlNFU1NJT05TO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZXQ8e1xuICAgICAgICBkYXRhOiBDaGF0U2Vzc2lvbltdO1xuICAgICAgICB0b3RhbDogbnVtYmVyO1xuICAgICAgICBoYXNfbW9yZTogYm9vbGVhbjtcbiAgICAgIH0+KHVybCk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNlc3Npb25zOiByZXNwb25zZS5kYXRhPy5kYXRhIHx8IFtdLFxuICAgICAgICB0b3RhbDogcmVzcG9uc2UuZGF0YT8udG90YWwgfHwgMCxcbiAgICAgICAgaGFzX21vcmU6IHJlc3BvbnNlLmRhdGE/Lmhhc19tb3JlIHx8IGZhbHNlLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8uZXJyb3IgfHwgJ0ZhaWxlZCB0byBmZXRjaCBjaGF0IHNlc3Npb25zJztcbiAgICAgIGNvbnN0IHVzaW5nRmFsbGJhY2sgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8udXNpbmdfZmFsbGJhY2s7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjaGF0IHNlc3Npb25zOicsIGVycm9yTWVzc2FnZSwgeyB1c2luZ0ZhbGxiYWNrIH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgY2hhdCBzZXNzaW9uXG4gICAqIEBwYXJhbSB0aXRsZSBPcHRpb25hbCB0aXRsZSBmb3IgdGhlIG5ldyBzZXNzaW9uXG4gICAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCB0aGUgbmV3IHNlc3Npb24gSURcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVNlc3Npb24odGl0bGU/OiBzdHJpbmcpOiBQcm9taXNlPHsgc2Vzc2lvbl9pZDogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucG9zdDx7IHNlc3Npb25faWQ6IHN0cmluZyB9PihcbiAgICAgICAgQVBJX0VORFBPSU5UUy5DSEFULk5FV19TRVNTSU9OLFxuICAgICAgICB7IHRpdGxlOiB0aXRsZSB8fCAnTmV3IENoYXQnIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2UuZGF0YT8uc2Vzc2lvbl9pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0IGZyb20gc2VydmVyJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7IHNlc3Npb25faWQ6IHJlc3BvbnNlLmRhdGEuc2Vzc2lvbl9pZCB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjaGF0IHNlc3Npb246JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGNoYXQgc2Vzc2lvbicpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogR2V0IGNoYXQgaGlzdG9yeSBmb3IgYSBzcGVjaWZpYyBzZXNzaW9uXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgSUQgb2YgdGhlIGNoYXQgc2Vzc2lvblxuICAgKiBAcmV0dXJucyBQcm9taXNlIHdpdGggY2hhdCBoaXN0b3J5XG4gICAqL1xuICAvKipcbiAgICogR2V0IGNoYXQgaGlzdG9yeSBmb3IgYSBzcGVjaWZpYyBzZXNzaW9uXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgSUQgb2YgdGhlIGNoYXQgc2Vzc2lvblxuICAgKiBAcGFyYW0gbGltaXQgT3B0aW9uYWwgbGltaXQgZm9yIHBhZ2luYXRpb25cbiAgICogQHBhcmFtIG9mZnNldCBPcHRpb25hbCBvZmZzZXQgZm9yIHBhZ2luYXRpb25cbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIGNoYXQgaGlzdG9yeSBhbmQgcGFnaW5hdGlvbiBpbmZvXG4gICAqL1xuICBhc3luYyBnZXRIaXN0b3J5KFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIGxpbWl0PzogbnVtYmVyLFxuICAgIG9mZnNldD86IG51bWJlclxuICApOiBQcm9taXNlPHtcbiAgICBtZXNzYWdlczogQ2hhdE1lc3NhZ2VbXTtcbiAgICB0b3RhbDogbnVtYmVyO1xuICAgIGhhc19tb3JlOiBib29sZWFuO1xuICB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgIGlmIChsaW1pdCkgcGFyYW1zLmFwcGVuZCgnbGltaXQnLCBsaW1pdC50b1N0cmluZygpKTtcbiAgICAgIGlmIChvZmZzZXQpIHBhcmFtcy5hcHBlbmQoJ29mZnNldCcsIG9mZnNldC50b1N0cmluZygpKTtcbiAgICAgIFxuICAgICAgY29uc3QgcXVlcnkgPSBwYXJhbXMudG9TdHJpbmcoKTtcbiAgICAgIGNvbnN0IHVybCA9IHF1ZXJ5IFxuICAgICAgICA/IGAke0FQSV9FTkRQT0lOVFMuQ0hBVC5ISVNUT1JZKHNlc3Npb25JZCl9PyR7cXVlcnl9YFxuICAgICAgICA6IEFQSV9FTkRQT0lOVFMuQ0hBVC5ISVNUT1JZKHNlc3Npb25JZCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLmdldDx7XG4gICAgICAgIGRhdGE6IENoYXRNZXNzYWdlW107XG4gICAgICAgIHRvdGFsOiBudW1iZXI7XG4gICAgICAgIGhhc19tb3JlOiBib29sZWFuO1xuICAgICAgfT4odXJsKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZXM6IHJlc3BvbnNlLmRhdGE/LmRhdGEgfHwgW10sXG4gICAgICAgIHRvdGFsOiByZXNwb25zZS5kYXRhPy50b3RhbCB8fCAwLFxuICAgICAgICBoYXNfbW9yZTogcmVzcG9uc2UuZGF0YT8uaGFzX21vcmUgfHwgZmFsc2UsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvciB8fCAnRmFpbGVkIHRvIGZldGNoIGNoYXQgaGlzdG9yeSc7XG4gICAgICBjb25zdCB1c2luZ0ZhbGxiYWNrID0gZXJyb3IucmVzcG9uc2U/LmRhdGE/LnVzaW5nX2ZhbGxiYWNrO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY2hhdCBoaXN0b3J5OicsIGVycm9yTWVzc2FnZSwgeyB1c2luZ0ZhbGxiYWNrIH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTZW5kIGEgbWVzc2FnZSBpbiBhIGNoYXQgc2Vzc2lvblxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIElEIG9mIHRoZSBjaGF0IHNlc3Npb25cbiAgICogQHBhcmFtIG1lc3NhZ2UgVGhlIG1lc3NhZ2UgY29udGVudFxuICAgKiBAcmV0dXJucyBQcm9taXNlIHdpdGggdGhlIGFzc2lzdGFudCdzIHJlc3BvbnNlXG4gICAqL1xuICAvKipcbiAgICogU2VuZCBhIG1lc3NhZ2UgaW4gYSBjaGF0IHNlc3Npb25cbiAgICogQHBhcmFtIHNlc3Npb25JZCBJRCBvZiB0aGUgY2hhdCBzZXNzaW9uXG4gICAqIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIGNvbnRlbnRcbiAgICogQHBhcmFtIG1ldGFkYXRhIE9wdGlvbmFsIG1ldGFkYXRhIHRvIGluY2x1ZGUgd2l0aCB0aGUgbWVzc2FnZVxuICAgKiBAcmV0dXJucyBQcm9taXNlIHdpdGggdGhlIGFzc2lzdGFudCdzIHJlc3BvbnNlXG4gICAqL1xuICBhc3luYyBzZW5kTWVzc2FnZShcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICk6IFByb21pc2U8e1xuICAgIHJlc3BvbnNlOiBzdHJpbmc7XG4gICAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIHNlc3Npb25faWQ6IHN0cmluZztcbiAgICBtZXNzYWdlX2lkOiBzdHJpbmc7XG4gICAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucG9zdDx7IGRhdGE6IGFueSB9PihcbiAgICAgICAgQVBJX0VORFBPSU5UUy5DSEFULk1FU1NBR0UsXG4gICAgICAgIHtcbiAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uSWQsXG4gICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAuLi4obWV0YWRhdGEgJiYgeyBtZXRhZGF0YSB9KSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5kYXRhIHx8ICFyZXNwb25zZS5kYXRhLmRhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlc3BvbnNlIGZvcm1hdCBmcm9tIHNlcnZlcicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXNwb25zZTogcmVzcG9uc2UuZGF0YS5kYXRhLnJlc3BvbnNlIHx8ICcnLFxuICAgICAgICBtZXRhZGF0YTogcmVzcG9uc2UuZGF0YS5kYXRhLm1ldGFkYXRhLFxuICAgICAgICBzZXNzaW9uX2lkOiByZXNwb25zZS5kYXRhLmRhdGEuc2Vzc2lvbl9pZCB8fCBzZXNzaW9uSWQsXG4gICAgICAgIG1lc3NhZ2VfaWQ6IHJlc3BvbnNlLmRhdGEuZGF0YS5tZXNzYWdlX2lkIHx8IGBtc2dfJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIHRpbWVzdGFtcDogcmVzcG9uc2UuZGF0YS5kYXRhLnRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvciB8fCAnRmFpbGVkIHRvIHNlbmQgY2hhdCBtZXNzYWdlJztcbiAgICAgIGNvbnN0IHVzaW5nRmFsbGJhY2sgPSBlcnJvci5yZXNwb25zZT8uZGF0YT8udXNpbmdfZmFsbGJhY2s7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIGNoYXQgbWVzc2FnZTonLCBlcnJvck1lc3NhZ2UsIHsgdXNpbmdGYWxsYmFjayB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH1cbiAgfSxcbn07XG5cbi8vIFRyYWRpbmcgQVBJIG1ldGhvZHNcbmV4cG9ydCBjb25zdCBUcmFkaW5nQXBpID0ge1xuICAvKipcbiAgICogRXhlY3V0ZSBhIHRyYWRlIChmaXJzdCBzdGVwIG9mIHR3by1waGFzZSB0cmFkZSBleGVjdXRpb24pXG4gICAqIEBwYXJhbSBwYXJhbXMgVHJhZGUgZXhlY3V0aW9uIHBhcmFtZXRlcnNcbiAgICogQHJldHVybnMgVHJhZGUgZXhlY3V0aW9uIHJlc3VsdCB3aXRoIGNvbmZpcm1hdGlvbiBJRCBpZiBjb25maXJtYXRpb24gcmVxdWlyZWRcbiAgICovXG4gIGFzeW5jIGV4ZWN1dGVUcmFkZShwYXJhbXM6IHtcbiAgICBhY3Rpb246ICdidXknIHwgJ3NlbGwnO1xuICAgIHRva2VuOiBzdHJpbmc7XG4gICAgYW1vdW50OiBzdHJpbmcgfCBudW1iZXI7XG4gICAgaXNMZXZlcmFnZT86IGJvb2xlYW47XG4gICAgbGV2ZXJhZ2U/OiBudW1iZXI7XG4gICAgc3RvcExvc3M/OiBudW1iZXI7XG4gICAgdGFrZVByb2ZpdD86IG51bWJlcjtcbiAgfSk6IFByb21pc2U8VHJhZGVFeGVjdXRpb25SZXN1bHQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkucG9zdCgnL2FwaS90cmFkaW5nL2V4ZWN1dGUnLCB7XG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgYW1vdW50OiBwYXJhbXMuYW1vdW50LnRvU3RyaW5nKClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1RyYWRlIGV4ZWN1dGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBlcnJvci5yZXNwb25zZT8uZGF0YT8uZXJyb3IgfHwgJ1RyYWRlIGV4ZWN1dGlvbiBmYWlsZWQnXG4gICAgICApO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ29uZmlybSBhIHBlbmRpbmcgdHJhZGUgKHNlY29uZCBzdGVwIG9mIHR3by1waGFzZSB0cmFkZSBleGVjdXRpb24pXG4gICAqIEBwYXJhbSBjb25maXJtYXRpb25JZCBUaGUgY29uZmlybWF0aW9uIElEIGZyb20gZXhlY3V0ZVRyYWRlIHJlc3BvbnNlXG4gICAqIEByZXR1cm5zIEZpbmFsIHRyYWRlIGV4ZWN1dGlvbiByZXN1bHRcbiAgICovXG4gIGFzeW5jIGNvbmZpcm1UcmFkZShjb25maXJtYXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxUcmFkZUV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5wb3N0KCcvYXBpL3RyYWRpbmcvY29uZmlybScsIHtcbiAgICAgICAgY29uZmlybWF0aW9uX2lkOiBjb25maXJtYXRpb25JZFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignVHJhZGUgY29uZmlybWF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvciB8fCAnVHJhZGUgY29uZmlybWF0aW9uIGZhaWxlZCdcbiAgICAgICk7XG4gICAgfVxuICB9LFxuICBcbiAgLyoqXG4gICAqIENsb3NlIGFuIGV4aXN0aW5nIHBvc2l0aW9uIChsZXZlcmFnZSBvciBzcG90KVxuICAgKiBAcGFyYW0gcGFyYW1zIFBvc2l0aW9uIHBhcmFtZXRlcnMgdG8gY2xvc2VcbiAgICogQHJldHVybnMgUG9zaXRpb24gY2xvc2luZyByZXN1bHRcbiAgICovXG4gIGFzeW5jIGNsb3NlUG9zaXRpb24ocGFyYW1zOiB7XG4gICAgbWFya2V0OiBzdHJpbmc7XG4gICAgcG9zaXRpb25faWQ/OiBzdHJpbmc7XG4gICAgc2l6ZT86IG51bWJlcjtcbiAgICBwcmljZT86IG51bWJlcjtcbiAgfSk6IFByb21pc2U8YW55PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnBvc3QoJy9hcGkvdHJhZGluZy9zZWxsLXBvc2l0aW9uJywgcGFyYW1zKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdQb3NpdGlvbiBjbG9zaW5nIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvciB8fCAnRmFpbGVkIHRvIGNsb3NlIHBvc2l0aW9uJ1xuICAgICAgKTtcbiAgICB9XG4gIH0sXG4gIFxuICAvKipcbiAgICogU2VsbCBhIHNwb3QgdG9rZW4gZm9yIGFub3RoZXIgdG9rZW4gKHVzdWFsbHkgVVNEQylcbiAgICogQHBhcmFtIHBhcmFtcyBUb2tlbiBzZWxsaW5nIHBhcmFtZXRlcnNcbiAgICogQHJldHVybnMgVG9rZW4gc2VsbGluZyByZXN1bHRcbiAgICovXG4gIGFzeW5jIHNlbGxUb2tlbihwYXJhbXM6IHtcbiAgICB0b2tlbjogc3RyaW5nO1xuICAgIGFtb3VudDogbnVtYmVyIHwgc3RyaW5nO1xuICAgIHRhcmdldF90b2tlbj86IHN0cmluZztcbiAgICBwcmljZT86IG51bWJlcjtcbiAgfSk6IFByb21pc2U8YW55PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnBvc3QoJy9hcGkvdHJhZGluZy9zZWxsLXRva2VuJywge1xuICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgIGFtb3VudDogcGFyYW1zLmFtb3VudC50b1N0cmluZygpXG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUb2tlbiBzZWxsaW5nIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGVycm9yLnJlc3BvbnNlPy5kYXRhPy5lcnJvciB8fCAnRmFpbGVkIHRvIHNlbGwgdG9rZW4nXG4gICAgICApO1xuICAgIH1cbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBTZWxsIG9yIGNsb3NlIGEgcG9zaXRpb24gKGZ1bGwgb3IgcGFydGlhbClcbiAgICogQHBhcmFtIHBhcmFtcyBQb3NpdGlvbiBzZWxsaW5nIHBhcmFtZXRlcnNcbiAgICogQHJldHVybnMgUmVzdWx0IG9mIHRoZSBwb3NpdGlvbiBzYWxlXG4gICAqL1xuICBhc3luYyBzZWxsUG9zaXRpb24ocGFyYW1zOiB7XG4gICAgcG9zaXRpb25JZDogc3RyaW5nO1xuICAgIHRva2VuOiBzdHJpbmc7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgdHlwZTogJ3Nwb3QnIHwgJ2xldmVyYWdlJztcbiAgICBwZXJjZW50YWdlPzogbnVtYmVyOyAvLyBPcHRpb25hbDogcGVyY2VudGFnZSBvZiBwb3NpdGlvbiB0byBjbG9zZSAoMC0xMDApXG4gIH0pOiBQcm9taXNlPHtzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlPzogc3RyaW5nOyBlcnJvcj86IHN0cmluZ30+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVxdWVzdERhdGEgPSB7Li4ucGFyYW1zfTtcbiAgICAgIFxuICAgICAgLy8gSWYgcGVyY2VudGFnZSBpcyBwcm92aWRlZCwgYWRqdXN0IHRoZSBhbW91bnQgYWNjb3JkaW5nbHlcbiAgICAgIGlmIChwYXJhbXMucGVyY2VudGFnZSAmJiBwYXJhbXMucGVyY2VudGFnZSA+IDAgJiYgcGFyYW1zLnBlcmNlbnRhZ2UgPCAxMDApIHtcbiAgICAgICAgcmVxdWVzdERhdGEuYW1vdW50ID0gKHBhcmFtcy5hbW91bnQgKiBwYXJhbXMucGVyY2VudGFnZSAvIDEwMCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnBvc3QoQVBJX0VORFBPSU5UUy5UUkFESU5HLlNFTExfUE9TSVRJT04sIHJlcXVlc3REYXRhKTtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2xvc2UgcG9zaXRpb246JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBlcnJvci5yZXNwb25zZT8uZGF0YT8uZXJyb3IgfHwgJ0ZhaWxlZCB0byBjbG9zZSBwb3NpdGlvbidcbiAgICAgICk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdXNlcidzIGxldmVyYWdlIHBvc2l0aW9ucyBmcm9tIE1hbmdvIFYzXG4gICAqIEByZXR1cm5zIFVzZXIncyBsZXZlcmFnZSBwb3NpdGlvbnMgd2l0aCBzdWNjZXNzL2Vycm9yIHN0YXR1c1xuICAgKi9cbiAgYXN5bmMgZ2V0VXNlckxldmVyYWdlUG9zaXRpb25zKCk6IFByb21pc2U8VXNlclBvc2l0aW9uc1Jlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLmdldDxVc2VyUG9zaXRpb25zUmVzcG9uc2UgfCBhbnlbXT4oQVBJX0VORFBPSU5UUy5VU0VSLkxFVkVSQUdFX1BPU0lUSU9OUyk7XG4gICAgICBcbiAgICAgIC8vIElmIHJlc3BvbnNlIGFscmVhZHkgaGFzIHRoZSByaWdodCBmb3JtYXQsIHJldHVybiBpdCBkaXJlY3RseVxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgJiYgdHlwZW9mIHJlc3BvbnNlLmRhdGEgPT09ICdvYmplY3QnICYmICdzdWNjZXNzJyBpbiByZXNwb25zZS5kYXRhKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhIGFzIFVzZXJQb3NpdGlvbnNSZXNwb25zZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gT3RoZXJ3aXNlIGZvcm1hdCBhY2NvcmRpbmcgdG8gTWFuZ28gVjMgc3BlY1xuICAgICAgY29uc3QgcG9zaXRpb25zID0gQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSA/IHJlc3BvbnNlLmRhdGEgOiBbXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHBvc2l0aW9ucyxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICB0b3RhbF9wb3NpdGlvbnM6IHBvc2l0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbGV2ZXJhZ2UgcG9zaXRpb25zOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBwb3NpdGlvbnM6IFtdLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBmZXRjaCBsZXZlcmFnZSBwb3NpdGlvbnMnLFxuICAgICAgICAgIGNvZGU6ICdQT1NJVElPTl9GRVRDSF9FUlJPUidcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB1c2VyJ3Mgc3BvdCBwb3NpdGlvbnMgZnJvbSB3YWxsZXQgYmFsYW5jZXNcbiAgICogQHJldHVybnMgVXNlcidzIHNwb3QgcG9zaXRpb25zIHdpdGggc3VjY2Vzcy9lcnJvciBzdGF0dXNcbiAgICovXG4gIGFzeW5jIGdldFVzZXJTcG90UG9zaXRpb25zKCk6IFByb21pc2U8VXNlclBvc2l0aW9uc1Jlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLmdldDxVc2VyUG9zaXRpb25zUmVzcG9uc2UgfCBhbnlbXT4oQVBJX0VORFBPSU5UUy5VU0VSLlNQT1RfUE9TSVRJT05TKTtcbiAgICAgIFxuICAgICAgLy8gSWYgcmVzcG9uc2UgYWxyZWFkeSBoYXMgdGhlIHJpZ2h0IGZvcm1hdCwgcmV0dXJuIGl0IGRpcmVjdGx5XG4gICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiB0eXBlb2YgcmVzcG9uc2UuZGF0YSA9PT0gJ29iamVjdCcgJiYgJ3N1Y2Nlc3MnIGluIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEgYXMgVXNlclBvc2l0aW9uc1Jlc3BvbnNlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBPdGhlcndpc2UgZm9ybWF0IGFjY29yZGluZyB0byBNYW5nbyBWMyBzcGVjXG4gICAgICBjb25zdCBwb3NpdGlvbnMgPSBBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpID8gcmVzcG9uc2UuZGF0YSA6IFtdO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgcG9zaXRpb25zLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHRvdGFsX3Bvc2l0aW9uczogcG9zaXRpb25zLmxlbmd0aCxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzcG90IHBvc2l0aW9uczonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgcG9zaXRpb25zOiBbXSxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gZmV0Y2ggc3BvdCBwb3NpdGlvbnMnLFxuICAgICAgICAgIGNvZGU6ICdQT1NJVElPTl9GRVRDSF9FUlJPUidcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBwb3NpdGlvbiBoaXN0b3J5IGZvciBhIHVzZXIgd2l0aCBwYWdpbmF0aW9uIGFuZCBmaWx0ZXJpbmdcbiAgICogQHBhcmFtIHBhcmFtcyBRdWVyeSBwYXJhbWV0ZXJzIGZvciBmaWx0ZXJpbmcgcG9zaXRpb24gaGlzdG9yeVxuICAgKiBAcmV0dXJucyBQcm9taXNlIHdpdGggcG9zaXRpb24gaGlzdG9yeSBkYXRhXG4gICAqL1xuICBnZXRQb3NpdGlvbkhpc3Rvcnk6IGFzeW5jIChwYXJhbXM/OiB7XG4gICAgbWFya2V0Pzogc3RyaW5nO1xuICAgIHN0YXJ0VGltZT86IHN0cmluZyB8IG51bWJlcjtcbiAgICBlbmRUaW1lPzogc3RyaW5nIHwgbnVtYmVyO1xuICAgIGludGVydmFsPzogc3RyaW5nO1xuICAgIGluY2x1ZGVQbmw/OiBib29sZWFuO1xuICAgIGluY2x1ZGVMaXZlUG5sPzogYm9vbGVhbjtcbiAgICBjdXJzb3I/OiBzdHJpbmc7XG4gICAgbGltaXQ/OiBudW1iZXI7XG4gIH0pOiBQcm9taXNlPFBvc2l0aW9uSGlzdG9yeVJlc3BvbnNlPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEJ1aWxkIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgXG4gICAgICBpZiAocGFyYW1zPy5tYXJrZXQpIHF1ZXJ5UGFyYW1zLmFwcGVuZCgnbWFya2V0JywgcGFyYW1zLm1hcmtldCk7XG4gICAgICBpZiAocGFyYW1zPy5zdGFydFRpbWUpIHF1ZXJ5UGFyYW1zLmFwcGVuZCgnc3RhcnRfdGltZScsIFN0cmluZyhwYXJhbXMuc3RhcnRUaW1lKSk7XG4gICAgICBpZiAocGFyYW1zPy5lbmRUaW1lKSBxdWVyeVBhcmFtcy5hcHBlbmQoJ2VuZF90aW1lJywgU3RyaW5nKHBhcmFtcy5lbmRUaW1lKSk7XG4gICAgICBpZiAocGFyYW1zPy5pbnRlcnZhbCkgcXVlcnlQYXJhbXMuYXBwZW5kKCdpbnRlcnZhbCcsIHBhcmFtcy5pbnRlcnZhbCk7XG4gICAgICBpZiAocGFyYW1zPy5pbmNsdWRlUG5sICE9PSB1bmRlZmluZWQpIHF1ZXJ5UGFyYW1zLmFwcGVuZCgnaW5jbHVkZV9wbmwnLCBTdHJpbmcocGFyYW1zLmluY2x1ZGVQbmwpKTtcbiAgICAgIGlmIChwYXJhbXM/LmluY2x1ZGVMaXZlUG5sKSBxdWVyeVBhcmFtcy5hcHBlbmQoJ2luY2x1ZGVfbGl2ZV9wbmwnLCAndHJ1ZScpO1xuICAgICAgaWYgKHBhcmFtcz8uY3Vyc29yKSBxdWVyeVBhcmFtcy5hcHBlbmQoJ2N1cnNvcicsIHBhcmFtcy5jdXJzb3IpO1xuICAgICAgaWYgKHBhcmFtcz8ubGltaXQpIHF1ZXJ5UGFyYW1zLmFwcGVuZCgnbGltaXQnLCBTdHJpbmcocGFyYW1zLmxpbWl0KSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVBJX0VORFBPSU5UUy5VU0VSLlBPU0lUSU9OX0hJU1RPUll9PyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2dldEF1dGhUb2tlbigpfWBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBlcnJvciByZXNwb25zZXNcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gZGF0YT8uZXJyb3IgfHwge307XG4gICAgICAgIHRocm93IG5ldyBBcGlFcnJvcihcbiAgICAgICAgICBlcnJvckRhdGEubWVzc2FnZSB8fCBgSFRUUCBlcnJvciEgc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gLFxuICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb2RlOiBlcnJvckRhdGEuY29kZSB8fCAnYXBpX2Vycm9yJyxcbiAgICAgICAgICAgIHN0YXR1czogZXJyb3JEYXRhLnN0YXR1cyB8fCByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IGVycm9yRGF0YS50aW1lc3RhbXAgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgLi4uKGVycm9yRGF0YS5kZXRhaWxzICYmIHsgZGV0YWlsczogZXJyb3JEYXRhLmRldGFpbHMgfSlcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRyYW5zZm9ybSB0aGUgc3VjY2Vzc2Z1bCByZXNwb25zZSB0byBtYXRjaCB0aGUgUG9zaXRpb25IaXN0b3J5UmVzcG9uc2UgdHlwZVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZGF0YS5zdWNjZXNzLFxuICAgICAgICBwb3NpdGlvbl9oaXN0b3J5OiBkYXRhLnBvc2l0aW9uX2hpc3RvcnkgfHwgW10sXG4gICAgICAgIHBubF9vdmVyX3RpbWU6IGRhdGEucG5sX292ZXJfdGltZSB8fCBbXSxcbiAgICAgICAgcGFnaW5hdGlvbjogZGF0YS5wYWdpbmF0aW9uIHx8IHtcbiAgICAgICAgICBoYXNfbW9yZTogZGF0YS5tZXRhZGF0YT8uaGFzX21vcmUgfHwgZmFsc2UsXG4gICAgICAgICAgbmV4dF9jdXJzb3I6IGRhdGEubWV0YWRhdGE/LmN1cnNvcixcbiAgICAgICAgICBsaW1pdDogcGFyYW1zPy5saW1pdCB8fCAxMDAsXG4gICAgICAgICAgdG90YWw6IGRhdGEubWV0YWRhdGE/LnRvdGFsIHx8IDBcbiAgICAgICAgfSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICB1c2VyX2lkZW50aWZpZXI6IGRhdGEubWV0YWRhdGE/LnVzZXJfaWRlbnRpZmllciB8fCAnJyxcbiAgICAgICAgICBtYXJrZXQ6IHBhcmFtcz8ubWFya2V0IHx8ICdhbGwnLFxuICAgICAgICAgIHN0YXJ0X3RpbWU6IGRhdGEubWV0YWRhdGE/LnN0YXJ0X3RpbWUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIGVuZF90aW1lOiBkYXRhLm1ldGFkYXRhPy5lbmRfdGltZSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgaW50ZXJ2YWw6IHBhcmFtcz8uaW50ZXJ2YWwgfHwgJzFkJyxcbiAgICAgICAgICB0b3RhbF9wb3NpdGlvbnM6IGRhdGEubWV0YWRhdGE/LnRvdGFsIHx8IDAsXG4gICAgICAgICAgaGFzX21vcmU6IGRhdGEubWV0YWRhdGE/Lmhhc19tb3JlIHx8IGZhbHNlLFxuICAgICAgICAgIGN1cnNvcjogZGF0YS5tZXRhZGF0YT8uY3Vyc29yXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBvc2l0aW9uIGhpc3Rvcnk6JywgZXJyb3IpO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgQXBpRXJyb3IgaW5zdGFuY2VzXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBBcGlFcnJvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIHBvc2l0aW9uX2hpc3Rvcnk6IFtdLFxuICAgICAgICAgIHBubF9vdmVyX3RpbWU6IFtdLFxuICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgIGhhc19tb3JlOiBmYWxzZSxcbiAgICAgICAgICAgIG5leHRfY3Vyc29yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBsaW1pdDogcGFyYW1zPy5saW1pdCB8fCAxMDAsXG4gICAgICAgICAgICB0b3RhbDogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIHVzZXJfaWRlbnRpZmllcjogJycsXG4gICAgICAgICAgICBtYXJrZXQ6IHBhcmFtcz8ubWFya2V0IHx8ICdhbGwnLFxuICAgICAgICAgICAgc3RhcnRfdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgZW5kX3RpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGludGVydmFsOiBwYXJhbXM/LmludGVydmFsIHx8ICcxZCcsXG4gICAgICAgICAgICB0b3RhbF9wb3NpdGlvbnM6IDAsXG4gICAgICAgICAgICBoYXNfbW9yZTogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIGVycm9yX2RldGFpbHM6IGVycm9yLmRhdGFcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIG90aGVyIHR5cGVzIG9mIGVycm9yc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIHBvc2l0aW9uX2hpc3Rvcnk6IFtdLFxuICAgICAgICBwbmxfb3Zlcl90aW1lOiBbXSxcbiAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgIGhhc19tb3JlOiBmYWxzZSxcbiAgICAgICAgICBuZXh0X2N1cnNvcjogdW5kZWZpbmVkLFxuICAgICAgICAgIGxpbWl0OiBwYXJhbXM/LmxpbWl0IHx8IDEwMCxcbiAgICAgICAgICB0b3RhbDogMFxuICAgICAgICB9LFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIHVzZXJfaWRlbnRpZmllcjogJycsXG4gICAgICAgICAgbWFya2V0OiBwYXJhbXM/Lm1hcmtldCB8fCAnYWxsJyxcbiAgICAgICAgICBzdGFydF90aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgZW5kX3RpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBpbnRlcnZhbDogcGFyYW1zPy5pbnRlcnZhbCB8fCAnMWQnLFxuICAgICAgICAgIHRvdGFsX3Bvc2l0aW9uczogMCxcbiAgICAgICAgICBoYXNfbW9yZTogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICBlcnJvcl9kZXRhaWxzOiB7XG4gICAgICAgICAgY29kZTogJ3VuZXhwZWN0ZWRfZXJyb3InLFxuICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgZGV0YWlsZWQgcG9zaXRpb24gaGlzdG9yeSBmb3IgYSBzcGVjaWZpYyBwb3NpdGlvblxuICAgKiBAcGFyYW0gcG9zaXRpb25JZCBJRCBvZiB0aGUgcG9zaXRpb24gdG8gZ2V0IGhpc3RvcnkgZm9yXG4gICAqIEBwYXJhbSBwYXJhbXMgQWRkaXRpb25hbCBxdWVyeSBwYXJhbWV0ZXJzXG4gICAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCBkZXRhaWxlZCBwb3NpdGlvbiBoaXN0b3J5XG4gICAqL1xuICBnZXRQb3NpdGlvbkRldGFpbHM6IGFzeW5jIChcbiAgICBwb3NpdGlvbklkOiBzdHJpbmcsXG4gICAgcGFyYW1zPzoge1xuICAgICAgc3RhcnRUaW1lPzogc3RyaW5nIHwgbnVtYmVyO1xuICAgICAgZW5kVGltZT86IHN0cmluZyB8IG51bWJlcjtcbiAgICAgIGludGVydmFsPzogc3RyaW5nO1xuICAgIH1cbiAgKTogUHJvbWlzZTxQb3NpdGlvbkhpc3RvcnlFbnRyeT4gPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDb252ZXJ0IHBhcmFtcyB0byBxdWVyeSBzdHJpbmdcbiAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7IHBvc2l0aW9uSWQgfSk7XG4gICAgICBpZiAocGFyYW1zPy5zdGFydFRpbWUpIHF1ZXJ5UGFyYW1zLmFwcGVuZCgnc3RhcnRUaW1lJywgU3RyaW5nKHBhcmFtcy5zdGFydFRpbWUpKTtcbiAgICAgIGlmIChwYXJhbXM/LmVuZFRpbWUpIHF1ZXJ5UGFyYW1zLmFwcGVuZCgnZW5kVGltZScsIFN0cmluZyhwYXJhbXMuZW5kVGltZSkpO1xuICAgICAgaWYgKHBhcmFtcz8uaW50ZXJ2YWwpIHF1ZXJ5UGFyYW1zLmFwcGVuZCgnaW50ZXJ2YWwnLCBwYXJhbXMuaW50ZXJ2YWwpO1xuXG4gICAgICBjb25zdCBlbmRwb2ludCA9IGAke0FQSV9FTkRQT0lOVFMuVVNFUi5QT1NJVElPTl9ISVNUT1JZfS9kZXRhaWxzPyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gO1xuICAgICAgLy8gQ3JlYXRlIGhlYWRlcnMgb2JqZWN0IHdpdGggcHJvcGVyIHR5cGluZ1xuICAgICAgY29uc3QgYXV0aEhlYWRlcnMgPSBhZGRBdXRoSGVhZGVycygpO1xuICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgICBoZWFkZXJzLmFwcGVuZCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIGF1dGggaGVhZGVycyBpZiB0aGV5IGV4aXN0XG4gICAgICBpZiAoYXV0aEhlYWRlcnMpIHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoYXV0aEhlYWRlcnMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICAgIGlmICh2YWx1ZSkgaGVhZGVycy5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZXQ8eyBzdWNjZXNzOiBib29sZWFuOyBkYXRhOiBQb3NpdGlvbkhpc3RvcnlFbnRyeSB9PihlbmRwb2ludCwgeyBoZWFkZXJzIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLmVycm9yIHx8ICdGYWlsZWQgdG8gZmV0Y2ggcG9zaXRpb24gZGV0YWlscycpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gKHJlc3BvbnNlLmRhdGEgYXMgYW55KS5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwb3NpdGlvbiBkZXRhaWxzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgYXBpO1xuIl0sIm5hbWVzIjpbIkFQSV9CQVNFX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwicmVzb2x2ZUJhc2VVcmwiLCJlbnZVcmwiLCJ0cmltIiwiZW5kc1dpdGgiLCJzbGljZSIsIkFVVEhfVE9LRU5fS0VZIiwiQUxUX1RPS0VOX0tFWSIsImdldEF1dGhUb2tlbiIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsImxvY2FsU3RvcmFnZSIsInNhdmVBdXRoVG9rZW4iLCJ0b2tlbiIsInNldEl0ZW0iLCJyZW1vdmVBdXRoVG9rZW4iLCJyZW1vdmVJdGVtIiwiYWRkQXV0aEhlYWRlcnMiLCJvcHRpb25zIiwiaGVhZGVycyIsIkFwaUVycm9yIiwiRXJyb3IiLCJzdGF0dXNDb2RlIiwiZGF0YSIsIm1lc3NhZ2UiLCJuYW1lIiwiZ2V0QmFzZVVybCIsImJhc2UiLCJBUElfRU5EUE9JTlRTIiwiQVVUSCIsIkxPR0lOIiwiUkVHSVNURVIiLCJWRVJJRllfVE9LRU4iLCJMT0dPVVQiLCJSRUZSRVNIX1RPS0VOIiwiRk9SR09UX1BBU1NXT1JEIiwiUkVTRVRfUEFTU1dPUkQiLCJVU0VSIiwiUFJPRklMRSIsIkxFVkVSQUdFX1BPU0lUSU9OUyIsIlNQT1RfUE9TSVRJT05TIiwiUE9TSVRJT05fSElTVE9SWSIsIlRSQURFX0hJU1RPUlkiLCJMSU1JVF9PUkRFUlMiLCJXQUxMRVQiLCJEQVRBIiwiSU5GTyIsIk1BTkdPX0JBTEFOQ0UiLCJHRU5FUkFURSIsIlNFTkQiLCJDT05ORUNUX1BIQU5UT00iLCJDT01QTEVURV9QSEFOVE9NIiwiRElTQ09OTkVDVF9QSEFOVE9NIiwiQkFMQU5DRSIsIlRSQU5TQUNUSU9OUyIsIkNIQVQiLCJTRVNTSU9OUyIsIk5FV19TRVNTSU9OIiwiSElTVE9SWSIsInNlc3Npb25JZCIsIk1FU1NBR0UiLCJTT0NJQUwiLCJTRU5USU1FTlQiLCJUUkVORElORyIsIklORkxVRU5USUFMIiwiVFdFRVRTIiwiTUFOR08iLCJCQVNFIiwiT0hMQ1YiLCJNQVJLRVRTIiwiT1JERVJfQk9PSyIsIlRSQURFUyIsIk1BUktFVF9TVEFUUyIsIkNPTU1VTklUSUVTIiwiRU5USVRJRVMiLCJGRUVEIiwiQ09OTkVDVElPTlMiLCJUUkFESU5HIiwiRVhFQ1VURSIsIkNPTkZJUk0iLCJTTUFSVF9TRVRUSU5HUyIsIlRPS0VOUyIsIlBSSUNFX0NIQVJUIiwiU1dBUCIsIlNFTExfUE9TSVRJT04iLCJVU0VSX1BPU0lUSU9OUyIsIlNFVFRJTkdTIiwiTk9USUZJQ0FUSU9OUyIsIlRSQURJTkdfU0VUVElOR1MiLCJub3JtYWxpemVSZXNwb25zZSIsInJlc3BvbnNlRGF0YSIsInJlc3QiLCJzdWNjZXNzIiwicmVzdWx0cyIsInVuZGVmaW5lZCIsInByb2Nlc3NSZXNwb25zZSIsInJlc3BvbnNlIiwicmVzcG9uc2VDbG9uZSIsImNsb25lIiwiYm9keVRleHQiLCJ0ZXh0IiwiSlNPTiIsInBhcnNlIiwiZSIsIm9rIiwiZXJyb3IiLCJzdGF0dXMiLCJyYXdSZXNwb25zZSIsImNvbnNvbGUiLCJhcGlSZXF1ZXN0IiwiZW5kcG9pbnQiLCJiYXNlVXJsIiwidXJsIiwic3RhcnRzV2l0aCIsImxvZyIsInJlcXVlc3RPcHRpb25zIiwiY3JlZGVudGlhbHMiLCJmZXRjaCIsInN0YXR1c1RleHQiLCJhcGkiLCJnZXQiLCJtZXRob2QiLCJwb3N0IiwiYm9keSIsInN0cmluZ2lmeSIsInB1dCIsImRlbGV0ZSIsIkNoYXRBcGkiLCJnZXRTZXNzaW9ucyIsImxpbWl0Iiwib2Zmc2V0IiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiYXBwZW5kIiwidG9TdHJpbmciLCJxdWVyeSIsInNlc3Npb25zIiwidG90YWwiLCJoYXNfbW9yZSIsImVycm9yTWVzc2FnZSIsInVzaW5nRmFsbGJhY2siLCJ1c2luZ19mYWxsYmFjayIsImNyZWF0ZVNlc3Npb24iLCJ0aXRsZSIsInNlc3Npb25faWQiLCJnZXRIaXN0b3J5IiwibWVzc2FnZXMiLCJzZW5kTWVzc2FnZSIsIm1ldGFkYXRhIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWVzc2FnZV9pZCIsIm5vdyIsIlRyYWRpbmdBcGkiLCJleGVjdXRlVHJhZGUiLCJhbW91bnQiLCJjb25maXJtVHJhZGUiLCJjb25maXJtYXRpb25JZCIsImNvbmZpcm1hdGlvbl9pZCIsImNsb3NlUG9zaXRpb24iLCJzZWxsVG9rZW4iLCJzZWxsUG9zaXRpb24iLCJyZXF1ZXN0RGF0YSIsInBlcmNlbnRhZ2UiLCJnZXRVc2VyTGV2ZXJhZ2VQb3NpdGlvbnMiLCJwb3NpdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJ0b3RhbF9wb3NpdGlvbnMiLCJsZW5ndGgiLCJjb2RlIiwiZ2V0VXNlclNwb3RQb3NpdGlvbnMiLCJnZXRQb3NpdGlvbkhpc3RvcnkiLCJxdWVyeVBhcmFtcyIsIm1hcmtldCIsInN0YXJ0VGltZSIsIlN0cmluZyIsImVuZFRpbWUiLCJpbnRlcnZhbCIsImluY2x1ZGVQbmwiLCJpbmNsdWRlTGl2ZVBubCIsImN1cnNvciIsImpzb24iLCJlcnJvckRhdGEiLCJkZXRhaWxzIiwicG9zaXRpb25faGlzdG9yeSIsInBubF9vdmVyX3RpbWUiLCJwYWdpbmF0aW9uIiwibmV4dF9jdXJzb3IiLCJ1c2VyX2lkZW50aWZpZXIiLCJzdGFydF90aW1lIiwiZW5kX3RpbWUiLCJlcnJvcl9kZXRhaWxzIiwiZ2V0UG9zaXRpb25EZXRhaWxzIiwicG9zaXRpb25JZCIsImF1dGhIZWFkZXJzIiwiSGVhZGVycyIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./api/apiClient.ts\n");

/***/ }),

/***/ "./components/AuthContext.tsx":
/*!************************************!*\
  !*** ./components/AuthContext.tsx ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthProvider: () => (/* binding */ AuthProvider),\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _api_apiClient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/apiClient */ \"./api/apiClient.ts\");\n/* harmony import */ var _utils_devAuth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/devAuth */ \"./utils/devAuth.ts\");\n/* harmony import */ var _utils_authUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/authUtils */ \"./utils/authUtils.ts\");\n// src/ui/components/AuthContext.tsx\n\n\n\n\n// Import admin backdoor utilities\n\n// Import standardized auth utils\n\nconst TOKEN_EXPIRY_KEY = 'grace_token_expiry';\nconst REFRESH_TOKEN_KEY = 'grace_refresh_token';\nconst TOKEN_VERIFY_INTERVAL = 60000; // Check token validity every 60 seconds\n// Improved session persistence utility to avoid conflicts with form state\nconst SessionPersistence = {\n    STORAGE_KEY: 'GRACE_SESSION_SNAPSHOT',\n    // Safely capture session snapshot with minimal data to avoid interference\n    captureSnapshot (user, token) {\n        try {\n            if (!user || !token) {\n                this.clearSnapshot();\n                return;\n            }\n            // Store only essential user identification data\n            // Avoid storing complete state that might conflict with forms\n            const snapshot = {\n                timestamp: Date.now(),\n                user: {\n                    id: user.id,\n                    username: user.username,\n                    email: user.email\n                },\n                // Don't store the actual token, just indicate authentication\n                authenticated: true\n            };\n            // Use sessionStorage instead of localStorage to avoid persisting between browser sessions\n            // This helps prevent stale data from affecting forms on future visits\n            sessionStorage.setItem(this.STORAGE_KEY, JSON.stringify(snapshot));\n        } catch (error) {\n            console.warn('Failed to capture session snapshot', error);\n        // Silently fail - don't let snapshot errors affect the application\n        }\n    },\n    // Retrieve session snapshot with validation\n    retrieveSnapshot () {\n        try {\n            const snapshotStr = sessionStorage.getItem(this.STORAGE_KEY);\n            if (!snapshotStr) return {\n                user: null,\n                token: null\n            };\n            const snapshot = JSON.parse(snapshotStr);\n            // Validate snapshot with expiration check (30 minutes)\n            const MAX_AGE = 30 * 60 * 1000; // 30 minutes in milliseconds\n            const isExpired = Date.now() - (snapshot.timestamp || 0) > MAX_AGE;\n            if (snapshot && snapshot.user && !isExpired) {\n                return {\n                    user: snapshot.user,\n                    // Get actual token from authUtils to ensure consistency\n                    token: (0,_utils_authUtils__WEBPACK_IMPORTED_MODULE_4__.getAuthToken)()\n                };\n            }\n            // Clear expired snapshot\n            if (isExpired) this.clearSnapshot();\n            return {\n                user: null,\n                token: null\n            };\n        } catch (error) {\n            console.warn('Failed to retrieve session snapshot', error);\n            this.clearSnapshot(); // Clear invalid snapshot\n            return {\n                user: null,\n                token: null\n            };\n        }\n    },\n    // Clear session snapshot\n    clearSnapshot () {\n        try {\n            sessionStorage.removeItem(this.STORAGE_KEY);\n        } catch (error) {\n            console.warn('Failed to clear session snapshot', error);\n        }\n    }\n};\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\nfunction AuthProvider({ children }) {\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [isAuthenticated, setIsAuthenticated] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Use state for token to ensure it's updated when changed\n    const [token, setToken] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)((0,_utils_authUtils__WEBPACK_IMPORTED_MODULE_4__.getAuthToken)());\n    // Add flag to prevent verification immediately after login\n    const [skipNextVerification, setSkipNextVerification] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Update token state whenever auth state changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthProvider.useEffect\": ()=>{\n            setToken((0,_utils_authUtils__WEBPACK_IMPORTED_MODULE_4__.getAuthToken)());\n        }\n    }[\"AuthProvider.useEffect\"], [\n        isAuthenticated\n    ]);\n    // Admin backdoor for quick access\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthProvider.useEffect\": ()=>{\n            // Check if we should use the admin backdoor\n            if ((0,_utils_devAuth__WEBPACK_IMPORTED_MODULE_3__.hasAdminBypass)() && !isAuthenticated && !token) {\n                (0,_utils_devAuth__WEBPACK_IMPORTED_MODULE_3__.bypassLogin)(login);\n            }\n        }\n    }[\"AuthProvider.useEffect\"], []);\n    // Verify auth tokens on mount and set interval\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthProvider.useEffect\": ()=>{\n            let isMounted = true;\n            const verifyOnMount = {\n                \"AuthProvider.useEffect.verifyOnMount\": async ()=>{\n                    // Skip initial verification if there's no token\n                    if (false) {}\n                    console.log('AuthContext: Verifying token on mount');\n                    // Verify token on component mount\n                    await verifyToken();\n                    // Handle case where verification completed but component was unmounted\n                    if (isMounted) setLoading(false);\n                }\n            }[\"AuthProvider.useEffect.verifyOnMount\"];\n            verifyOnMount();\n            // Set up periodic token verification\n            const interval = setInterval({\n                \"AuthProvider.useEffect.interval\": ()=>{\n                    if (!skipNextVerification) {\n                        verifyToken();\n                    } else {\n                        // Reset skip flag after using it once\n                        setSkipNextVerification(false);\n                    }\n                }\n            }[\"AuthProvider.useEffect.interval\"], TOKEN_VERIFY_INTERVAL);\n            return ({\n                \"AuthProvider.useEffect\": ()=>{\n                    isMounted = false;\n                    clearInterval(interval);\n                }\n            })[\"AuthProvider.useEffect\"];\n        }\n    }[\"AuthProvider.useEffect\"], []);\n    // Verify user token with backend\n    const verifyToken = async ()=>{\n        // If no token exists, there's nothing to verify\n        const token = (0,_utils_authUtils__WEBPACK_IMPORTED_MODULE_4__.getAuthToken)();\n        if (!token) {\n            console.log('AuthContext: No token to verify');\n            setIsAuthenticated(false);\n            setUser(null);\n            setLoading(false);\n            return false;\n        }\n        try {\n            console.log('AuthContext: Verifying token with backend');\n            setLoading(true);\n            const response = await _api_apiClient__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(_api_apiClient__WEBPACK_IMPORTED_MODULE_2__.API_ENDPOINTS.AUTH.VERIFY_TOKEN);\n            if (response.success && response.data) {\n                // Token is valid, update user data\n                console.log('AuthContext: Token verified successfully');\n                setIsAuthenticated(true);\n                setUser(response.data.user || {});\n                setToken(token); // Ensure token state matches storage\n                return true;\n            }\n            // Non-success HTTP response\n            const status = response.statusCode ?? 0;\n            if (status === 401 || status === 403) {\n                console.log('AuthContext: Token verification failed with unauthorized status:', status);\n                clearAuthState();\n                return false;\n            }\n            // For other errors (5xx, 0, etc.), keep current auth state to avoid flicker\n            console.warn('AuthContext: Verification non-success but not unauthorized. Preserving auth state.', {\n                status,\n                error: response.error\n            });\n            return false;\n        } catch (error) {\n            // Network or unexpected error: preserve current auth state\n            const msg = error instanceof Error ? error.message : 'Unknown error';\n            console.error('Token verification error, preserving auth state:', msg);\n            return false;\n        } finally{\n            setLoading(false);\n        }\n    };\n    // Enhanced logging utility for authentication events\n    const logAuthEvent = (eventType, details = {})=>{\n        const timestamp = new Date().toISOString();\n        const logEntry = {\n            timestamp,\n            eventType,\n            ...details\n        };\n        // Optional: Send to backend logging service or store locally\n        console.log(JSON.stringify(logEntry));\n        // Store in local storage for potential debugging\n        try {\n            const authLogs = JSON.parse(localStorage.getItem('auth_logs') || '[]');\n            authLogs.push(logEntry);\n            // Keep only last 50 log entries\n            localStorage.setItem('auth_logs', JSON.stringify(authLogs.slice(-50)));\n        } catch (e) {\n            console.error('Failed to log authentication event', e);\n        }\n    };\n    // Check if user has a wallet and generate one if not available\n    const checkAndGenerateWallet = async ()=>{\n        try {\n            // Skip if not authenticated\n            if (!isAuthenticated || !token) {\n                return;\n            }\n            // First check if wallet already exists\n            const walletResponse = await _api_apiClient__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(_api_apiClient__WEBPACK_IMPORTED_MODULE_2__.API_ENDPOINTS.WALLET.INFO, {});\n            // If no wallet or wallet address is empty, generate a new one\n            if (!walletResponse.success || !walletResponse.data?.wallet?.wallet_address) {\n                console.log('No wallet found for user, generating a new internal wallet...');\n                // Generate a new wallet\n                const generateResponse = await _api_apiClient__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(_api_apiClient__WEBPACK_IMPORTED_MODULE_2__.API_ENDPOINTS.WALLET.GENERATE, {});\n                if (generateResponse.success) {\n                    console.log('Wallet generated successfully:', generateResponse.data?.wallet?.wallet_address);\n                    // You could set wallet info in state here if needed\n                    return generateResponse.data?.wallet;\n                } else {\n                    console.error('Failed to generate wallet:', generateResponse.error);\n                }\n            } else {\n                console.log('User wallet already exists:', walletResponse.data?.wallet?.wallet_address);\n                return walletResponse.data?.wallet;\n            }\n        } catch (error) {\n            console.error('Error checking/generating wallet:', error instanceof Error ? error.message : 'Unknown error');\n        }\n    };\n    // Implement token refresh functionality with exponential backoff\n    const refreshToken = async (retryCount = 0)=>{\n        const MAX_RETRIES = 3;\n        const BASE_DELAY = 1000; // 1 second initial delay\n        try {\n            logAuthEvent('TOKEN_REFRESH_ATTEMPT', {\n                retryCount\n            });\n            // Exponential backoff with jitter\n            if (retryCount > 0) {\n                const delay = BASE_DELAY * Math.pow(2, retryCount) * (1 + Math.random());\n                await new Promise((resolve)=>setTimeout(resolve, delay));\n            }\n            // Use the dedicated refresh token endpoint\n            const response = await _api_apiClient__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(_api_apiClient__WEBPACK_IMPORTED_MODULE_2__.API_ENDPOINTS.AUTH.REFRESH_TOKEN, {});\n            if (!response.success || !response.data?.token) {\n                throw new Error('Token refresh failed: Invalid response');\n            }\n            const { token, username } = response.data;\n            // Determine storage type based on where the current token is stored\n            const inLocalStorage = localStorage.getItem(_utils_authUtils__WEBPACK_IMPORTED_MODULE_4__.TOKEN_KEY) !== null;\n            const rememberMe = inLocalStorage; // If in localStorage, user wanted persistent login\n            // Store the new token with the same preference\n            await (0,_utils_authUtils__WEBPACK_IMPORTED_MODULE_4__.storeAuthToken)(token, rememberMe);\n            // Update local token state\n            setToken(token);\n            setIsAuthenticated(true);\n            // Optional: Update username if provided\n            if (username) {\n                setUser((prevUser)=>({\n                        ...prevUser,\n                        username\n                    }));\n            }\n            logAuthEvent('TOKEN_REFRESH_SUCCESS', {\n                username\n            });\n            return true;\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : 'Unknown refresh error';\n            logAuthEvent('TOKEN_REFRESH_FAILURE', {\n                errorMessage,\n                retryCount,\n                errorStack: error instanceof Error ? error.stack : undefined\n            });\n            // Implement retry mechanism\n            if (retryCount < MAX_RETRIES) {\n                console.warn(`Token refresh attempt ${retryCount + 1} failed. Retrying...`);\n                return refreshToken(retryCount + 1);\n            }\n            // Final fallback: logout after max retries\n            console.error('Token refresh failed after maximum retries');\n            logout();\n            return false;\n        }\n    };\n    // Login with credentials\n    const login = async (data)=>{\n        try {\n            console.log('AuthContext: login function called with data:', data);\n            // Some API clients save the token directly to storage and strip it from payload\n            // Fall back to reading from storage if not present on the response object\n            if (!data.token) {\n                const storedToken = (0,_utils_authUtils__WEBPACK_IMPORTED_MODULE_4__.getAuthToken)();\n                console.log('AuthContext: token missing in payload, using stored token:', !!storedToken);\n                if (storedToken) {\n                    data.token = storedToken;\n                } else {\n                    throw new Error('No token found in login data or storage');\n                }\n            }\n            console.log('AuthContext: Processing login with token');\n            // Store token with remember me preference if provided\n            const rememberMe = data.remember_me !== undefined ? data.remember_me : true; // Default to true for persistent login\n            // Store token and wait for it to complete\n            await (0,_utils_authUtils__WEBPACK_IMPORTED_MODULE_4__.storeAuthToken)(data.token, rememberMe);\n            console.log('AuthContext: Token stored successfully');\n            // Update application state\n            setToken(data.token); // Ensure token state is synchronized\n            setUser(data.user || {});\n            setIsAuthenticated(true);\n            setLoading(false); // Ensure loading state is turned off\n            console.log('AuthContext: State updated - isAuthenticated: true, user:', data.user);\n            // Capture minimal session data after successful login\n            if (data.user) {\n                SessionPersistence.captureSnapshot(data.user, data.token);\n            }\n            // Set flag to skip next verification cycle to avoid race condition\n            setSkipNextVerification(true);\n            // Log successful login state update\n            console.log('AuthContext: Login complete, auth state updated');\n            // Automatically check for wallet and generate if needed\n            // This ensures every user has a wallet automatically\n            setTimeout(()=>{\n                checkAndGenerateWallet();\n            }, 500); // Small delay to ensure auth is fully established\n            return true; // Signal successful login\n        } catch (error) {\n            console.error('Login failed:', error instanceof Error ? error.message : 'Unknown error');\n            // Ensure auth state is reset if login fails\n            (0,_utils_authUtils__WEBPACK_IMPORTED_MODULE_4__.clearAuthTokens)();\n            SessionPersistence.clearSnapshot();\n            setToken(null);\n            setUser(null);\n            setIsAuthenticated(false);\n            setLoading(false);\n            return false; // Signal failed login\n        }\n    };\n    // Clear auth state - reusable function for both logout and failed auth\n    const clearAuthState = ()=>{\n        (0,_utils_authUtils__WEBPACK_IMPORTED_MODULE_4__.clearAuthTokens)();\n        setToken(null);\n        setUser(null);\n        setIsAuthenticated(false);\n        SessionPersistence.clearSnapshot();\n    };\n    // Clear auth state\n    const logout = async ()=>{\n        logAuthEvent('logout_initiated');\n        try {\n            // Attempt to call logout endpoint if we have a token\n            if ((0,_utils_authUtils__WEBPACK_IMPORTED_MODULE_4__.getAuthToken)()) {\n                await _api_apiClient__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post(_api_apiClient__WEBPACK_IMPORTED_MODULE_2__.API_ENDPOINTS.AUTH.LOGOUT, {});\n            }\n        } catch (error) {\n            console.error('Error during logout:', error);\n        // Continue with logout regardless of API errors\n        } finally{\n            // Always clear local state and storage\n            clearAuthState();\n            // Log the event\n            logAuthEvent('logout_complete');\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: {\n            user,\n            login,\n            logout,\n            loading,\n            refreshToken,\n            isAuthenticated\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/AuthContext.tsx\",\n        lineNumber: 447,\n        columnNumber: 5\n    }, this);\n}\nconst useAuth = ()=>{\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\n    if (!context) {\n        throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LHlEQUFhQSxDQUFDNEQsSUFBSSxDQUFDbUQsTUFBTSxFQUFFLENBQUM7WUFDN0M7UUFDRixFQUFFLE9BQU9sRixPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDLGdEQUFnRDtRQUNsRCxTQUFVO1lBQ1IsdUNBQXVDO1lBQ3ZDcUM7WUFFQSxnQkFBZ0I7WUFDaEJJLGFBQWE7UUFDZjtJQUNGO0lBRUEscUJBQ0UsOERBQUMvQixZQUFZeUUsUUFBUTtRQUFDQyxPQUFPO1lBQzNCbkc7WUFDQW9DO1lBQ0EwRDtZQUNBakU7WUFDQThDO1lBQ0E1QztRQUNGO2tCQUNHSjs7Ozs7O0FBR1A7QUFFTyxNQUFNeUUsVUFBVTtJQUNyQixNQUFNQyxVQUFVdEgsaURBQVVBLENBQUMwQztJQUMzQixJQUFJLENBQUM0RSxTQUFTO1FBQ1osTUFBTSxJQUFJL0MsTUFBTTtJQUNsQjtJQUNBLE9BQU8rQztBQUNULEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b25rYXN3b3JsZC9Eb3dubG9hZHMvZ3JhY2UtcHJvamVjdC9zcmMvdWkvY29tcG9uZW50cy9BdXRoQ29udGV4dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3VpL2NvbXBvbmVudHMvQXV0aENvbnRleHQudHN4XG5cbmltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQVBJX0VORFBPSU5UUyB9IGZyb20gJy4uL2FwaS9hcGlDbGllbnQnO1xuaW1wb3J0IGFwaSBmcm9tICcuLi9hcGkvYXBpQ2xpZW50Jztcbi8vIEltcG9ydCBhZG1pbiBiYWNrZG9vciB1dGlsaXRpZXNcbmltcG9ydCB7IGhhc0FkbWluQnlwYXNzLCBieXBhc3NMb2dpbiB9IGZyb20gJy4uL3V0aWxzL2RldkF1dGgnO1xuLy8gSW1wb3J0IHN0YW5kYXJkaXplZCBhdXRoIHV0aWxzXG5pbXBvcnQge1xuICBnZXRBdXRoVG9rZW4sXG4gIGdldFRva2VuRXhwaXJ5LFxuICBzdG9yZUF1dGhUb2tlbixcbiAgY2xlYXJBdXRoVG9rZW5zLFxuICBpc1Rva2VuRXhwaXJlZCxcbiAgYWRkQXV0aEhlYWRlcnMsXG4gIFRPS0VOX0tFWVxufSBmcm9tICcuLi91dGlscy9hdXRoVXRpbHMnO1xuXG5jb25zdCBUT0tFTl9FWFBJUllfS0VZID0gJ2dyYWNlX3Rva2VuX2V4cGlyeSc7XG5jb25zdCBSRUZSRVNIX1RPS0VOX0tFWSA9ICdncmFjZV9yZWZyZXNoX3Rva2VuJztcbmNvbnN0IFRPS0VOX1ZFUklGWV9JTlRFUlZBTCA9IDYwMDAwOyAvLyBDaGVjayB0b2tlbiB2YWxpZGl0eSBldmVyeSA2MCBzZWNvbmRzXG5cbi8vIEltcHJvdmVkIHNlc3Npb24gcGVyc2lzdGVuY2UgdXRpbGl0eSB0byBhdm9pZCBjb25mbGljdHMgd2l0aCBmb3JtIHN0YXRlXG5jb25zdCBTZXNzaW9uUGVyc2lzdGVuY2UgPSB7XG4gIFNUT1JBR0VfS0VZOiAnR1JBQ0VfU0VTU0lPTl9TTkFQU0hPVCcsXG4gIFxuICAvLyBTYWZlbHkgY2FwdHVyZSBzZXNzaW9uIHNuYXBzaG90IHdpdGggbWluaW1hbCBkYXRhIHRvIGF2b2lkIGludGVyZmVyZW5jZVxuICBjYXB0dXJlU25hcHNob3QodXNlcjogVXNlciB8IG51bGwsIHRva2VuOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdXNlciB8fCAhdG9rZW4pIHtcbiAgICAgICAgdGhpcy5jbGVhclNuYXBzaG90KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gU3RvcmUgb25seSBlc3NlbnRpYWwgdXNlciBpZGVudGlmaWNhdGlvbiBkYXRhXG4gICAgICAvLyBBdm9pZCBzdG9yaW5nIGNvbXBsZXRlIHN0YXRlIHRoYXQgbWlnaHQgY29uZmxpY3Qgd2l0aCBmb3Jtc1xuICAgICAgY29uc3Qgc25hcHNob3QgPSB7XG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsXG4gICAgICAgIH0sXG4gICAgICAgIC8vIERvbid0IHN0b3JlIHRoZSBhY3R1YWwgdG9rZW4sIGp1c3QgaW5kaWNhdGUgYXV0aGVudGljYXRpb25cbiAgICAgICAgYXV0aGVudGljYXRlZDogdHJ1ZVxuICAgICAgfTtcblxuICAgICAgLy8gVXNlIHNlc3Npb25TdG9yYWdlIGluc3RlYWQgb2YgbG9jYWxTdG9yYWdlIHRvIGF2b2lkIHBlcnNpc3RpbmcgYmV0d2VlbiBicm93c2VyIHNlc3Npb25zXG4gICAgICAvLyBUaGlzIGhlbHBzIHByZXZlbnQgc3RhbGUgZGF0YSBmcm9tIGFmZmVjdGluZyBmb3JtcyBvbiBmdXR1cmUgdmlzaXRzXG4gICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHRoaXMuU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KHNuYXBzaG90KSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGNhcHR1cmUgc2Vzc2lvbiBzbmFwc2hvdCcsIGVycm9yKTtcbiAgICAgIC8vIFNpbGVudGx5IGZhaWwgLSBkb24ndCBsZXQgc25hcHNob3QgZXJyb3JzIGFmZmVjdCB0aGUgYXBwbGljYXRpb25cbiAgICB9XG4gIH0sXG5cbiAgLy8gUmV0cmlldmUgc2Vzc2lvbiBzbmFwc2hvdCB3aXRoIHZhbGlkYXRpb25cbiAgcmV0cmlldmVTbmFwc2hvdCgpOiB7IHVzZXI6IFVzZXIgfCBudWxsLCB0b2tlbjogc3RyaW5nIHwgbnVsbCB9IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3RTdHIgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHRoaXMuU1RPUkFHRV9LRVkpO1xuICAgICAgaWYgKCFzbmFwc2hvdFN0cikgcmV0dXJuIHsgdXNlcjogbnVsbCwgdG9rZW46IG51bGwgfTtcblxuICAgICAgY29uc3Qgc25hcHNob3QgPSBKU09OLnBhcnNlKHNuYXBzaG90U3RyKTtcbiAgICAgIFxuICAgICAgLy8gVmFsaWRhdGUgc25hcHNob3Qgd2l0aCBleHBpcmF0aW9uIGNoZWNrICgzMCBtaW51dGVzKVxuICAgICAgY29uc3QgTUFYX0FHRSA9IDMwICogNjAgKiAxMDAwOyAvLyAzMCBtaW51dGVzIGluIG1pbGxpc2Vjb25kc1xuICAgICAgY29uc3QgaXNFeHBpcmVkID0gKERhdGUubm93KCkgLSAoc25hcHNob3QudGltZXN0YW1wIHx8IDApKSA+IE1BWF9BR0U7XG4gICAgICBcbiAgICAgIGlmIChzbmFwc2hvdCAmJiBzbmFwc2hvdC51c2VyICYmICFpc0V4cGlyZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1c2VyOiBzbmFwc2hvdC51c2VyLFxuICAgICAgICAgIC8vIEdldCBhY3R1YWwgdG9rZW4gZnJvbSBhdXRoVXRpbHMgdG8gZW5zdXJlIGNvbnNpc3RlbmN5XG4gICAgICAgICAgdG9rZW46IGdldEF1dGhUb2tlbigpXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIGV4cGlyZWQgc25hcHNob3RcbiAgICAgIGlmIChpc0V4cGlyZWQpIHRoaXMuY2xlYXJTbmFwc2hvdCgpO1xuICAgICAgcmV0dXJuIHsgdXNlcjogbnVsbCwgdG9rZW46IG51bGwgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcmV0cmlldmUgc2Vzc2lvbiBzbmFwc2hvdCcsIGVycm9yKTtcbiAgICAgIHRoaXMuY2xlYXJTbmFwc2hvdCgpOyAvLyBDbGVhciBpbnZhbGlkIHNuYXBzaG90XG4gICAgICByZXR1cm4geyB1c2VyOiBudWxsLCB0b2tlbjogbnVsbCB9O1xuICAgIH1cbiAgfSxcblxuICAvLyBDbGVhciBzZXNzaW9uIHNuYXBzaG90XG4gIGNsZWFyU25hcHNob3QoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5TVE9SQUdFX0tFWSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGNsZWFyIHNlc3Npb24gc25hcHNob3QnLCBlcnJvcik7XG4gICAgfVxuICB9XG59O1xuXG5pbnRlcmZhY2UgVXNlciB7XG4gIGlkPzogc3RyaW5nO1xuICB1c2VybmFtZT86IHN0cmluZztcbiAgZW1haWw/OiBzdHJpbmc7XG4gIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuaW50ZXJmYWNlIEF1dGhDb250ZXh0VHlwZSB7XG4gIHVzZXI6IFVzZXIgfCBudWxsO1xuICBsb2dpbjogKGRhdGE6IGFueSkgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgbG9nb3V0OiAoKSA9PiB2b2lkO1xuICBsb2FkaW5nOiBib29sZWFuO1xuICByZWZyZXNoVG9rZW46ICgpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIGlzQXV0aGVudGljYXRlZDogYm9vbGVhbjtcbn1cblxuY29uc3QgQXV0aENvbnRleHQgPSBjcmVhdGVDb250ZXh0PEF1dGhDb250ZXh0VHlwZSB8IG51bGw+KG51bGwpO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBBdXRoUHJvdmlkZXIoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZTxVc2VyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHRydWUpO1xuICBjb25zdCBbaXNBdXRoZW50aWNhdGVkLCBzZXRJc0F1dGhlbnRpY2F0ZWRdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICAvLyBVc2Ugc3RhdGUgZm9yIHRva2VuIHRvIGVuc3VyZSBpdCdzIHVwZGF0ZWQgd2hlbiBjaGFuZ2VkXG4gIGNvbnN0IFt0b2tlbiwgc2V0VG9rZW5dID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4oZ2V0QXV0aFRva2VuKCkpO1xuICAvLyBBZGQgZmxhZyB0byBwcmV2ZW50IHZlcmlmaWNhdGlvbiBpbW1lZGlhdGVseSBhZnRlciBsb2dpblxuICBjb25zdCBbc2tpcE5leHRWZXJpZmljYXRpb24sIHNldFNraXBOZXh0VmVyaWZpY2F0aW9uXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgXG4gIC8vIFVwZGF0ZSB0b2tlbiBzdGF0ZSB3aGVuZXZlciBhdXRoIHN0YXRlIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRUb2tlbihnZXRBdXRoVG9rZW4oKSk7XG4gIH0sIFtpc0F1dGhlbnRpY2F0ZWRdKTtcbiAgXG4gIC8vIEFkbWluIGJhY2tkb29yIGZvciBxdWljayBhY2Nlc3NcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDaGVjayBpZiB3ZSBzaG91bGQgdXNlIHRoZSBhZG1pbiBiYWNrZG9vclxuICAgIGlmIChoYXNBZG1pbkJ5cGFzcygpICYmICFpc0F1dGhlbnRpY2F0ZWQgJiYgIXRva2VuKSB7XG4gICAgICBieXBhc3NMb2dpbihsb2dpbik7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gVmVyaWZ5IGF1dGggdG9rZW5zIG9uIG1vdW50IGFuZCBzZXQgaW50ZXJ2YWxcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgaXNNb3VudGVkID0gdHJ1ZTtcbiAgICBcbiAgICBjb25zdCB2ZXJpZnlPbk1vdW50ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU2tpcCBpbml0aWFsIHZlcmlmaWNhdGlvbiBpZiB0aGVyZSdzIG5vIHRva2VuXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgIWdldEF1dGhUb2tlbigpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBdXRoQ29udGV4dDogTm8gdG9rZW4gZm91bmQgb24gbW91bnQsIHNraXBwaW5nIHZlcmlmaWNhdGlvbicpO1xuICAgICAgICBpZiAoaXNNb3VudGVkKSBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnQXV0aENvbnRleHQ6IFZlcmlmeWluZyB0b2tlbiBvbiBtb3VudCcpO1xuICAgICAgLy8gVmVyaWZ5IHRva2VuIG9uIGNvbXBvbmVudCBtb3VudFxuICAgICAgYXdhaXQgdmVyaWZ5VG9rZW4oKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgdmVyaWZpY2F0aW9uIGNvbXBsZXRlZCBidXQgY29tcG9uZW50IHdhcyB1bm1vdW50ZWRcbiAgICAgIGlmIChpc01vdW50ZWQpIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH07XG4gICAgXG4gICAgdmVyaWZ5T25Nb3VudCgpO1xuICAgIFxuICAgIC8vIFNldCB1cCBwZXJpb2RpYyB0b2tlbiB2ZXJpZmljYXRpb25cbiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmICghc2tpcE5leHRWZXJpZmljYXRpb24pIHtcbiAgICAgICAgdmVyaWZ5VG9rZW4oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJlc2V0IHNraXAgZmxhZyBhZnRlciB1c2luZyBpdCBvbmNlXG4gICAgICAgIHNldFNraXBOZXh0VmVyaWZpY2F0aW9uKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LCBUT0tFTl9WRVJJRllfSU5URVJWQUwpO1xuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgIH07XG4gIH0sIFtdKTsgICAgIFxuXG4gIC8vIFZlcmlmeSB1c2VyIHRva2VuIHdpdGggYmFja2VuZFxuICBjb25zdCB2ZXJpZnlUb2tlbiA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBJZiBubyB0b2tlbiBleGlzdHMsIHRoZXJlJ3Mgbm90aGluZyB0byB2ZXJpZnlcbiAgICBjb25zdCB0b2tlbiA9IGdldEF1dGhUb2tlbigpO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRoQ29udGV4dDogTm8gdG9rZW4gdG8gdmVyaWZ5Jyk7XG4gICAgICBzZXRJc0F1dGhlbnRpY2F0ZWQoZmFsc2UpO1xuICAgICAgc2V0VXNlcihudWxsKTtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnQXV0aENvbnRleHQ6IFZlcmlmeWluZyB0b2tlbiB3aXRoIGJhY2tlbmQnKTtcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS5nZXQoQVBJX0VORFBPSU5UUy5BVVRILlZFUklGWV9UT0tFTik7XG5cbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgLy8gVG9rZW4gaXMgdmFsaWQsIHVwZGF0ZSB1c2VyIGRhdGFcbiAgICAgICAgY29uc29sZS5sb2coJ0F1dGhDb250ZXh0OiBUb2tlbiB2ZXJpZmllZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgc2V0SXNBdXRoZW50aWNhdGVkKHRydWUpO1xuICAgICAgICBzZXRVc2VyKHJlc3BvbnNlLmRhdGEudXNlciB8fCB7fSk7XG4gICAgICAgIHNldFRva2VuKHRva2VuKTsgLy8gRW5zdXJlIHRva2VuIHN0YXRlIG1hdGNoZXMgc3RvcmFnZVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gTm9uLXN1Y2Nlc3MgSFRUUCByZXNwb25zZVxuICAgICAgY29uc3Qgc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzQ29kZSA/PyAwO1xuICAgICAgaWYgKHN0YXR1cyA9PT0gNDAxIHx8IHN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBdXRoQ29udGV4dDogVG9rZW4gdmVyaWZpY2F0aW9uIGZhaWxlZCB3aXRoIHVuYXV0aG9yaXplZCBzdGF0dXM6Jywgc3RhdHVzKTtcbiAgICAgICAgY2xlYXJBdXRoU3RhdGUoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBGb3Igb3RoZXIgZXJyb3JzICg1eHgsIDAsIGV0Yy4pLCBrZWVwIGN1cnJlbnQgYXV0aCBzdGF0ZSB0byBhdm9pZCBmbGlja2VyXG4gICAgICBjb25zb2xlLndhcm4oJ0F1dGhDb250ZXh0OiBWZXJpZmljYXRpb24gbm9uLXN1Y2Nlc3MgYnV0IG5vdCB1bmF1dGhvcml6ZWQuIFByZXNlcnZpbmcgYXV0aCBzdGF0ZS4nLCB7XG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgZXJyb3I6IHJlc3BvbnNlLmVycm9yXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gTmV0d29yayBvciB1bmV4cGVjdGVkIGVycm9yOiBwcmVzZXJ2ZSBjdXJyZW50IGF1dGggc3RhdGVcbiAgICAgIGNvbnN0IG1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgY29uc29sZS5lcnJvcignVG9rZW4gdmVyaWZpY2F0aW9uIGVycm9yLCBwcmVzZXJ2aW5nIGF1dGggc3RhdGU6JywgbXNnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEVuaGFuY2VkIGxvZ2dpbmcgdXRpbGl0eSBmb3IgYXV0aGVudGljYXRpb24gZXZlbnRzXG4gIGNvbnN0IGxvZ0F1dGhFdmVudCA9IChldmVudFR5cGU6IHN0cmluZywgZGV0YWlsczogYW55ID0ge30pID0+IHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgY29uc3QgbG9nRW50cnkgPSB7XG4gICAgICB0aW1lc3RhbXAsXG4gICAgICBldmVudFR5cGUsXG4gICAgICAuLi5kZXRhaWxzXG4gICAgfTtcbiAgICBcbiAgICAvLyBPcHRpb25hbDogU2VuZCB0byBiYWNrZW5kIGxvZ2dpbmcgc2VydmljZSBvciBzdG9yZSBsb2NhbGx5XG4gICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpKTtcbiAgICBcbiAgICAvLyBTdG9yZSBpbiBsb2NhbCBzdG9yYWdlIGZvciBwb3RlbnRpYWwgZGVidWdnaW5nXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGF1dGhMb2dzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aF9sb2dzJykgfHwgJ1tdJyk7XG4gICAgICBhdXRoTG9ncy5wdXNoKGxvZ0VudHJ5KTtcbiAgICAgIC8vIEtlZXAgb25seSBsYXN0IDUwIGxvZyBlbnRyaWVzXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXV0aF9sb2dzJywgSlNPTi5zdHJpbmdpZnkoYXV0aExvZ3Muc2xpY2UoLTUwKSkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2cgYXV0aGVudGljYXRpb24gZXZlbnQnLCBlKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgYSB3YWxsZXQgYW5kIGdlbmVyYXRlIG9uZSBpZiBub3QgYXZhaWxhYmxlXG4gIGNvbnN0IGNoZWNrQW5kR2VuZXJhdGVXYWxsZXQgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFNraXAgaWYgbm90IGF1dGhlbnRpY2F0ZWRcbiAgICAgIGlmICghaXNBdXRoZW50aWNhdGVkIHx8ICF0b2tlbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHdhbGxldCBhbHJlYWR5IGV4aXN0c1xuICAgICAgY29uc3Qgd2FsbGV0UmVzcG9uc2UgPSBhd2FpdCBhcGkuZ2V0KEFQSV9FTkRQT0lOVFMuV0FMTEVULklORk8sIHt9KTtcbiAgICAgIFxuICAgICAgLy8gSWYgbm8gd2FsbGV0IG9yIHdhbGxldCBhZGRyZXNzIGlzIGVtcHR5LCBnZW5lcmF0ZSBhIG5ldyBvbmVcbiAgICAgIGlmICghd2FsbGV0UmVzcG9uc2Uuc3VjY2VzcyB8fCBcbiAgICAgICAgICAhd2FsbGV0UmVzcG9uc2UuZGF0YT8ud2FsbGV0Py53YWxsZXRfYWRkcmVzcykge1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ05vIHdhbGxldCBmb3VuZCBmb3IgdXNlciwgZ2VuZXJhdGluZyBhIG5ldyBpbnRlcm5hbCB3YWxsZXQuLi4nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IHdhbGxldFxuICAgICAgICBjb25zdCBnZW5lcmF0ZVJlc3BvbnNlID0gYXdhaXQgYXBpLnBvc3QoQVBJX0VORFBPSU5UUy5XQUxMRVQuR0VORVJBVEUsIHt9KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChnZW5lcmF0ZVJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnV2FsbGV0IGdlbmVyYXRlZCBzdWNjZXNzZnVsbHk6JywgXG4gICAgICAgICAgICBnZW5lcmF0ZVJlc3BvbnNlLmRhdGE/LndhbGxldD8ud2FsbGV0X2FkZHJlc3MpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFlvdSBjb3VsZCBzZXQgd2FsbGV0IGluZm8gaW4gc3RhdGUgaGVyZSBpZiBuZWVkZWRcbiAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVSZXNwb25zZS5kYXRhPy53YWxsZXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIHdhbGxldDonLCBnZW5lcmF0ZVJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgd2FsbGV0IGFscmVhZHkgZXhpc3RzOicsIFxuICAgICAgICAgIHdhbGxldFJlc3BvbnNlLmRhdGE/LndhbGxldD8ud2FsbGV0X2FkZHJlc3MpO1xuICAgICAgICByZXR1cm4gd2FsbGV0UmVzcG9uc2UuZGF0YT8ud2FsbGV0O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZy9nZW5lcmF0aW5nIHdhbGxldDonLCBcbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicpO1xuICAgIH1cbiAgfTtcblxuICAvLyBJbXBsZW1lbnQgdG9rZW4gcmVmcmVzaCBmdW5jdGlvbmFsaXR5IHdpdGggZXhwb25lbnRpYWwgYmFja29mZlxuICBjb25zdCByZWZyZXNoVG9rZW4gPSBhc3luYyAocmV0cnlDb3VudCA9IDApOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBjb25zdCBNQVhfUkVUUklFUyA9IDM7XG4gICAgY29uc3QgQkFTRV9ERUxBWSA9IDEwMDA7IC8vIDEgc2Vjb25kIGluaXRpYWwgZGVsYXlcblxuICAgIHRyeSB7XG4gICAgICBsb2dBdXRoRXZlbnQoJ1RPS0VOX1JFRlJFU0hfQVRURU1QVCcsIHsgcmV0cnlDb3VudCB9KTtcblxuICAgICAgLy8gRXhwb25lbnRpYWwgYmFja29mZiB3aXRoIGppdHRlclxuICAgICAgaWYgKHJldHJ5Q291bnQgPiAwKSB7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gQkFTRV9ERUxBWSAqIE1hdGgucG93KDIsIHJldHJ5Q291bnQpICogKDEgKyBNYXRoLnJhbmRvbSgpKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFVzZSB0aGUgZGVkaWNhdGVkIHJlZnJlc2ggdG9rZW4gZW5kcG9pbnRcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpLnBvc3Q8e3Rva2VuOiBzdHJpbmcsIHVzZXJuYW1lPzogc3RyaW5nfT4oQVBJX0VORFBPSU5UUy5BVVRILlJFRlJFU0hfVE9LRU4sIHt9KTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzIHx8ICFyZXNwb25zZS5kYXRhPy50b2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rva2VuIHJlZnJlc2ggZmFpbGVkOiBJbnZhbGlkIHJlc3BvbnNlJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHsgdG9rZW4sIHVzZXJuYW1lIH0gPSByZXNwb25zZS5kYXRhO1xuICAgICAgXG4gICAgICAvLyBEZXRlcm1pbmUgc3RvcmFnZSB0eXBlIGJhc2VkIG9uIHdoZXJlIHRoZSBjdXJyZW50IHRva2VuIGlzIHN0b3JlZFxuICAgICAgY29uc3QgaW5Mb2NhbFN0b3JhZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShUT0tFTl9LRVkpICE9PSBudWxsO1xuICAgICAgY29uc3QgcmVtZW1iZXJNZSA9IGluTG9jYWxTdG9yYWdlOyAvLyBJZiBpbiBsb2NhbFN0b3JhZ2UsIHVzZXIgd2FudGVkIHBlcnNpc3RlbnQgbG9naW5cbiAgICAgIFxuICAgICAgLy8gU3RvcmUgdGhlIG5ldyB0b2tlbiB3aXRoIHRoZSBzYW1lIHByZWZlcmVuY2VcbiAgICAgIGF3YWl0IHN0b3JlQXV0aFRva2VuKHRva2VuLCByZW1lbWJlck1lKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGxvY2FsIHRva2VuIHN0YXRlXG4gICAgICBzZXRUb2tlbih0b2tlbik7XG4gICAgICBzZXRJc0F1dGhlbnRpY2F0ZWQodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIE9wdGlvbmFsOiBVcGRhdGUgdXNlcm5hbWUgaWYgcHJvdmlkZWRcbiAgICAgIGlmICh1c2VybmFtZSkge1xuICAgICAgICBzZXRVc2VyKHByZXZVc2VyID0+ICh7IC4uLnByZXZVc2VyLCB1c2VybmFtZSB9KSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGxvZ0F1dGhFdmVudCgnVE9LRU5fUkVGUkVTSF9TVUNDRVNTJywgeyB1c2VybmFtZSB9KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIHJlZnJlc2ggZXJyb3InO1xuICAgICAgXG4gICAgICBsb2dBdXRoRXZlbnQoJ1RPS0VOX1JFRlJFU0hfRkFJTFVSRScsIHsgXG4gICAgICAgIGVycm9yTWVzc2FnZSwgXG4gICAgICAgIHJldHJ5Q291bnQsXG4gICAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEltcGxlbWVudCByZXRyeSBtZWNoYW5pc21cbiAgICAgIGlmIChyZXRyeUNvdW50IDwgTUFYX1JFVFJJRVMpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBUb2tlbiByZWZyZXNoIGF0dGVtcHQgJHtyZXRyeUNvdW50ICsgMX0gZmFpbGVkLiBSZXRyeWluZy4uLmApO1xuICAgICAgICByZXR1cm4gcmVmcmVzaFRva2VuKHJldHJ5Q291bnQgKyAxKTtcbiAgICAgIH1cblxuICAgICAgLy8gRmluYWwgZmFsbGJhY2s6IGxvZ291dCBhZnRlciBtYXggcmV0cmllc1xuICAgICAgY29uc29sZS5lcnJvcignVG9rZW4gcmVmcmVzaCBmYWlsZWQgYWZ0ZXIgbWF4aW11bSByZXRyaWVzJyk7XG4gICAgICBsb2dvdXQoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLy8gTG9naW4gd2l0aCBjcmVkZW50aWFsc1xuICBjb25zdCBsb2dpbiA9IGFzeW5jIChkYXRhOiBhbnkpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ0F1dGhDb250ZXh0OiBsb2dpbiBmdW5jdGlvbiBjYWxsZWQgd2l0aCBkYXRhOicsIGRhdGEpO1xuICAgICAgLy8gU29tZSBBUEkgY2xpZW50cyBzYXZlIHRoZSB0b2tlbiBkaXJlY3RseSB0byBzdG9yYWdlIGFuZCBzdHJpcCBpdCBmcm9tIHBheWxvYWRcbiAgICAgIC8vIEZhbGwgYmFjayB0byByZWFkaW5nIGZyb20gc3RvcmFnZSBpZiBub3QgcHJlc2VudCBvbiB0aGUgcmVzcG9uc2Ugb2JqZWN0XG4gICAgICBpZiAoIWRhdGEudG9rZW4pIHtcbiAgICAgICAgY29uc3Qgc3RvcmVkVG9rZW4gPSBnZXRBdXRoVG9rZW4oKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0F1dGhDb250ZXh0OiB0b2tlbiBtaXNzaW5nIGluIHBheWxvYWQsIHVzaW5nIHN0b3JlZCB0b2tlbjonLCAhIXN0b3JlZFRva2VuKTtcbiAgICAgICAgaWYgKHN0b3JlZFRva2VuKSB7XG4gICAgICAgICAgZGF0YS50b2tlbiA9IHN0b3JlZFRva2VuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdG9rZW4gZm91bmQgaW4gbG9naW4gZGF0YSBvciBzdG9yYWdlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0F1dGhDb250ZXh0OiBQcm9jZXNzaW5nIGxvZ2luIHdpdGggdG9rZW4nKTtcbiAgICAgIFxuICAgICAgLy8gU3RvcmUgdG9rZW4gd2l0aCByZW1lbWJlciBtZSBwcmVmZXJlbmNlIGlmIHByb3ZpZGVkXG4gICAgICBjb25zdCByZW1lbWJlck1lID0gZGF0YS5yZW1lbWJlcl9tZSAhPT0gdW5kZWZpbmVkID8gZGF0YS5yZW1lbWJlcl9tZSA6IHRydWU7IC8vIERlZmF1bHQgdG8gdHJ1ZSBmb3IgcGVyc2lzdGVudCBsb2dpblxuICAgICAgXG4gICAgICAvLyBTdG9yZSB0b2tlbiBhbmQgd2FpdCBmb3IgaXQgdG8gY29tcGxldGVcbiAgICAgIGF3YWl0IHN0b3JlQXV0aFRva2VuKGRhdGEudG9rZW4sIHJlbWVtYmVyTWUpO1xuICAgICAgY29uc29sZS5sb2coJ0F1dGhDb250ZXh0OiBUb2tlbiBzdG9yZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBhcHBsaWNhdGlvbiBzdGF0ZVxuICAgICAgc2V0VG9rZW4oZGF0YS50b2tlbik7IC8vIEVuc3VyZSB0b2tlbiBzdGF0ZSBpcyBzeW5jaHJvbml6ZWRcbiAgICAgIHNldFVzZXIoZGF0YS51c2VyIHx8IHt9KTtcbiAgICAgIHNldElzQXV0aGVudGljYXRlZCh0cnVlKTtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpOyAvLyBFbnN1cmUgbG9hZGluZyBzdGF0ZSBpcyB0dXJuZWQgb2ZmXG4gICAgICBjb25zb2xlLmxvZygnQXV0aENvbnRleHQ6IFN0YXRlIHVwZGF0ZWQgLSBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsIHVzZXI6JywgZGF0YS51c2VyKTtcbiAgICAgIFxuICAgICAgLy8gQ2FwdHVyZSBtaW5pbWFsIHNlc3Npb24gZGF0YSBhZnRlciBzdWNjZXNzZnVsIGxvZ2luXG4gICAgICBpZiAoZGF0YS51c2VyKSB7XG4gICAgICAgIFNlc3Npb25QZXJzaXN0ZW5jZS5jYXB0dXJlU25hcHNob3QoZGF0YS51c2VyLCBkYXRhLnRva2VuKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2V0IGZsYWcgdG8gc2tpcCBuZXh0IHZlcmlmaWNhdGlvbiBjeWNsZSB0byBhdm9pZCByYWNlIGNvbmRpdGlvblxuICAgICAgc2V0U2tpcE5leHRWZXJpZmljYXRpb24odHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIExvZyBzdWNjZXNzZnVsIGxvZ2luIHN0YXRlIHVwZGF0ZVxuICAgICAgY29uc29sZS5sb2coJ0F1dGhDb250ZXh0OiBMb2dpbiBjb21wbGV0ZSwgYXV0aCBzdGF0ZSB1cGRhdGVkJyk7XG4gICAgICBcbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgY2hlY2sgZm9yIHdhbGxldCBhbmQgZ2VuZXJhdGUgaWYgbmVlZGVkXG4gICAgICAvLyBUaGlzIGVuc3VyZXMgZXZlcnkgdXNlciBoYXMgYSB3YWxsZXQgYXV0b21hdGljYWxseVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNoZWNrQW5kR2VuZXJhdGVXYWxsZXQoKTtcbiAgICAgIH0sIDUwMCk7IC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBhdXRoIGlzIGZ1bGx5IGVzdGFibGlzaGVkXG4gICAgICBcbiAgICAgIHJldHVybiB0cnVlOyAvLyBTaWduYWwgc3VjY2Vzc2Z1bCBsb2dpblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdMb2dpbiBmYWlsZWQ6JywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicpO1xuICAgICAgLy8gRW5zdXJlIGF1dGggc3RhdGUgaXMgcmVzZXQgaWYgbG9naW4gZmFpbHNcbiAgICAgIGNsZWFyQXV0aFRva2VucygpO1xuICAgICAgU2Vzc2lvblBlcnNpc3RlbmNlLmNsZWFyU25hcHNob3QoKTtcbiAgICAgIFxuICAgICAgc2V0VG9rZW4obnVsbCk7XG4gICAgICBzZXRVc2VyKG51bGwpO1xuICAgICAgc2V0SXNBdXRoZW50aWNhdGVkKGZhbHNlKTtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgXG4gICAgICByZXR1cm4gZmFsc2U7IC8vIFNpZ25hbCBmYWlsZWQgbG9naW5cbiAgICB9XG4gIH07XG5cbiAgLy8gQ2xlYXIgYXV0aCBzdGF0ZSAtIHJldXNhYmxlIGZ1bmN0aW9uIGZvciBib3RoIGxvZ291dCBhbmQgZmFpbGVkIGF1dGhcbiAgY29uc3QgY2xlYXJBdXRoU3RhdGUgPSAoKSA9PiB7XG4gICAgY2xlYXJBdXRoVG9rZW5zKCk7XG4gICAgc2V0VG9rZW4obnVsbCk7XG4gICAgc2V0VXNlcihudWxsKTtcbiAgICBzZXRJc0F1dGhlbnRpY2F0ZWQoZmFsc2UpO1xuICAgIFNlc3Npb25QZXJzaXN0ZW5jZS5jbGVhclNuYXBzaG90KCk7XG4gIH07XG4gIFxuICAvLyBDbGVhciBhdXRoIHN0YXRlXG4gIGNvbnN0IGxvZ291dCA9IGFzeW5jICgpID0+IHtcbiAgICBsb2dBdXRoRXZlbnQoJ2xvZ291dF9pbml0aWF0ZWQnKTtcbiAgICB0cnkge1xuICAgICAgLy8gQXR0ZW1wdCB0byBjYWxsIGxvZ291dCBlbmRwb2ludCBpZiB3ZSBoYXZlIGEgdG9rZW5cbiAgICAgIGlmIChnZXRBdXRoVG9rZW4oKSkge1xuICAgICAgICBhd2FpdCBhcGkucG9zdChBUElfRU5EUE9JTlRTLkFVVEguTE9HT1VULCB7fSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBsb2dvdXQ6JywgZXJyb3IpO1xuICAgICAgLy8gQ29udGludWUgd2l0aCBsb2dvdXQgcmVnYXJkbGVzcyBvZiBBUEkgZXJyb3JzXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIEFsd2F5cyBjbGVhciBsb2NhbCBzdGF0ZSBhbmQgc3RvcmFnZVxuICAgICAgY2xlYXJBdXRoU3RhdGUoKTtcbiAgICAgIFxuICAgICAgLy8gTG9nIHRoZSBldmVudFxuICAgICAgbG9nQXV0aEV2ZW50KCdsb2dvdXRfY29tcGxldGUnKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8QXV0aENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgXG4gICAgICB1c2VyLCBcbiAgICAgIGxvZ2luLCBcbiAgICAgIGxvZ291dCwgXG4gICAgICBsb2FkaW5nLFxuICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgaXNBdXRoZW50aWNhdGVkXG4gICAgfX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9BdXRoQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn1cblxuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKTogQXV0aENvbnRleHRUeXBlID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoQXV0aENvbnRleHQpO1xuICBpZiAoIWNvbnRleHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZUF1dGggbXVzdCBiZSB1c2VkIHdpdGhpbiBhbiBBdXRoUHJvdmlkZXInKTtcbiAgfVxuICByZXR1cm4gY29udGV4dDtcbn07XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwiQVBJX0VORFBPSU5UUyIsImFwaSIsImhhc0FkbWluQnlwYXNzIiwiYnlwYXNzTG9naW4iLCJnZXRBdXRoVG9rZW4iLCJzdG9yZUF1dGhUb2tlbiIsImNsZWFyQXV0aFRva2VucyIsIlRPS0VOX0tFWSIsIlRPS0VOX0VYUElSWV9LRVkiLCJSRUZSRVNIX1RPS0VOX0tFWSIsIlRPS0VOX1ZFUklGWV9JTlRFUlZBTCIsIlNlc3Npb25QZXJzaXN0ZW5jZSIsIlNUT1JBR0VfS0VZIiwiY2FwdHVyZVNuYXBzaG90IiwidXNlciIsInRva2VuIiwiY2xlYXJTbmFwc2hvdCIsInNuYXBzaG90IiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImlkIiwidXNlcm5hbWUiLCJlbWFpbCIsImF1dGhlbnRpY2F0ZWQiLCJzZXNzaW9uU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsInJldHJpZXZlU25hcHNob3QiLCJzbmFwc2hvdFN0ciIsImdldEl0ZW0iLCJwYXJzZSIsIk1BWF9BR0UiLCJpc0V4cGlyZWQiLCJyZW1vdmVJdGVtIiwiQXV0aENvbnRleHQiLCJBdXRoUHJvdmlkZXIiLCJjaGlsZHJlbiIsInNldFVzZXIiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImlzQXV0aGVudGljYXRlZCIsInNldElzQXV0aGVudGljYXRlZCIsInNldFRva2VuIiwic2tpcE5leHRWZXJpZmljYXRpb24iLCJzZXRTa2lwTmV4dFZlcmlmaWNhdGlvbiIsImxvZ2luIiwiaXNNb3VudGVkIiwidmVyaWZ5T25Nb3VudCIsImxvZyIsInZlcmlmeVRva2VuIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJyZXNwb25zZSIsImdldCIsIkFVVEgiLCJWRVJJRllfVE9LRU4iLCJzdWNjZXNzIiwiZGF0YSIsInN0YXR1cyIsInN0YXR1c0NvZGUiLCJjbGVhckF1dGhTdGF0ZSIsIm1zZyIsIkVycm9yIiwibWVzc2FnZSIsImxvZ0F1dGhFdmVudCIsImV2ZW50VHlwZSIsImRldGFpbHMiLCJ0b0lTT1N0cmluZyIsImxvZ0VudHJ5IiwiYXV0aExvZ3MiLCJsb2NhbFN0b3JhZ2UiLCJwdXNoIiwic2xpY2UiLCJlIiwiY2hlY2tBbmRHZW5lcmF0ZVdhbGxldCIsIndhbGxldFJlc3BvbnNlIiwiV0FMTEVUIiwiSU5GTyIsIndhbGxldCIsIndhbGxldF9hZGRyZXNzIiwiZ2VuZXJhdGVSZXNwb25zZSIsInBvc3QiLCJHRU5FUkFURSIsInJlZnJlc2hUb2tlbiIsInJldHJ5Q291bnQiLCJNQVhfUkVUUklFUyIsIkJBU0VfREVMQVkiLCJkZWxheSIsIk1hdGgiLCJwb3ciLCJyYW5kb20iLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJSRUZSRVNIX1RPS0VOIiwiaW5Mb2NhbFN0b3JhZ2UiLCJyZW1lbWJlck1lIiwicHJldlVzZXIiLCJlcnJvck1lc3NhZ2UiLCJlcnJvclN0YWNrIiwic3RhY2siLCJ1bmRlZmluZWQiLCJsb2dvdXQiLCJzdG9yZWRUb2tlbiIsInJlbWVtYmVyX21lIiwiTE9HT1VUIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsInVzZUF1dGgiLCJjb250ZXh0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/AuthContext.tsx\n");

/***/ }),

/***/ "./components/ErrorBoundary.tsx":
/*!**************************************!*\
  !*** ./components/ErrorBoundary.tsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass ErrorBoundary extends react__WEBPACK_IMPORTED_MODULE_1__.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            hasError: false,\n            error: null\n        };\n    }\n    static getDerivedStateFromError(error) {\n        return {\n            hasError: true,\n            error\n        };\n    }\n    componentDidCatch(error, errorInfo) {\n        console.error(`Error in component ${this.props.componentName || 'unknown'}:`, error, errorInfo);\n        if (this.props.onError) {\n            this.props.onError(error, errorInfo);\n        }\n    }\n    render() {\n        if (this.state.hasError) {\n            if (this.props.fallback) {\n                return this.props.fallback;\n            }\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"error-boundary p-4 m-2 bg-red-100 border border-red-400 text-red-700 rounded\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"font-bold\",\n                        children: [\n                            \"Something went wrong in \",\n                            this.props.componentName || 'this component'\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/ErrorBoundary.tsx\",\n                        lineNumber: 43,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"details\", {\n                        className: \"whitespace-pre-wrap text-sm mt-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"summary\", {\n                                children: \"View error details\"\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/ErrorBoundary.tsx\",\n                                lineNumber: 45,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"mt-1\",\n                                children: this.state.error?.toString()\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/ErrorBoundary.tsx\",\n                                lineNumber: 46,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/ErrorBoundary.tsx\",\n                        lineNumber: 44,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/ErrorBoundary.tsx\",\n                lineNumber: 42,\n                columnNumber: 9\n            }, this);\n        }\n        return this.props.children;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ErrorBoundary);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0Vycm9yQm91bmRhcnkudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUErRDtBQWMvRCxNQUFNRSxzQkFBc0JELDRDQUFTQTtJQUNuQyxZQUFZRSxLQUFZLENBQUU7UUFDeEIsS0FBSyxDQUFDQTtRQUNOLElBQUksQ0FBQ0MsS0FBSyxHQUFHO1lBQ1hDLFVBQVU7WUFDVkMsT0FBTztRQUNUO0lBQ0Y7SUFFQSxPQUFPQyx5QkFBeUJELEtBQVksRUFBUztRQUNuRCxPQUFPO1lBQUVELFVBQVU7WUFBTUM7UUFBTTtJQUNqQztJQUVBRSxrQkFBa0JGLEtBQVksRUFBRUcsU0FBb0IsRUFBUTtRQUMxREMsUUFBUUosS0FBSyxDQUFDLENBQUMsbUJBQW1CLEVBQUUsSUFBSSxDQUFDSCxLQUFLLENBQUNRLGFBQWEsSUFBSSxVQUFVLENBQUMsQ0FBQyxFQUFFTCxPQUFPRztRQUNyRixJQUFJLElBQUksQ0FBQ04sS0FBSyxDQUFDUyxPQUFPLEVBQUU7WUFDdEIsSUFBSSxDQUFDVCxLQUFLLENBQUNTLE9BQU8sQ0FBQ04sT0FBT0c7UUFDNUI7SUFDRjtJQUVBSSxTQUFvQjtRQUNsQixJQUFJLElBQUksQ0FBQ1QsS0FBSyxDQUFDQyxRQUFRLEVBQUU7WUFDdkIsSUFBSSxJQUFJLENBQUNGLEtBQUssQ0FBQ1csUUFBUSxFQUFFO2dCQUN2QixPQUFPLElBQUksQ0FBQ1gsS0FBSyxDQUFDVyxRQUFRO1lBQzVCO1lBRUEscUJBQ0UsOERBQUNDO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0M7d0JBQUdELFdBQVU7OzRCQUFZOzRCQUF5QixJQUFJLENBQUNiLEtBQUssQ0FBQ1EsYUFBYSxJQUFJOzs7Ozs7O2tDQUMvRSw4REFBQ087d0JBQVFGLFdBQVU7OzBDQUNqQiw4REFBQ0c7MENBQVE7Ozs7OzswQ0FDVCw4REFBQ0M7Z0NBQUVKLFdBQVU7MENBQVEsSUFBSSxDQUFDWixLQUFLLENBQUNFLEtBQUssRUFBRWU7Ozs7Ozs7Ozs7Ozs7Ozs7OztRQUkvQztRQUVBLE9BQU8sSUFBSSxDQUFDbEIsS0FBSyxDQUFDbUIsUUFBUTtJQUM1QjtBQUNGO0FBRUEsaUVBQWVwQixhQUFhQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvd29ua2Fzd29ybGQvRG93bmxvYWRzL2dyYWNlLXByb2plY3Qvc3JjL3VpL2NvbXBvbmVudHMvRXJyb3JCb3VuZGFyeS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCwgRXJyb3JJbmZvLCBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdE5vZGU7XG4gIGZhbGxiYWNrPzogUmVhY3ROb2RlO1xuICBvbkVycm9yPzogKGVycm9yOiBFcnJvciwgZXJyb3JJbmZvOiBFcnJvckluZm8pID0+IHZvaWQ7XG4gIGNvbXBvbmVudE5hbWU/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGhhc0Vycm9yOiBib29sZWFuO1xuICBlcnJvcjogRXJyb3IgfCBudWxsO1xufVxuXG5jbGFzcyBFcnJvckJvdW5kYXJ5IGV4dGVuZHMgQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHsgXG4gICAgICBoYXNFcnJvcjogZmFsc2UsXG4gICAgICBlcnJvcjogbnVsbFxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKGVycm9yOiBFcnJvcik6IFN0YXRlIHtcbiAgICByZXR1cm4geyBoYXNFcnJvcjogdHJ1ZSwgZXJyb3IgfTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZENhdGNoKGVycm9yOiBFcnJvciwgZXJyb3JJbmZvOiBFcnJvckluZm8pOiB2b2lkIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBjb21wb25lbnQgJHt0aGlzLnByb3BzLmNvbXBvbmVudE5hbWUgfHwgJ3Vua25vd24nfTpgLCBlcnJvciwgZXJyb3JJbmZvKTtcbiAgICBpZiAodGhpcy5wcm9wcy5vbkVycm9yKSB7XG4gICAgICB0aGlzLnByb3BzLm9uRXJyb3IoZXJyb3IsIGVycm9ySW5mbyk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCk6IFJlYWN0Tm9kZSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuaGFzRXJyb3IpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmZhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmZhbGxiYWNrO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVycm9yLWJvdW5kYXJ5IHAtNCBtLTIgYmctcmVkLTEwMCBib3JkZXIgYm9yZGVyLXJlZC00MDAgdGV4dC1yZWQtNzAwIHJvdW5kZWRcIj5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1ib2xkXCI+U29tZXRoaW5nIHdlbnQgd3JvbmcgaW4ge3RoaXMucHJvcHMuY29tcG9uZW50TmFtZSB8fCAndGhpcyBjb21wb25lbnQnfTwvaDM+XG4gICAgICAgICAgPGRldGFpbHMgY2xhc3NOYW1lPVwid2hpdGVzcGFjZS1wcmUtd3JhcCB0ZXh0LXNtIG10LTJcIj5cbiAgICAgICAgICAgIDxzdW1tYXJ5PlZpZXcgZXJyb3IgZGV0YWlsczwvc3VtbWFyeT5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTFcIj57dGhpcy5zdGF0ZS5lcnJvcj8udG9TdHJpbmcoKX08L3A+XG4gICAgICAgICAgPC9kZXRhaWxzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvcHMuY2hpbGRyZW47XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRXJyb3JCb3VuZGFyeTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIkNvbXBvbmVudCIsIkVycm9yQm91bmRhcnkiLCJwcm9wcyIsInN0YXRlIiwiaGFzRXJyb3IiLCJlcnJvciIsImdldERlcml2ZWRTdGF0ZUZyb21FcnJvciIsImNvbXBvbmVudERpZENhdGNoIiwiZXJyb3JJbmZvIiwiY29uc29sZSIsImNvbXBvbmVudE5hbWUiLCJvbkVycm9yIiwicmVuZGVyIiwiZmFsbGJhY2siLCJkaXYiLCJjbGFzc05hbWUiLCJoMyIsImRldGFpbHMiLCJzdW1tYXJ5IiwicCIsInRvU3RyaW5nIiwiY2hpbGRyZW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/ErrorBoundary.tsx\n");

/***/ }),

/***/ "./components/LoadingPage.tsx":
/*!************************************!*\
  !*** ./components/LoadingPage.tsx ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LoadingPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n/**\n * LoadingPage component\n * \n * Displays a consistent loading animation for transitions between pages\n * or during authentication processes.\n */ function LoadingPage({ message = 'Loading...', showLogo = true }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex min-h-screen items-center justify-center bg-black text-white p-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"text-center\",\n            children: [\n                showLogo && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4 text-red-500 text-xl font-bold\",\n                    children: \"Grace\"\n                }, void 0, false, {\n                    fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/LoadingPage.tsx\",\n                    lineNumber: 22,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"mr-2\",\n                            children: message\n                        }, void 0, false, {\n                            fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/LoadingPage.tsx\",\n                            lineNumber: 25,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"animate-pulse\",\n                            children: \"...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/LoadingPage.tsx\",\n                            lineNumber: 26,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/LoadingPage.tsx\",\n                    lineNumber: 24,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/LoadingPage.tsx\",\n            lineNumber: 20,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/LoadingPage.tsx\",\n        lineNumber: 19,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0xvYWRpbmdQYWdlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEI7QUFPMUI7Ozs7O0NBS0MsR0FDYyxTQUFTQyxZQUFZLEVBQ2xDQyxVQUFVLFlBQVksRUFDdEJDLFdBQVcsSUFBSSxFQUNFO0lBQ2pCLHFCQUNFLDhEQUFDQztRQUFJQyxXQUFVO2tCQUNiLDRFQUFDRDtZQUFJQyxXQUFVOztnQkFDWkYsMEJBQ0MsOERBQUNDO29CQUFJQyxXQUFVOzhCQUFzQzs7Ozs7OzhCQUV2RCw4REFBQ0Q7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDQzs0QkFBS0QsV0FBVTtzQ0FBUUg7Ozs7OztzQ0FDeEIsOERBQUNFOzRCQUFJQyxXQUFVO3NDQUFnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLekMiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b25rYXN3b3JsZC9Eb3dubG9hZHMvZ3JhY2UtcHJvamVjdC9zcmMvdWkvY29tcG9uZW50cy9Mb2FkaW5nUGFnZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIExvYWRpbmdQYWdlUHJvcHMge1xuICBtZXNzYWdlPzogc3RyaW5nO1xuICBzaG93TG9nbz86IGJvb2xlYW47XG59XG5cbi8qKlxuICogTG9hZGluZ1BhZ2UgY29tcG9uZW50XG4gKiBcbiAqIERpc3BsYXlzIGEgY29uc2lzdGVudCBsb2FkaW5nIGFuaW1hdGlvbiBmb3IgdHJhbnNpdGlvbnMgYmV0d2VlbiBwYWdlc1xuICogb3IgZHVyaW5nIGF1dGhlbnRpY2F0aW9uIHByb2Nlc3Nlcy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTG9hZGluZ1BhZ2UoeyBcbiAgbWVzc2FnZSA9ICdMb2FkaW5nLi4uJywgXG4gIHNob3dMb2dvID0gdHJ1ZSBcbn06IExvYWRpbmdQYWdlUHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggbWluLWgtc2NyZWVuIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ibGFjayB0ZXh0LXdoaXRlIHAtNFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICB7c2hvd0xvZ28gJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNCB0ZXh0LXJlZC01MDAgdGV4dC14bCBmb250LWJvbGRcIj5HcmFjZTwvZGl2PlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXItMlwiPnttZXNzYWdlfTwvc3Bhbj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtcHVsc2VcIj4uLi48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJSZWFjdCIsIkxvYWRpbmdQYWdlIiwibWVzc2FnZSIsInNob3dMb2dvIiwiZGl2IiwiY2xhc3NOYW1lIiwic3BhbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/LoadingPage.tsx\n");

/***/ }),

/***/ "./components/LogoutButton.tsx":
/*!*************************************!*\
  !*** ./components/LogoutButton.tsx ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LogoutButton)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AuthContext */ \"./components/AuthContext.tsx\");\n/* harmony import */ var _utils_StatePersistence__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/StatePersistence */ \"./utils/StatePersistence.ts\");\n// src/components/LogoutButton.tsx\n\n\n\n\n\nfunction LogoutButton() {\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const { logout } = (0,_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)(); // Use the standardized logout function from AuthContext\n    const handleLogout = async ()=>{\n        try {\n            // Clear persistent state snapshot\n            _utils_StatePersistence__WEBPACK_IMPORTED_MODULE_4__[\"default\"].clearSnapshot();\n            // Use the standardized logout function that handles everything\n            await logout();\n            // After successful logout, redirect to login page\n            router.push('/login');\n        } catch (err) {\n            console.error('Logout failed:', err);\n            // Still navigate to login even if the API call fails\n            router.push('/login');\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n        onClick: handleLogout,\n        className: \"transition-all hover:text-red-400 pb-1 text-white\",\n        children: \"Logout\"\n    }, void 0, false, {\n        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/LogoutButton.tsx\",\n        lineNumber: 32,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0xvZ291dEJ1dHRvbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsa0NBQWtDOztBQUVSO0FBQ2M7QUFDQTtBQUd3QjtBQUVqRCxTQUFTSTtJQUN0QixNQUFNQyxTQUFTSixzREFBU0E7SUFDeEIsTUFBTSxFQUFFSyxNQUFNLEVBQUUsR0FBR0oscURBQU9BLElBQUksd0RBQXdEO0lBRXRGLE1BQU1LLGVBQWU7UUFDbkIsSUFBSTtZQUNGLGtDQUFrQztZQUNsQ0osNkVBQXFDO1lBRXJDLCtEQUErRDtZQUMvRCxNQUFNRztZQUVOLGtEQUFrRDtZQUNsREQsT0FBT0ksSUFBSSxDQUFDO1FBQ2QsRUFBRSxPQUFPQyxLQUFLO1lBQ1pDLFFBQVFDLEtBQUssQ0FBQyxrQkFBa0JGO1lBQ2hDLHFEQUFxRDtZQUNyREwsT0FBT0ksSUFBSSxDQUFDO1FBQ2Q7SUFDRjtJQUVBLHFCQUNFLDhEQUFDSTtRQUNDQyxTQUFTUDtRQUNUUSxXQUFVO2tCQUNYOzs7Ozs7QUFJTCIsInNvdXJjZXMiOlsiL1VzZXJzL3dvbmthc3dvcmxkL0Rvd25sb2Fkcy9ncmFjZS1wcm9qZWN0L3NyYy91aS9jb21wb25lbnRzL0xvZ291dEJ1dHRvbi50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvbXBvbmVudHMvTG9nb3V0QnV0dG9uLnRzeFxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJy4vQXV0aENvbnRleHQnO1xuaW1wb3J0IGFwaSBmcm9tICcuLi9hcGkvYXBpQ2xpZW50JztcbmltcG9ydCB7IEFQSV9FTkRQT0lOVFMgfSBmcm9tICcuLi9hcGkvYXBpQ2xpZW50JztcbmltcG9ydCBTdGF0ZVBlcnNpc3RlbmNlTWFuYWdlciBmcm9tICcuLi91dGlscy9TdGF0ZVBlcnNpc3RlbmNlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTG9nb3V0QnV0dG9uKCkge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgeyBsb2dvdXQgfSA9IHVzZUF1dGgoKTsgLy8gVXNlIHRoZSBzdGFuZGFyZGl6ZWQgbG9nb3V0IGZ1bmN0aW9uIGZyb20gQXV0aENvbnRleHRcblxuICBjb25zdCBoYW5kbGVMb2dvdXQgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENsZWFyIHBlcnNpc3RlbnQgc3RhdGUgc25hcHNob3RcbiAgICAgIFN0YXRlUGVyc2lzdGVuY2VNYW5hZ2VyLmNsZWFyU25hcHNob3QoKTtcbiAgICAgIFxuICAgICAgLy8gVXNlIHRoZSBzdGFuZGFyZGl6ZWQgbG9nb3V0IGZ1bmN0aW9uIHRoYXQgaGFuZGxlcyBldmVyeXRoaW5nXG4gICAgICBhd2FpdCBsb2dvdXQoKTtcbiAgICAgIFxuICAgICAgLy8gQWZ0ZXIgc3VjY2Vzc2Z1bCBsb2dvdXQsIHJlZGlyZWN0IHRvIGxvZ2luIHBhZ2VcbiAgICAgIHJvdXRlci5wdXNoKCcvbG9naW4nKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0xvZ291dCBmYWlsZWQ6JywgZXJyKTtcbiAgICAgIC8vIFN0aWxsIG5hdmlnYXRlIHRvIGxvZ2luIGV2ZW4gaWYgdGhlIEFQSSBjYWxsIGZhaWxzXG4gICAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGJ1dHRvblxuICAgICAgb25DbGljaz17aGFuZGxlTG9nb3V0fVxuICAgICAgY2xhc3NOYW1lPVwidHJhbnNpdGlvbi1hbGwgaG92ZXI6dGV4dC1yZWQtNDAwIHBiLTEgdGV4dC13aGl0ZVwiXG4gICAgPlxuICAgICAgTG9nb3V0XG4gICAgPC9idXR0b24+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VSb3V0ZXIiLCJ1c2VBdXRoIiwiU3RhdGVQZXJzaXN0ZW5jZU1hbmFnZXIiLCJMb2dvdXRCdXR0b24iLCJyb3V0ZXIiLCJsb2dvdXQiLCJoYW5kbGVMb2dvdXQiLCJjbGVhclNuYXBzaG90IiwicHVzaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImJ1dHRvbiIsIm9uQ2xpY2siLCJjbGFzc05hbWUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/LogoutButton.tsx\n");

/***/ }),

/***/ "./components/StateLoader.tsx":
/*!************************************!*\
  !*** ./components/StateLoader.tsx ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _context_AppStateContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../context/AppStateContext */ \"./context/AppStateContext.tsx\");\n/* harmony import */ var _utils_StateBackupService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/StateBackupService */ \"./utils/StateBackupService.ts\");\n/* harmony import */ var _AuthContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AuthContext */ \"./components/AuthContext.tsx\");\n\n\n\n\n\nconst StateLoader = ({ children })=>{\n    const { isStateLoading, isStateHydrated, isStateRecovered, isStateSyncing, dispatch } = (0,_context_AppStateContext__WEBPACK_IMPORTED_MODULE_2__.useAppState)();\n    const { user, isAuthenticated } = (0,_AuthContext__WEBPACK_IMPORTED_MODULE_4__.useAuth)();\n    const [showSyncNotice, setShowSyncNotice] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showHydrationNotice, setShowHydrationNotice] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showRecoveryAttempt, setShowRecoveryAttempt] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const isInitialMount = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(true);\n    const backupService = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const recoveryAttemptMade = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    // Handle sync notice display and auto-hide\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"StateLoader.useEffect\": ()=>{\n            if (isStateSyncing) {\n                setShowSyncNotice(true);\n                // Auto-hide sync notice after 3 seconds\n                const timer = setTimeout({\n                    \"StateLoader.useEffect.timer\": ()=>setShowSyncNotice(false)\n                }[\"StateLoader.useEffect.timer\"], 3000);\n                return ({\n                    \"StateLoader.useEffect\": ()=>clearTimeout(timer)\n                })[\"StateLoader.useEffect\"];\n            }\n        }\n    }[\"StateLoader.useEffect\"], [\n        isStateSyncing\n    ]);\n    // Initialize the state backup service\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"StateLoader.useEffect\": ()=>{\n            if (isAuthenticated && user) {\n                try {\n                    // Initialize the backup service\n                    const service = _utils_StateBackupService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInstance();\n                    backupService.current = service;\n                    service.initialize().then({\n                        \"StateLoader.useEffect\": (success)=>{\n                            console.log(`State backup service initialized: ${success ? 'success' : 'fallback mode'}`);\n                        }\n                    }[\"StateLoader.useEffect\"]);\n                } catch (error) {\n                    console.error('Failed to initialize state backup service:', error);\n                }\n            }\n            return ({\n                \"StateLoader.useEffect\": ()=>{\n                    // Clean up backup service on unmount\n                    if (backupService.current) {\n                        backupService.current.stopPeriodicBackup();\n                    }\n                }\n            })[\"StateLoader.useEffect\"];\n        }\n    }[\"StateLoader.useEffect\"], [\n        isAuthenticated,\n        user\n    ]);\n    // Attempt recovery if needed\n    const attemptStateRecovery = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"StateLoader.useCallback[attemptStateRecovery]\": async ()=>{\n            if (!isStateHydrated && !isStateLoading && !recoveryAttemptMade.current) {\n                recoveryAttemptMade.current = true;\n                setShowRecoveryAttempt(true);\n                try {\n                    if (backupService.current) {\n                        const recoveredState = await backupService.current.attemptRecovery();\n                        if (recoveredState) {\n                            console.log('Successfully recovered state from backup source');\n                            dispatch({\n                                type: 'HYDRATE_STATE',\n                                payload: recoveredState\n                            });\n                            setShowHydrationNotice(true);\n                            setTimeout({\n                                \"StateLoader.useCallback[attemptStateRecovery]\": ()=>setShowHydrationNotice(false)\n                            }[\"StateLoader.useCallback[attemptStateRecovery]\"], 3000);\n                        }\n                    }\n                } catch (error) {\n                    console.error('Error during state recovery attempt:', error);\n                } finally{\n                    setShowRecoveryAttempt(false);\n                }\n            }\n        }\n    }[\"StateLoader.useCallback[attemptStateRecovery]\"], [\n        dispatch,\n        isStateHydrated,\n        isStateLoading\n    ]);\n    // Trigger recovery attempt if state is not hydrated\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"StateLoader.useEffect\": ()=>{\n            if (isAuthenticated && !isStateHydrated && !isStateLoading) {\n                const timer = setTimeout({\n                    \"StateLoader.useEffect.timer\": ()=>{\n                        attemptStateRecovery();\n                    }\n                }[\"StateLoader.useEffect.timer\"], 1000); // Wait 1 second before attempting recovery\n                return ({\n                    \"StateLoader.useEffect\": ()=>clearTimeout(timer)\n                })[\"StateLoader.useEffect\"];\n            }\n        }\n    }[\"StateLoader.useEffect\"], [\n        isAuthenticated,\n        isStateHydrated,\n        isStateLoading,\n        attemptStateRecovery\n    ]);\n    // Handle hydration notice only for non-initial state hydrations\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"StateLoader.useEffect\": ()=>{\n            // Skip the initial mount effect - this prevents showing notification on first load\n            if (isInitialMount.current) {\n                isInitialMount.current = false;\n                return;\n            }\n            // Only show hydration notice for subsequent hydrations\n            if (isStateHydrated && !isStateLoading) {\n                setShowHydrationNotice(true);\n                const timer = setTimeout({\n                    \"StateLoader.useEffect.timer\": ()=>setShowHydrationNotice(false)\n                }[\"StateLoader.useEffect.timer\"], 3000);\n                return ({\n                    \"StateLoader.useEffect\": ()=>clearTimeout(timer)\n                })[\"StateLoader.useEffect\"];\n            }\n        }\n    }[\"StateLoader.useEffect\"], [\n        isStateHydrated,\n        isStateLoading\n    ]);\n    if (isStateLoading || showRecoveryAttempt) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-gray-900 p-6 rounded-lg shadow-lg text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gold mx-auto mb-4\"\n                    }, void 0, false, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                        lineNumber: 108,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"text-xl font-semibold text-gold mb-2\",\n                        children: showRecoveryAttempt ? 'Recovering Your Data' : 'Loading Your Trading State'\n                    }, void 0, false, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                        lineNumber: 109,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-400\",\n                        children: showRecoveryAttempt ? 'Attempting to recover your session data...' : 'Restoring your previous session...'\n                    }, void 0, false, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                        lineNumber: 112,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                lineNumber: 107,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n            lineNumber: 106,\n            columnNumber: 7\n        }, undefined);\n    }\n    // Show recovery notification if state was recovered from corruption\n    if (isStateRecovered) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"fixed bottom-4 right-4 bg-gray-900 text-yellow-500 px-4 py-2 rounded shadow-lg  border border-yellow-600 transition-opacity duration-1000 z-40\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5 mr-2\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                                    lineNumber: 130,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                                lineNumber: 129,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"Session was partially recovered due to data corruption\"\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                                lineNumber: 132,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                        lineNumber: 128,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                    lineNumber: 126,\n                    columnNumber: 9\n                }, undefined),\n                children\n            ]\n        }, void 0, true);\n    }\n    // Show a brief flash notification when state is hydrated but not on initial load\n    if (showHydrationNotice) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"fixed bottom-4 right-4 bg-gray-900 text-green-400 px-4 py-2 rounded shadow-lg  transition-opacity duration-1000 z-40\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5 mr-2\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M5 13l4 4L19 7\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                                    lineNumber: 148,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                                lineNumber: 147,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"Session restored successfully\"\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                                lineNumber: 150,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                        lineNumber: 146,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                    lineNumber: 144,\n                    columnNumber: 9\n                }, undefined),\n                children\n            ]\n        }, void 0, true);\n    }\n    // Show cross-tab sync notification\n    if (showSyncNotice) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"fixed bottom-4 right-4 bg-gray-800 text-blue-400 px-4 py-2 rounded shadow-lg  transition-opacity duration-300 z-40 border border-blue-600\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-5 w-5 mr-2 animate-pulse\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 2,\n                                    d: \"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                                    lineNumber: 166,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                                lineNumber: 165,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                children: \"Syncing state from another tab...\"\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                                lineNumber: 168,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                        lineNumber: 164,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/components/StateLoader.tsx\",\n                    lineNumber: 162,\n                    columnNumber: 9\n                }, undefined),\n                children\n            ]\n        }, void 0, true);\n    }\n    // Default render\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: children\n    }, void 0, false);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StateLoader);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSVUscUJBQXFCO1FBQ3ZCLHFCQUNFOzs4QkFDRSw4REFBQ3lCO29CQUFJQyxXQUFVOzhCQUViLDRFQUFDRDt3QkFBSUMsV0FBVTs7MENBQ2IsOERBQUNHO2dDQUFJQyxPQUFNO2dDQUE2QkosV0FBVTtnQ0FBZUssTUFBSztnQ0FBT0MsU0FBUTtnQ0FBWUMsUUFBTzswQ0FDdEcsNEVBQUNDO29DQUFLQyxlQUFjO29DQUFRQyxnQkFBZTtvQ0FBUUMsYUFBYTtvQ0FBR0MsR0FBRTs7Ozs7Ozs7Ozs7MENBRXZFLDhEQUFDQzswQ0FBSzs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0JBR1RqRDs7O0lBR1A7SUFFQSxtQ0FBbUM7SUFDbkMsSUFBSVEsZ0JBQWdCO1FBQ2xCLHFCQUNFOzs4QkFDRSw4REFBQzJCO29CQUFJQyxXQUFVOzhCQUViLDRFQUFDRDt3QkFBSUMsV0FBVTs7MENBQ2IsOERBQUNHO2dDQUFJQyxPQUFNO2dDQUE2QkosV0FBVTtnQ0FBNkJLLE1BQUs7Z0NBQU9DLFNBQVE7Z0NBQVlDLFFBQU87MENBQ3BILDRFQUFDQztvQ0FBS0MsZUFBYztvQ0FBUUMsZ0JBQWU7b0NBQVFDLGFBQWE7b0NBQUdDLEdBQUU7Ozs7Ozs7Ozs7OzBDQUV2RSw4REFBQ0M7MENBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dCQUdUakQ7OztJQUdQO0lBRUEsaUJBQWlCO0lBQ2pCLHFCQUFPO2tCQUFHQTs7QUFDWjtBQUVBLGlFQUFlRCxXQUFXQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvd29ua2Fzd29ybGQvRG93bmxvYWRzL2dyYWNlLXByb2plY3Qvc3JjL3VpL2NvbXBvbmVudHMvU3RhdGVMb2FkZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VSZWYsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQXBwU3RhdGUgfSBmcm9tICcuLi9jb250ZXh0L0FwcFN0YXRlQ29udGV4dCc7XG5pbXBvcnQgU3RhdGVCYWNrdXBTZXJ2aWNlIGZyb20gJy4uL3V0aWxzL1N0YXRlQmFja3VwU2VydmljZSc7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnLi9BdXRoQ29udGV4dCc7XG5cbmludGVyZmFjZSBTdGF0ZUxvYWRlclByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuY29uc3QgU3RhdGVMb2FkZXI6IFJlYWN0LkZDPFN0YXRlTG9hZGVyUHJvcHM+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICBjb25zdCB7IGlzU3RhdGVMb2FkaW5nLCBpc1N0YXRlSHlkcmF0ZWQsIGlzU3RhdGVSZWNvdmVyZWQsIGlzU3RhdGVTeW5jaW5nLCBkaXNwYXRjaCB9ID0gdXNlQXBwU3RhdGUoKTtcbiAgY29uc3QgeyB1c2VyLCBpc0F1dGhlbnRpY2F0ZWQgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3QgW3Nob3dTeW5jTm90aWNlLCBzZXRTaG93U3luY05vdGljZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93SHlkcmF0aW9uTm90aWNlLCBzZXRTaG93SHlkcmF0aW9uTm90aWNlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Nob3dSZWNvdmVyeUF0dGVtcHQsIHNldFNob3dSZWNvdmVyeUF0dGVtcHRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBpc0luaXRpYWxNb3VudCA9IHVzZVJlZih0cnVlKTtcbiAgY29uc3QgYmFja3VwU2VydmljZSA9IHVzZVJlZjxTdGF0ZUJhY2t1cFNlcnZpY2UgfCBudWxsPihudWxsKTtcbiAgY29uc3QgcmVjb3ZlcnlBdHRlbXB0TWFkZSA9IHVzZVJlZihmYWxzZSk7XG4gIFxuICAvLyBIYW5kbGUgc3luYyBub3RpY2UgZGlzcGxheSBhbmQgYXV0by1oaWRlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzU3RhdGVTeW5jaW5nKSB7XG4gICAgICBzZXRTaG93U3luY05vdGljZSh0cnVlKTtcbiAgICAgIC8vIEF1dG8taGlkZSBzeW5jIG5vdGljZSBhZnRlciAzIHNlY29uZHNcbiAgICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiBzZXRTaG93U3luY05vdGljZShmYWxzZSksIDMwMDApO1xuICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgfVxuICB9LCBbaXNTdGF0ZVN5bmNpbmddKTtcbiAgXG4gIC8vIEluaXRpYWxpemUgdGhlIHN0YXRlIGJhY2t1cCBzZXJ2aWNlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzQXV0aGVudGljYXRlZCAmJiB1c2VyKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBiYWNrdXAgc2VydmljZVxuICAgICAgICBjb25zdCBzZXJ2aWNlID0gU3RhdGVCYWNrdXBTZXJ2aWNlLmdldEluc3RhbmNlKCk7XG4gICAgICAgIGJhY2t1cFNlcnZpY2UuY3VycmVudCA9IHNlcnZpY2U7XG4gICAgICAgIHNlcnZpY2UuaW5pdGlhbGl6ZSgpLnRoZW4oc3VjY2VzcyA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFN0YXRlIGJhY2t1cCBzZXJ2aWNlIGluaXRpYWxpemVkOiAke3N1Y2Nlc3MgPyAnc3VjY2VzcycgOiAnZmFsbGJhY2sgbW9kZSd9YCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgc3RhdGUgYmFja3VwIHNlcnZpY2U6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgLy8gQ2xlYW4gdXAgYmFja3VwIHNlcnZpY2Ugb24gdW5tb3VudFxuICAgICAgaWYgKGJhY2t1cFNlcnZpY2UuY3VycmVudCkge1xuICAgICAgICBiYWNrdXBTZXJ2aWNlLmN1cnJlbnQuc3RvcFBlcmlvZGljQmFja3VwKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2lzQXV0aGVudGljYXRlZCwgdXNlcl0pO1xuICBcbiAgLy8gQXR0ZW1wdCByZWNvdmVyeSBpZiBuZWVkZWRcbiAgY29uc3QgYXR0ZW1wdFN0YXRlUmVjb3ZlcnkgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFpc1N0YXRlSHlkcmF0ZWQgJiYgIWlzU3RhdGVMb2FkaW5nICYmICFyZWNvdmVyeUF0dGVtcHRNYWRlLmN1cnJlbnQpIHtcbiAgICAgIHJlY292ZXJ5QXR0ZW1wdE1hZGUuY3VycmVudCA9IHRydWU7XG4gICAgICBzZXRTaG93UmVjb3ZlcnlBdHRlbXB0KHRydWUpO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBpZiAoYmFja3VwU2VydmljZS5jdXJyZW50KSB7XG4gICAgICAgICAgY29uc3QgcmVjb3ZlcmVkU3RhdGUgPSBhd2FpdCBiYWNrdXBTZXJ2aWNlLmN1cnJlbnQuYXR0ZW1wdFJlY292ZXJ5KCk7XG4gICAgICAgICAgaWYgKHJlY292ZXJlZFN0YXRlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHJlY292ZXJlZCBzdGF0ZSBmcm9tIGJhY2t1cCBzb3VyY2UnKTtcbiAgICAgICAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ0hZRFJBVEVfU1RBVEUnLCBwYXlsb2FkOiByZWNvdmVyZWRTdGF0ZSB9KTtcbiAgICAgICAgICAgIHNldFNob3dIeWRyYXRpb25Ob3RpY2UodHJ1ZSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNldFNob3dIeWRyYXRpb25Ob3RpY2UoZmFsc2UpLCAzMDAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBzdGF0ZSByZWNvdmVyeSBhdHRlbXB0OicsIGVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldFNob3dSZWNvdmVyeUF0dGVtcHQoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2Rpc3BhdGNoLCBpc1N0YXRlSHlkcmF0ZWQsIGlzU3RhdGVMb2FkaW5nXSk7XG4gIFxuICAvLyBUcmlnZ2VyIHJlY292ZXJ5IGF0dGVtcHQgaWYgc3RhdGUgaXMgbm90IGh5ZHJhdGVkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzQXV0aGVudGljYXRlZCAmJiAhaXNTdGF0ZUh5ZHJhdGVkICYmICFpc1N0YXRlTG9hZGluZykge1xuICAgICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgYXR0ZW1wdFN0YXRlUmVjb3ZlcnkoKTtcbiAgICAgIH0sIDEwMDApOyAvLyBXYWl0IDEgc2Vjb25kIGJlZm9yZSBhdHRlbXB0aW5nIHJlY292ZXJ5XG4gICAgICBcbiAgICAgIHJldHVybiAoKSA9PiBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgIH1cbiAgfSwgW2lzQXV0aGVudGljYXRlZCwgaXNTdGF0ZUh5ZHJhdGVkLCBpc1N0YXRlTG9hZGluZywgYXR0ZW1wdFN0YXRlUmVjb3ZlcnldKTtcblxuICAvLyBIYW5kbGUgaHlkcmF0aW9uIG5vdGljZSBvbmx5IGZvciBub24taW5pdGlhbCBzdGF0ZSBoeWRyYXRpb25zXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gU2tpcCB0aGUgaW5pdGlhbCBtb3VudCBlZmZlY3QgLSB0aGlzIHByZXZlbnRzIHNob3dpbmcgbm90aWZpY2F0aW9uIG9uIGZpcnN0IGxvYWRcbiAgICBpZiAoaXNJbml0aWFsTW91bnQuY3VycmVudCkge1xuICAgICAgaXNJbml0aWFsTW91bnQuY3VycmVudCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBPbmx5IHNob3cgaHlkcmF0aW9uIG5vdGljZSBmb3Igc3Vic2VxdWVudCBoeWRyYXRpb25zXG4gICAgaWYgKGlzU3RhdGVIeWRyYXRlZCAmJiAhaXNTdGF0ZUxvYWRpbmcpIHtcbiAgICAgIHNldFNob3dIeWRyYXRpb25Ob3RpY2UodHJ1ZSk7XG4gICAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gc2V0U2hvd0h5ZHJhdGlvbk5vdGljZShmYWxzZSksIDMwMDApO1xuICAgICAgcmV0dXJuICgpID0+IGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgfVxuICB9LCBbaXNTdGF0ZUh5ZHJhdGVkLCBpc1N0YXRlTG9hZGluZ10pO1xuXG4gIGlmIChpc1N0YXRlTG9hZGluZyB8fCBzaG93UmVjb3ZlcnlBdHRlbXB0KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTc1IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTBcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTkwMCBwLTYgcm91bmRlZC1sZyBzaGFkb3ctbGcgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0xMiB3LTEyIGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItZ29sZCBteC1hdXRvIG1iLTRcIj48L2Rpdj5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LXNlbWlib2xkIHRleHQtZ29sZCBtYi0yXCI+XG4gICAgICAgICAgICB7c2hvd1JlY292ZXJ5QXR0ZW1wdCA/ICdSZWNvdmVyaW5nIFlvdXIgRGF0YScgOiAnTG9hZGluZyBZb3VyIFRyYWRpbmcgU3RhdGUnfVxuICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAge3Nob3dSZWNvdmVyeUF0dGVtcHQgXG4gICAgICAgICAgICAgID8gJ0F0dGVtcHRpbmcgdG8gcmVjb3ZlciB5b3VyIHNlc3Npb24gZGF0YS4uLicgXG4gICAgICAgICAgICAgIDogJ1Jlc3RvcmluZyB5b3VyIHByZXZpb3VzIHNlc3Npb24uLi4nfVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgLy8gU2hvdyByZWNvdmVyeSBub3RpZmljYXRpb24gaWYgc3RhdGUgd2FzIHJlY292ZXJlZCBmcm9tIGNvcnJ1cHRpb25cbiAgaWYgKGlzU3RhdGVSZWNvdmVyZWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tNCByaWdodC00IGJnLWdyYXktOTAwIHRleHQteWVsbG93LTUwMCBweC00IHB5LTIgcm91bmRlZCBzaGFkb3ctbGcgXG4gICAgICAgICAgICAgICAgICAgICAgYm9yZGVyIGJvcmRlci15ZWxsb3ctNjAwIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0xMDAwIHotNDBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTUgdy01IG1yLTJcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTEyIDl2Mm0wIDRoLjAxbS02LjkzOCA0aDEzLjg1NmMxLjU0IDAgMi41MDItMS42NjcgMS43MzItM0wxMy43MzIgNGMtLjc3LTEuMzMzLTIuNjk0LTEuMzMzLTMuNDY0IDBMMy4zNCAxNmMtLjc3IDEuMzMzLjE5MiAzIDEuNzMyIDN6XCIgLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPHNwYW4+U2Vzc2lvbiB3YXMgcGFydGlhbGx5IHJlY292ZXJlZCBkdWUgdG8gZGF0YSBjb3JydXB0aW9uPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC8+XG4gICAgKTtcbiAgfVxuICBcbiAgLy8gU2hvdyBhIGJyaWVmIGZsYXNoIG5vdGlmaWNhdGlvbiB3aGVuIHN0YXRlIGlzIGh5ZHJhdGVkIGJ1dCBub3Qgb24gaW5pdGlhbCBsb2FkXG4gIGlmIChzaG93SHlkcmF0aW9uTm90aWNlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDw+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgYm90dG9tLTQgcmlnaHQtNCBiZy1ncmF5LTkwMCB0ZXh0LWdyZWVuLTQwMCBweC00IHB5LTIgcm91bmRlZCBzaGFkb3ctbGcgXG4gICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0xMDAwIHotNDBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTUgdy01IG1yLTJcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTUgMTNsNCA0TDE5IDdcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8c3Bhbj5TZXNzaW9uIHJlc3RvcmVkIHN1Y2Nlc3NmdWxseTwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvPlxuICAgICk7XG4gIH1cbiAgXG4gIC8vIFNob3cgY3Jvc3MtdGFiIHN5bmMgbm90aWZpY2F0aW9uXG4gIGlmIChzaG93U3luY05vdGljZSkge1xuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGJvdHRvbS00IHJpZ2h0LTQgYmctZ3JheS04MDAgdGV4dC1ibHVlLTQwMCBweC00IHB5LTIgcm91bmRlZCBzaGFkb3ctbGcgXG4gICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0zMDAgei00MCBib3JkZXIgYm9yZGVyLWJsdWUtNjAwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3NOYW1lPVwiaC01IHctNSBtci0yIGFuaW1hdGUtcHVsc2VcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTQgNHY1aC41ODJtMTUuMzU2IDJBOC4wMDEgOC4wMDEgMCAwMDQuNTgyIDltMCAwSDltMTEgMTF2LTVoLS41ODFtMCAwYTguMDAzIDguMDAzIDAgMDEtMTUuMzU3LTJtMTUuMzU3IDJIMTVcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8c3Bhbj5TeW5jaW5nIHN0YXRlIGZyb20gYW5vdGhlciB0YWIuLi48L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8Lz5cbiAgICApO1xuICB9XG5cbiAgLy8gRGVmYXVsdCByZW5kZXJcbiAgcmV0dXJuIDw+e2NoaWxkcmVufTwvPjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFN0YXRlTG9hZGVyO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VDYWxsYmFjayIsInVzZUFwcFN0YXRlIiwiU3RhdGVCYWNrdXBTZXJ2aWNlIiwidXNlQXV0aCIsIlN0YXRlTG9hZGVyIiwiY2hpbGRyZW4iLCJpc1N0YXRlTG9hZGluZyIsImlzU3RhdGVIeWRyYXRlZCIsImlzU3RhdGVSZWNvdmVyZWQiLCJpc1N0YXRlU3luY2luZyIsImRpc3BhdGNoIiwidXNlciIsImlzQXV0aGVudGljYXRlZCIsInNob3dTeW5jTm90aWNlIiwic2V0U2hvd1N5bmNOb3RpY2UiLCJzaG93SHlkcmF0aW9uTm90aWNlIiwic2V0U2hvd0h5ZHJhdGlvbk5vdGljZSIsInNob3dSZWNvdmVyeUF0dGVtcHQiLCJzZXRTaG93UmVjb3ZlcnlBdHRlbXB0IiwiaXNJbml0aWFsTW91bnQiLCJiYWNrdXBTZXJ2aWNlIiwicmVjb3ZlcnlBdHRlbXB0TWFkZSIsInRpbWVyIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsInNlcnZpY2UiLCJnZXRJbnN0YW5jZSIsImN1cnJlbnQiLCJpbml0aWFsaXplIiwidGhlbiIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJzdG9wUGVyaW9kaWNCYWNrdXAiLCJhdHRlbXB0U3RhdGVSZWNvdmVyeSIsInJlY292ZXJlZFN0YXRlIiwiYXR0ZW1wdFJlY292ZXJ5IiwidHlwZSIsInBheWxvYWQiLCJkaXYiLCJjbGFzc05hbWUiLCJoMyIsInAiLCJzdmciLCJ4bWxucyIsImZpbGwiLCJ2aWV3Qm94Iiwic3Ryb2tlIiwicGF0aCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZVdpZHRoIiwiZCIsInNwYW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/StateLoader.tsx\n");

/***/ }),

/***/ "./context/AppStateContext.tsx":
/*!*************************************!*\
  !*** ./context/AppStateContext.tsx ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppStateProvider: () => (/* binding */ AppStateProvider),\n/* harmony export */   useAppState: () => (/* binding */ useAppState)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_StatePersistence__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/StatePersistence */ \"./utils/StatePersistence.ts\");\n/* harmony import */ var _components_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/AuthContext */ \"./components/AuthContext.tsx\");\n\n\n\n\n// Initial state object\nconst initialState = {\n    timestamp: Date.now(),\n    userSession: {},\n    authSession: {},\n    // Standard chatContext from DynamicStateSnapshot\n    chatContext: {\n        currentConversationId: undefined,\n        draftMessage: '',\n        lastMessageTimestamp: 0\n    },\n    // Extended chat state\n    chatState: {\n        activeSessions: [],\n        sessions: {},\n        draftMessages: {}\n    },\n    pageState: {},\n    widgetStates: {},\n    // State metadata\n    isHydrated: false,\n    isLoading: false,\n    lastSaved: 0,\n    // Extended state\n    tradingState: {},\n    walletState: {},\n    socialState: {},\n    uiState: {\n        darkMode: true,\n        sidebarOpen: true\n    },\n    xfeed: {\n        followedAccounts: [],\n        lastUpdated: undefined\n    }\n};\n// State reducer\nfunction appStateReducer(state, action) {\n    switch(action.type){\n        case 'SET_TRADING_STATE':\n            return {\n                ...state,\n                tradingState: {\n                    ...state.tradingState,\n                    ...action.payload\n                }\n            };\n        case 'SET_WALLET_STATE':\n            return {\n                ...state,\n                walletState: {\n                    ...state.walletState,\n                    ...action.payload\n                }\n            };\n        case 'SET_CHAT_STATE':\n            return {\n                ...state,\n                chatState: {\n                    ...state.chatState,\n                    ...action.payload\n                }\n            };\n        case 'SET_SOCIAL_STATE':\n            return {\n                ...state,\n                socialState: {\n                    ...state.socialState,\n                    ...action.payload\n                }\n            };\n        case 'SET_UI_STATE':\n            return {\n                ...state,\n                uiState: {\n                    ...state.uiState,\n                    ...action.payload\n                }\n            };\n        case 'SET_PAGE_STATE':\n            return {\n                ...state,\n                pageState: {\n                    ...state.pageState,\n                    ...action.payload\n                }\n            };\n        case 'SET_WIDGET_STATES':\n            return {\n                ...state,\n                widgetStates: {\n                    ...state.widgetStates,\n                    ...action.payload\n                }\n            };\n        case 'SET_CHAT_CONTEXT':\n            return {\n                ...state,\n                chatContext: {\n                    ...state.chatContext,\n                    ...action.payload\n                }\n            };\n        case 'SET_USER_SESSION':\n            return {\n                ...state,\n                userSession: {\n                    ...state.userSession,\n                    ...action.payload\n                }\n            };\n        case 'UPDATE_AUTH':\n            const { user, token } = action.payload;\n            return {\n                ...state,\n                userSession: {\n                    ...state.userSession,\n                    token: token || '',\n                    username: user?.username || ''\n                },\n                authSession: {\n                    ...state.authSession,\n                    token: token || '',\n                    expiresAt: token ? Math.floor(Date.now() / 1000) + 24 * 60 * 60 : undefined\n                }\n            };\n        case 'UPDATE_XFEED':\n            return {\n                ...state,\n                xfeed: {\n                    ...state.xfeed,\n                    ...action.payload,\n                    lastUpdated: Date.now()\n                }\n            };\n        case 'HYDRATE_STATE':\n            return {\n                ...action.payload\n            };\n        case 'RESET_STATE':\n            return initialState;\n        // Compatibility aliases\n        case 'HYDRATE':\n            return {\n                ...action.payload\n            };\n        case 'RESET':\n            return initialState;\n        default:\n            return state;\n    }\n}\nconst AppStateContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nfunction AppStateProvider({ children }) {\n    const [state, dispatch] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useReducer)(appStateReducer, initialState);\n    const [isStateLoading, setIsStateLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [isStateHydrated, setIsStateHydrated] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isStateRecovered, setIsStateRecovered] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isStateSyncing, setIsStateSyncing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const isUpdatingFromStorage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    // Get auth state from AuthContext\n    const { user, isAuthenticated } = (0,_components_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    // Sync auth state with AppState\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AppStateProvider.useEffect\": ()=>{\n            dispatch({\n                type: 'UPDATE_AUTH',\n                payload: {\n                    user: isAuthenticated ? user : null,\n                    token: isAuthenticated ? localStorage.getItem('authToken') : null\n                }\n            });\n        }\n    }[\"AppStateProvider.useEffect\"], [\n        user,\n        isAuthenticated\n    ]);\n    // Hydrate state from storage on initial load\n    const hydrateFromStorage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"AppStateProvider.useCallback[hydrateFromStorage]\": async (navigate)=>{\n            try {\n                setIsStateLoading(true);\n                // Get the stored state using the synchronous retrieveSnapshot method\n                const storedState = _utils_StatePersistence__WEBPACK_IMPORTED_MODULE_2__[\"default\"].retrieveSnapshot();\n                if (!storedState) {\n                    console.log('No stored state found');\n                    setIsStateHydrated(true);\n                    return;\n                }\n                console.log('Hydrating state from storage:', storedState);\n                // Create a clean state object with proper defaults\n                const hydratedState = {\n                    // Required fields from AppState\n                    timestamp: storedState.timestamp || Date.now(),\n                    isHydrated: true,\n                    lastSaved: 0,\n                    // Map user session\n                    userSession: {\n                        token: storedState.userSession?.token || '',\n                        username: storedState.userSession?.username || ''\n                    },\n                    // Map chat context (required by DynamicStateSnapshot)\n                    chatContext: {\n                        currentConversationId: storedState.chatContext?.currentConversationId,\n                        draftMessage: storedState.chatContext?.draftMessage || '',\n                        lastMessageTimestamp: storedState.chatContext?.lastMessageTimestamp || 0\n                    },\n                    // Map page state\n                    pageState: {\n                        lastVisitedPath: storedState.pageState?.lastVisitedPath || '/',\n                        scrollPositions: storedState.pageState?.scrollPositions || {}\n                    },\n                    // Map widget states\n                    widgetStates: {\n                        tradingPositions: storedState.widgetStates?.tradingPositions || [],\n                        walletBalance: storedState.widgetStates?.walletBalance || 0\n                    },\n                    // Map extended chat state\n                    chatState: {\n                        activeSessions: storedState.chatState?.activeSessions || [],\n                        currentSessionId: storedState.chatState?.currentSessionId,\n                        sessions: storedState.chatState?.sessions || {},\n                        draftMessages: storedState.chatState?.draftMessages || {}\n                    },\n                    // Map trading state\n                    tradingState: storedState.tradingState ? {\n                        selectedToken: storedState.tradingState.selectedToken,\n                        watchlist: storedState.tradingState.watchlist || [],\n                        tradeHistory: storedState.tradingState.tradeHistory || [],\n                        tradeForm: storedState.tradingState.tradeForm,\n                        resolution: storedState.tradingState.resolution,\n                        search: storedState.tradingState.search,\n                        positions: storedState.tradingState.positions || []\n                    } : {},\n                    // Map wallet state\n                    walletState: storedState.walletState ? {\n                        connectedWallets: storedState.walletState.connectedWallets || [],\n                        transactions: storedState.walletState.transactions || []\n                    } : {},\n                    // Map social state\n                    socialState: storedState.socialState ? {\n                        posts: storedState.socialState.posts || [],\n                        following: storedState.socialState.following || [],\n                        notifications: storedState.socialState.notifications || []\n                    } : {},\n                    // Map UI state with defaults\n                    uiState: {\n                        darkMode: storedState.uiState?.darkMode ?? true,\n                        sidebarOpen: storedState.uiState?.sidebarOpen ?? true,\n                        activeTabs: storedState.uiState?.activeTabs || {}\n                    },\n                    // Initialize xfeed with default values since it's not in DynamicStateSnapshot\n                    xfeed: {\n                        followedAccounts: [],\n                        lastUpdated: undefined\n                    }\n                };\n                // Apply the hydrated state\n                dispatch({\n                    type: 'HYDRATE_STATE',\n                    payload: hydratedState\n                });\n                // Handle navigation if needed\n                if (navigate && hydratedState.pageState?.lastVisitedPath) {\n                    navigate(hydratedState.pageState.lastVisitedPath);\n                    // Restore scroll position after a small delay\n                    if (hydratedState.pageState.scrollPositions) {\n                        setTimeout({\n                            \"AppStateProvider.useCallback[hydrateFromStorage]\": ()=>{\n                                const scrollY = hydratedState.pageState?.scrollPositions?.[hydratedState.pageState.lastVisitedPath || ''];\n                                if (typeof scrollY === 'number') {\n                                    window.scrollTo(0, scrollY);\n                                }\n                            }\n                        }[\"AppStateProvider.useCallback[hydrateFromStorage]\"], 100);\n                    }\n                }\n                // Check for active session in localStorage\n                const activeSessionId = localStorage.getItem('activeSessionId');\n                if (activeSessionId && !hydratedState.chatContext?.currentConversationId) {\n                    dispatch({\n                        type: 'SET_CHAT_CONTEXT',\n                        payload: {\n                            ...hydratedState.chatContext,\n                            currentConversationId: activeSessionId\n                        }\n                    });\n                }\n                // Mark as hydrated\n                setIsStateHydrated(true);\n            } catch (error) {\n                console.error('Error hydrating state:', error);\n                // Even if there's an error, we should mark as hydrated to prevent infinite loading\n                setIsStateHydrated(true);\n            } finally{\n                setIsStateLoading(false);\n            }\n        }\n    }[\"AppStateProvider.useCallback[hydrateFromStorage]\"], []);\n    // Initial hydration on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AppStateProvider.useEffect\": ()=>{\n            // Set loading state\n            dispatch({\n                type: 'SET_UI_STATE',\n                payload: {\n                    isLoading: true\n                }\n            });\n            // Small delay to allow UI to render loading state\n            const timer = setTimeout({\n                \"AppStateProvider.useEffect.timer\": ()=>{\n                    hydrateFromStorage();\n                    dispatch({\n                        type: 'SET_UI_STATE',\n                        payload: {\n                            isLoading: false\n                        }\n                    });\n                }\n            }[\"AppStateProvider.useEffect.timer\"], 300);\n            return ({\n                \"AppStateProvider.useEffect\": ()=>clearTimeout(timer)\n            })[\"AppStateProvider.useEffect\"];\n        }\n    }[\"AppStateProvider.useEffect\"], [\n        hydrateFromStorage\n    ]);\n    // Listen for changes from other tabs\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AppStateProvider.useEffect\": ()=>{\n            const handleStorageChange = {\n                \"AppStateProvider.useEffect.handleStorageChange\": (event)=>{\n                    // Only process events for our storage key\n                    const STORAGE_KEY = 'GRACE_DYNAMIC_SNAPSHOT'; // Must match the key in StatePersistenceManager\n                    if (event.key === STORAGE_KEY) {\n                        // Prevent processing our own updates\n                        if (isUpdatingFromStorage.current) {\n                            return;\n                        }\n                        console.log('State changed in another tab, synchronizing...');\n                        try {\n                            // Update flag to prevent circular updates\n                            isUpdatingFromStorage.current = true;\n                            // Parse new state from storage\n                            const newState = event.newValue ? JSON.parse(event.newValue) : null;\n                            // Validate state before applying\n                            if (newState && typeof newState === 'object' && newState.timestamp) {\n                                // Signal that we're syncing from another tab\n                                setIsStateSyncing(true);\n                                // Only apply if the timestamp is newer\n                                if (!state.timestamp || newState.timestamp > state.timestamp) {\n                                    dispatch({\n                                        type: 'HYDRATE_STATE',\n                                        payload: newState\n                                    });\n                                    console.log('State synchronized from another tab');\n                                }\n                            }\n                            // Reset syncing state after a delay\n                            setTimeout({\n                                \"AppStateProvider.useEffect.handleStorageChange\": ()=>setIsStateSyncing(false)\n                            }[\"AppStateProvider.useEffect.handleStorageChange\"], 1000);\n                        } catch (error) {\n                            console.error('Error synchronizing state from another tab:', error);\n                        } finally{\n                            // Reset flag after a short delay\n                            setTimeout({\n                                \"AppStateProvider.useEffect.handleStorageChange\": ()=>{\n                                    isUpdatingFromStorage.current = false;\n                                }\n                            }[\"AppStateProvider.useEffect.handleStorageChange\"], 100);\n                        }\n                    }\n                }\n            }[\"AppStateProvider.useEffect.handleStorageChange\"];\n            // Add event listener for storage events\n            window.addEventListener('storage', handleStorageChange);\n            // Cleanup event listener on unmount\n            return ({\n                \"AppStateProvider.useEffect\": ()=>{\n                    window.removeEventListener('storage', handleStorageChange);\n                }\n            })[\"AppStateProvider.useEffect\"];\n        }\n    }[\"AppStateProvider.useEffect\"], [\n        state.timestamp\n    ]);\n    // Save state to storage whenever it changes with debounce to prevent race conditions\n    const debouncedSaveTimeout = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const lastSavedTimestamp = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AppStateProvider.useEffect\": ()=>{\n            // Skip initial render to avoid overwriting with empty state\n            // Only proceed if we have some meaningful state to save\n            const hasContent = Object.keys(state.tradingState || {}).length > 0 || Object.keys(state.walletState || {}).length > 0 || Object.keys(state.chatContext || {}).length > 0 || Object.keys(state.chatState?.sessions || {}).length > 0;\n            if (hasContent) {\n                // Clear any existing timeout to debounce frequent updates\n                if (debouncedSaveTimeout.current !== null) {\n                    clearTimeout(debouncedSaveTimeout.current);\n                }\n                // Debounce state saves to prevent excessive writes and race conditions\n                debouncedSaveTimeout.current = window.setTimeout({\n                    \"AppStateProvider.useEffect\": ()=>{\n                        // Only save if we're not currently processing an update from storage\n                        if (!isUpdatingFromStorage.current) {\n                            // Don't save too frequently - at most once every 2 seconds\n                            const now = Date.now();\n                            if (now - lastSavedTimestamp.current > 2000) {\n                                lastSavedTimestamp.current = now;\n                                // Ensure timestamp is updated\n                                const stateToSave = {\n                                    ...state,\n                                    timestamp: now\n                                };\n                                // Add metadata for debugging\n                                if (state.chatContext?.currentConversationId) {\n                                    console.log(`Saving state with active conversation: ${state.chatContext.currentConversationId}`);\n                                }\n                                try {\n                                    ({\n                                        \"AppStateProvider.useEffect\": async ()=>{\n                                            try {\n                                                await _utils_StatePersistence__WEBPACK_IMPORTED_MODULE_2__[\"default\"].captureSnapshot(stateToSave);\n                                                console.log('State saved to localStorage', new Date().toISOString());\n                                                // Also ensure the activeSessionId is set in localStorage if we have a current conversation\n                                                if (state.chatContext?.currentConversationId) {\n                                                    localStorage.setItem('activeSessionId', state.chatContext.currentConversationId);\n                                                }\n                                            } catch (error) {\n                                                console.error('Error saving state to localStorage:', error);\n                                            }\n                                        }\n                                    })[\"AppStateProvider.useEffect\"]();\n                                } catch (error) {\n                                    console.error('Error in state persistence flow:', error);\n                                }\n                            }\n                        }\n                        debouncedSaveTimeout.current = null;\n                    }\n                }[\"AppStateProvider.useEffect\"], 300); // 300ms debounce time\n            }\n            // Cleanup timeout on unmount\n            return ({\n                \"AppStateProvider.useEffect\": ()=>{\n                    if (debouncedSaveTimeout.current !== null) {\n                        clearTimeout(debouncedSaveTimeout.current);\n                    }\n                }\n            })[\"AppStateProvider.useEffect\"];\n        }\n    }[\"AppStateProvider.useEffect\"], [\n        state\n    ]);\n    const contextValue = {\n        state,\n        dispatch,\n        isStateLoading,\n        isStateHydrated,\n        isStateRecovered,\n        isStateSyncing,\n        hydrateFromStorage\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AppStateContext.Provider, {\n        value: contextValue,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/context/AppStateContext.tsx\",\n        lineNumber: 548,\n        columnNumber: 5\n    }, this);\n}\n// Custom hook for using the app state\nfunction useAppState() {\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AppStateContext);\n    if (context === undefined) {\n        throw new Error('useAppState must be used within an AppStateProvider');\n    }\n    return context;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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REFDZDFCLFFBQVEwQixLQUFLLENBQUMsdUNBQXVDQTs0Q0FDdkQ7d0NBQ0Y7O2dDQUNGLEVBQUUsT0FBT0EsT0FBTztvQ0FDZDFCLFFBQVEwQixLQUFLLENBQUMsb0NBQW9DQTtnQ0FDcEQ7NEJBQ0Y7d0JBQ0Y7d0JBQ0FjLHFCQUFxQlAsT0FBTyxHQUFHO29CQUNqQztpREFBRyxNQUFNLHNCQUFzQjtZQUNqQztZQUVBLDZCQUE2QjtZQUM3Qjs4Q0FBTztvQkFDTCxJQUFJTyxxQkFBcUJQLE9BQU8sS0FBSyxNQUFNO3dCQUN6Q0wsYUFBYVkscUJBQXFCUCxPQUFPO29CQUMzQztnQkFDRjs7UUFDRjtxQ0FBRztRQUFDL0Q7S0FBTTtJQUdWLE1BQU1nRixlQUFvQztRQUN4Q2hGO1FBQ0FhO1FBQ0FDO1FBQ0FFO1FBQ0FFO1FBQ0FFO1FBQ0FNO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQ2hCLGdCQUFnQnVFLFFBQVE7UUFBQ0MsT0FBT0Y7a0JBQzlCcEU7Ozs7OztBQUdQO0FBRUEsc0NBQXNDO0FBQy9CLFNBQVN1RTtJQUNkLE1BQU1DLFVBQVUxSCxpREFBVUEsQ0FBQ2dEO0lBQzNCLElBQUkwRSxZQUFZMUcsV0FBVztRQUN6QixNQUFNLElBQUkyRyxNQUFNO0lBQ2xCO0lBQ0EsT0FBT0Q7QUFDVCIsInNvdXJjZXMiOlsiL1VzZXJzL3dvbmthc3dvcmxkL0Rvd25sb2Fkcy9ncmFjZS1wcm9qZWN0L3NyYy91aS9jb250ZXh0L0FwcFN0YXRlQ29udGV4dC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVJlZHVjZXIsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSwgUmVhY3ROb2RlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBTdGF0ZVBlcnNpc3RlbmNlTWFuYWdlciwgeyBEeW5hbWljU3RhdGVTbmFwc2hvdCB9IGZyb20gJy4uL3V0aWxzL1N0YXRlUGVyc2lzdGVuY2UnO1xuaW1wb3J0IHsgTmF2aWdhdGVGdW5jdGlvbiB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQXV0aENvbnRleHQnO1xuXG4vLyBFeHRlbmQgdGhlIER5bmFtaWNTdGF0ZVNuYXBzaG90IGludGVyZmFjZSB0byBpbmNsdWRlIG91ciBhZGRpdGlvbmFsIGFwcCBzdGF0ZVxuLy8gT3VyIGV4dGVuZGVkIGFwcCBzdGF0ZSBpbnRlcmZhY2UgdGhhdCBtYWludGFpbnMgY29tcGF0aWJpbGl0eSB3aXRoIER5bmFtaWNTdGF0ZVNuYXBzaG90XG5leHBvcnQgaW50ZXJmYWNlIEFwcFN0YXRlIHtcbiAgLy8gRnJvbSBEeW5hbWljU3RhdGVTbmFwc2hvdCBiYXNlXG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICB1c2VyU2Vzc2lvbjoge1xuICAgIHRva2VuPzogc3RyaW5nO1xuICAgIHVzZXJuYW1lPzogc3RyaW5nO1xuICB9O1xuICBwYWdlU3RhdGU6IHtcbiAgICBsYXN0VmlzaXRlZFBhdGg/OiBzdHJpbmc7XG4gICAgc2Nyb2xsUG9zaXRpb25zPzogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgfTtcbiAgd2lkZ2V0U3RhdGVzOiB7XG4gICAgdHJhZGluZ1Bvc2l0aW9ucz86IGFueVtdO1xuICAgIHdhbGxldEJhbGFuY2U/OiBudW1iZXI7XG4gIH07XG4gIFxuICAvLyBDb3JlIER5bmFtaWNTdGF0ZVNuYXBzaG90IGNoYXRDb250ZXh0IC0gd2UgbXVzdCBtYWludGFpbiB0aGlzIGV4YWN0IHN0cnVjdHVyZVxuICBjaGF0Q29udGV4dDoge1xuICAgIGN1cnJlbnRDb252ZXJzYXRpb25JZD86IHN0cmluZztcbiAgICBkcmFmdE1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgbGFzdE1lc3NhZ2VUaW1lc3RhbXA/OiBudW1iZXI7XG4gIH07XG4gIFxuICAvLyBBcHBsaWNhdGlvbiBzdGF0ZSBtZXRhZGF0YVxuICBpc0h5ZHJhdGVkPzogYm9vbGVhbjtcbiAgaXNMb2FkaW5nPzogYm9vbGVhbjtcbiAgbGFzdFNhdmVkPzogbnVtYmVyO1xuICBcbiAgLy8gQXV0aCBhbmQgdXNlciBzZXNzaW9uIHN0YXRlIC0gYWxpZ25zIHdpdGggQXV0aENvbnRleHRcbiAgYXV0aFNlc3Npb24/OiB7XG4gICAgdG9rZW4/OiBzdHJpbmc7XG4gICAgZXhwaXJlc0F0PzogbnVtYmVyO1xuICAgIHJlZnJlc2hUb2tlbj86IHN0cmluZztcbiAgfTtcbiAgXG4gIC8vIFRyYWRpbmcgc3RhdGUgZXh0ZW5zaW9uc1xuICB0cmFkaW5nU3RhdGU/OiB7XG4gICAgc2VsZWN0ZWRUb2tlbj86IGFueTtcbiAgICB3YXRjaGxpc3Q/OiBzdHJpbmdbXTtcbiAgICB0cmFkZUhpc3Rvcnk/OiBhbnlbXTtcbiAgICB0cmFkZUZvcm0/OiBhbnk7XG4gICAgcmVzb2x1dGlvbj86IHN0cmluZztcbiAgICBzZWFyY2g/OiBzdHJpbmc7XG4gICAgcG9zaXRpb25zPzogYW55W107XG4gIH07XG4gIFxuICAvLyBTb2NpYWwgbWVkaWEgZmVlZCBzZXR0aW5nc1xuICB4ZmVlZD86IHtcbiAgICBmb2xsb3dlZEFjY291bnRzOiBzdHJpbmdbXTtcbiAgICBsYXN0VXBkYXRlZD86IG51bWJlcjtcbiAgfTtcbiAgXG4gIC8vIFdhbGxldCBzdGF0ZSBleHRlbnNpb25zXG4gIHdhbGxldFN0YXRlPzoge1xuICAgIGNvbm5lY3RlZFdhbGxldHM/OiBhbnlbXTtcbiAgICB0cmFuc2FjdGlvbnM/OiBhbnlbXTtcbiAgfTtcbiAgXG4gIC8vIEV4dGVuZGVkIGNoYXQgc3RhdGUgLSBzZXBhcmF0ZSBmcm9tIHRoZSBiYXNlIGNoYXRDb250ZXh0IHRvIGF2b2lkIHR5cGUgY29uZmxpY3RzXG4gIC8vIFdpbGwgYmUgc3luY2VkIHdpdGggdGhlIG1haW4gY2hhdENvbnRleHQgYXMgbmVlZGVkXG4gIGNoYXRTdGF0ZT86IHtcbiAgICBhY3RpdmVTZXNzaW9ucz86IHN0cmluZ1tdO1xuICAgIGN1cnJlbnRTZXNzaW9uSWQ/OiBzdHJpbmc7XG4gICAgc2Vzc2lvbnM/OiB7XG4gICAgICBbc2Vzc2lvbklkOiBzdHJpbmddOiB7XG4gICAgICAgIGlkOiBzdHJpbmc7XG4gICAgICAgIHRvcGljPzogc3RyaW5nO1xuICAgICAgICBuYW1lPzogc3RyaW5nO1xuICAgICAgICBjcmVhdGVkX2F0Pzogc3RyaW5nO1xuICAgICAgICB1cGRhdGVkX2F0Pzogc3RyaW5nO1xuICAgICAgICBwcmV2aWV3X21lc3NhZ2U/OiBzdHJpbmc7XG4gICAgICAgIG1lc3NhZ2VzPzogQXJyYXk8e1xuICAgICAgICAgIGlkOiBzdHJpbmc7XG4gICAgICAgICAgY29udGVudDogc3RyaW5nO1xuICAgICAgICAgIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ3N5c3RlbSc7XG4gICAgICAgICAgdGltZXN0YW1wOiBzdHJpbmc7XG4gICAgICAgIH0+O1xuICAgICAgICB1bnJlYWRfY291bnQ/OiBudW1iZXI7XG4gICAgICAgIHNjcm9sbFBvc2l0aW9uPzogbnVtYmVyO1xuICAgICAgfTtcbiAgICB9O1xuICAgIGRyYWZ0TWVzc2FnZXM/OiB7XG4gICAgICBbc2Vzc2lvbklkOiBzdHJpbmddOiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbiAgXG4gIC8vIFNvY2lhbCBzdGF0ZVxuICBzb2NpYWxTdGF0ZT86IHtcbiAgICBwb3N0cz86IGFueVtdO1xuICAgIGZvbGxvd2luZz86IHN0cmluZ1tdO1xuICAgIG5vdGlmaWNhdGlvbnM/OiBhbnlbXTtcbiAgfTtcbiAgXG4gIC8vIFVJIHN0YXRlXG4gIHVpU3RhdGU/OiB7XG4gICAgZGFya01vZGU/OiBib29sZWFuO1xuICAgIHNpZGViYXJPcGVuPzogYm9vbGVhbjtcbiAgICBhY3RpdmVUYWJzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgfTtcbn1cblxuLy8gSW5pdGlhbCBzdGF0ZSBvYmplY3RcbmNvbnN0IGluaXRpYWxTdGF0ZTogQXBwU3RhdGUgPSB7XG4gIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgdXNlclNlc3Npb246IHt9LFxuICBhdXRoU2Vzc2lvbjoge30sXG4gIC8vIFN0YW5kYXJkIGNoYXRDb250ZXh0IGZyb20gRHluYW1pY1N0YXRlU25hcHNob3RcbiAgY2hhdENvbnRleHQ6IHtcbiAgICBjdXJyZW50Q29udmVyc2F0aW9uSWQ6IHVuZGVmaW5lZCxcbiAgICBkcmFmdE1lc3NhZ2U6ICcnLFxuICAgIGxhc3RNZXNzYWdlVGltZXN0YW1wOiAwXG4gIH0sXG4gIC8vIEV4dGVuZGVkIGNoYXQgc3RhdGVcbiAgY2hhdFN0YXRlOiB7XG4gICAgYWN0aXZlU2Vzc2lvbnM6IFtdLFxuICAgIHNlc3Npb25zOiB7fSxcbiAgICBkcmFmdE1lc3NhZ2VzOiB7fVxuICB9LFxuICBwYWdlU3RhdGU6IHt9LFxuICB3aWRnZXRTdGF0ZXM6IHt9LFxuICAvLyBTdGF0ZSBtZXRhZGF0YVxuICBpc0h5ZHJhdGVkOiBmYWxzZSxcbiAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgbGFzdFNhdmVkOiAwLFxuICAvLyBFeHRlbmRlZCBzdGF0ZVxuICB0cmFkaW5nU3RhdGU6IHt9LFxuICB3YWxsZXRTdGF0ZToge30sXG4gIHNvY2lhbFN0YXRlOiB7fSxcbiAgdWlTdGF0ZToge1xuICAgIGRhcmtNb2RlOiB0cnVlLFxuICAgIHNpZGViYXJPcGVuOiB0cnVlLFxuICB9LFxuICB4ZmVlZDoge1xuICAgIGZvbGxvd2VkQWNjb3VudHM6IFtdLFxuICAgIGxhc3RVcGRhdGVkOiB1bmRlZmluZWRcbiAgfVxufTtcblxuLy8gQWN0aW9uIHR5cGVzXG50eXBlIEFjdGlvblR5cGUgPVxuICB8IHsgdHlwZTogJ1NFVF9UUkFESU5HX1NUQVRFJzsgcGF5bG9hZDogYW55IH1cbiAgfCB7IHR5cGU6ICdTRVRfV0FMTEVUX1NUQVRFJzsgcGF5bG9hZDogYW55IH1cbiAgfCB7IHR5cGU6ICdTRVRfQ0hBVF9DT05URVhUJzsgcGF5bG9hZDogYW55IH1cbiAgfCB7IHR5cGU6ICdTRVRfQ0hBVF9TVEFURSc7IHBheWxvYWQ6IGFueSB9XG4gIHwgeyB0eXBlOiAnU0VUX1NPQ0lBTF9TVEFURSc7IHBheWxvYWQ6IGFueSB9XG4gIHwgeyB0eXBlOiAnU0VUX1VJX1NUQVRFJzsgcGF5bG9hZDogYW55IH1cbiAgfCB7IHR5cGU6ICdTRVRfUEFHRV9TVEFURSc7IHBheWxvYWQ6IGFueSB9XG4gIHwgeyB0eXBlOiAnU0VUX1dJREdFVF9TVEFURVMnOyBwYXlsb2FkOiBhbnkgfVxuICB8IHsgdHlwZTogJ1NFVF9VU0VSX1NFU1NJT04nOyBwYXlsb2FkOiBhbnkgfVxuICB8IHsgdHlwZTogJ1VQREFURV9YRkVFRCc7IHBheWxvYWQ6IGFueSB9XG4gIHwgeyB0eXBlOiAnSFlEUkFURV9TVEFURSc7IHBheWxvYWQ6IEFwcFN0YXRlIH1cbiAgfCB7IHR5cGU6ICdSRVNFVF9TVEFURScgfVxuICB8IHsgdHlwZTogJ0hZRFJBVEUnOyBwYXlsb2FkOiBBcHBTdGF0ZSB9XG4gIHwgeyB0eXBlOiAnUkVTRVQnIH1cbiAgfCB7IHR5cGU6ICdVUERBVEVfQVVUSCc7IHBheWxvYWQ6IHsgdXNlcjogYW55OyB0b2tlbjogc3RyaW5nIHwgbnVsbCB9IH07XG5cbi8vIFN0YXRlIHJlZHVjZXJcbmZ1bmN0aW9uIGFwcFN0YXRlUmVkdWNlcihzdGF0ZTogQXBwU3RhdGUsIGFjdGlvbjogQWN0aW9uVHlwZSk6IEFwcFN0YXRlIHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgJ1NFVF9UUkFESU5HX1NUQVRFJzpcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCB0cmFkaW5nU3RhdGU6IHsgLi4uc3RhdGUudHJhZGluZ1N0YXRlLCAuLi5hY3Rpb24ucGF5bG9hZCB9IH07XG4gICAgY2FzZSAnU0VUX1dBTExFVF9TVEFURSc6XG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgd2FsbGV0U3RhdGU6IHsgLi4uc3RhdGUud2FsbGV0U3RhdGUsIC4uLmFjdGlvbi5wYXlsb2FkIH0gfTtcbiAgICBjYXNlICdTRVRfQ0hBVF9TVEFURSc6XG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgY2hhdFN0YXRlOiB7IC4uLnN0YXRlLmNoYXRTdGF0ZSwgLi4uYWN0aW9uLnBheWxvYWQgfSB9O1xuICAgIGNhc2UgJ1NFVF9TT0NJQUxfU1RBVEUnOlxuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIHNvY2lhbFN0YXRlOiB7IC4uLnN0YXRlLnNvY2lhbFN0YXRlLCAuLi5hY3Rpb24ucGF5bG9hZCB9IH07XG4gICAgY2FzZSAnU0VUX1VJX1NUQVRFJzpcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCB1aVN0YXRlOiB7IC4uLnN0YXRlLnVpU3RhdGUsIC4uLmFjdGlvbi5wYXlsb2FkIH0gfTtcbiAgICBjYXNlICdTRVRfUEFHRV9TVEFURSc6XG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgcGFnZVN0YXRlOiB7IC4uLnN0YXRlLnBhZ2VTdGF0ZSwgLi4uYWN0aW9uLnBheWxvYWQgfSB9O1xuICAgIGNhc2UgJ1NFVF9XSURHRVRfU1RBVEVTJzpcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCB3aWRnZXRTdGF0ZXM6IHsgLi4uc3RhdGUud2lkZ2V0U3RhdGVzLCAuLi5hY3Rpb24ucGF5bG9hZCB9IH07XG4gICAgY2FzZSAnU0VUX0NIQVRfQ09OVEVYVCc6XG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgY2hhdENvbnRleHQ6IHsgLi4uc3RhdGUuY2hhdENvbnRleHQsIC4uLmFjdGlvbi5wYXlsb2FkIH0gfTtcbiAgICBjYXNlICdTRVRfVVNFUl9TRVNTSU9OJzpcbiAgICAgIHJldHVybiB7IC4uLnN0YXRlLCB1c2VyU2Vzc2lvbjogeyAuLi5zdGF0ZS51c2VyU2Vzc2lvbiwgLi4uYWN0aW9uLnBheWxvYWQgfSB9O1xuICAgIGNhc2UgJ1VQREFURV9BVVRIJzpcbiAgICAgIGNvbnN0IHsgdXNlciwgdG9rZW4gfSA9IGFjdGlvbi5wYXlsb2FkO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHVzZXJTZXNzaW9uOiB7XG4gICAgICAgICAgLi4uc3RhdGUudXNlclNlc3Npb24sXG4gICAgICAgICAgdG9rZW46IHRva2VuIHx8ICcnLFxuICAgICAgICAgIHVzZXJuYW1lOiB1c2VyPy51c2VybmFtZSB8fCAnJ1xuICAgICAgICB9LFxuICAgICAgICBhdXRoU2Vzc2lvbjoge1xuICAgICAgICAgIC4uLnN0YXRlLmF1dGhTZXNzaW9uLFxuICAgICAgICAgIHRva2VuOiB0b2tlbiB8fCAnJyxcbiAgICAgICAgICBleHBpcmVzQXQ6IHRva2VuID8gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgKyAoMjQgKiA2MCAqIDYwKSA6IHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICB9O1xuICAgIGNhc2UgJ1VQREFURV9YRkVFRCc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgeGZlZWQ6IHtcbiAgICAgICAgICAuLi5zdGF0ZS54ZmVlZCxcbiAgICAgICAgICAuLi5hY3Rpb24ucGF5bG9hZCxcbiAgICAgICAgICBsYXN0VXBkYXRlZDogRGF0ZS5ub3coKVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIGNhc2UgJ0hZRFJBVEVfU1RBVEUnOlxuICAgICAgcmV0dXJuIHsgLi4uYWN0aW9uLnBheWxvYWQgfTtcbiAgICBjYXNlICdSRVNFVF9TVEFURSc6XG4gICAgICByZXR1cm4gaW5pdGlhbFN0YXRlO1xuICAgIC8vIENvbXBhdGliaWxpdHkgYWxpYXNlc1xuICAgIGNhc2UgJ0hZRFJBVEUnOlxuICAgICAgcmV0dXJuIHsgLi4uYWN0aW9uLnBheWxvYWQgfTtcbiAgICBjYXNlICdSRVNFVCc6XG4gICAgICByZXR1cm4gaW5pdGlhbFN0YXRlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn1cblxuLy8gQ3JlYXRlIGNvbnRleHRcbmludGVyZmFjZSBBcHBTdGF0ZUNvbnRleHRUeXBlIHtcbiAgc3RhdGU6IEFwcFN0YXRlO1xuICBkaXNwYXRjaDogUmVhY3QuRGlzcGF0Y2g8QWN0aW9uVHlwZT47XG4gIGlzU3RhdGVMb2FkaW5nOiBib29sZWFuO1xuICBpc1N0YXRlSHlkcmF0ZWQ6IGJvb2xlYW47XG4gIGlzU3RhdGVSZWNvdmVyZWQ6IGJvb2xlYW47XG4gIGlzU3RhdGVTeW5jaW5nOiBib29sZWFuO1xuICBoeWRyYXRlRnJvbVN0b3JhZ2U6IChuYXZpZ2F0ZT86IE5hdmlnYXRlRnVuY3Rpb24pID0+IFByb21pc2U8dm9pZD47XG59XG5cbmNvbnN0IEFwcFN0YXRlQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8QXBwU3RhdGVDb250ZXh0VHlwZSB8IHVuZGVmaW5lZD4odW5kZWZpbmVkKTtcblxuLy8gUHJvdmlkZXIgY29tcG9uZW50XG5pbnRlcmZhY2UgQXBwU3RhdGVQcm92aWRlclByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFwcFN0YXRlUHJvdmlkZXIoeyBjaGlsZHJlbiB9OiBBcHBTdGF0ZVByb3ZpZGVyUHJvcHMpIHtcbiAgY29uc3QgW3N0YXRlLCBkaXNwYXRjaF0gPSB1c2VSZWR1Y2VyKGFwcFN0YXRlUmVkdWNlciwgaW5pdGlhbFN0YXRlKTtcbiAgY29uc3QgW2lzU3RhdGVMb2FkaW5nLCBzZXRJc1N0YXRlTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2lzU3RhdGVIeWRyYXRlZCwgc2V0SXNTdGF0ZUh5ZHJhdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzU3RhdGVSZWNvdmVyZWQsIHNldElzU3RhdGVSZWNvdmVyZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNTdGF0ZVN5bmNpbmcsIHNldElzU3RhdGVTeW5jaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgaXNVcGRhdGluZ0Zyb21TdG9yYWdlID0gdXNlUmVmKGZhbHNlKTtcbiAgXG4gIC8vIEdldCBhdXRoIHN0YXRlIGZyb20gQXV0aENvbnRleHRcbiAgY29uc3QgeyB1c2VyLCBpc0F1dGhlbnRpY2F0ZWQgfSA9IHVzZUF1dGgoKTtcblxuICAvLyBTeW5jIGF1dGggc3RhdGUgd2l0aCBBcHBTdGF0ZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6ICdVUERBVEVfQVVUSCcsXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIHVzZXI6IGlzQXV0aGVudGljYXRlZCA/IHVzZXIgOiBudWxsLFxuICAgICAgICB0b2tlbjogaXNBdXRoZW50aWNhdGVkID8gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2F1dGhUb2tlbicpIDogbnVsbFxuICAgICAgfVxuICAgIH0pO1xuICB9LCBbdXNlciwgaXNBdXRoZW50aWNhdGVkXSk7XG5cbiAgLy8gSHlkcmF0ZSBzdGF0ZSBmcm9tIHN0b3JhZ2Ugb24gaW5pdGlhbCBsb2FkXG4gIGNvbnN0IGh5ZHJhdGVGcm9tU3RvcmFnZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChuYXZpZ2F0ZT86IE5hdmlnYXRlRnVuY3Rpb24pID0+IHtcbiAgICB0cnkge1xuICAgICAgc2V0SXNTdGF0ZUxvYWRpbmcodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgc3RvcmVkIHN0YXRlIHVzaW5nIHRoZSBzeW5jaHJvbm91cyByZXRyaWV2ZVNuYXBzaG90IG1ldGhvZFxuICAgICAgY29uc3Qgc3RvcmVkU3RhdGUgPSBTdGF0ZVBlcnNpc3RlbmNlTWFuYWdlci5yZXRyaWV2ZVNuYXBzaG90KCk7XG4gICAgICBcbiAgICAgIGlmICghc3RvcmVkU3RhdGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ05vIHN0b3JlZCBzdGF0ZSBmb3VuZCcpO1xuICAgICAgICBzZXRJc1N0YXRlSHlkcmF0ZWQodHJ1ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0h5ZHJhdGluZyBzdGF0ZSBmcm9tIHN0b3JhZ2U6Jywgc3RvcmVkU3RhdGUpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYSBjbGVhbiBzdGF0ZSBvYmplY3Qgd2l0aCBwcm9wZXIgZGVmYXVsdHNcbiAgICAgIGNvbnN0IGh5ZHJhdGVkU3RhdGU6IEFwcFN0YXRlID0ge1xuICAgICAgICAvLyBSZXF1aXJlZCBmaWVsZHMgZnJvbSBBcHBTdGF0ZVxuICAgICAgICB0aW1lc3RhbXA6IHN0b3JlZFN0YXRlLnRpbWVzdGFtcCB8fCBEYXRlLm5vdygpLFxuICAgICAgICBpc0h5ZHJhdGVkOiB0cnVlLFxuICAgICAgICBsYXN0U2F2ZWQ6IDAsIC8vIFdpbGwgYmUgdXBkYXRlZCBvbiBuZXh0IHNhdmVcbiAgICAgICAgXG4gICAgICAgIC8vIE1hcCB1c2VyIHNlc3Npb25cbiAgICAgICAgdXNlclNlc3Npb246IHtcbiAgICAgICAgICB0b2tlbjogc3RvcmVkU3RhdGUudXNlclNlc3Npb24/LnRva2VuIHx8ICcnLFxuICAgICAgICAgIHVzZXJuYW1lOiBzdG9yZWRTdGF0ZS51c2VyU2Vzc2lvbj8udXNlcm5hbWUgfHwgJydcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIE1hcCBjaGF0IGNvbnRleHQgKHJlcXVpcmVkIGJ5IER5bmFtaWNTdGF0ZVNuYXBzaG90KVxuICAgICAgICBjaGF0Q29udGV4dDoge1xuICAgICAgICAgIGN1cnJlbnRDb252ZXJzYXRpb25JZDogc3RvcmVkU3RhdGUuY2hhdENvbnRleHQ/LmN1cnJlbnRDb252ZXJzYXRpb25JZCxcbiAgICAgICAgICBkcmFmdE1lc3NhZ2U6IHN0b3JlZFN0YXRlLmNoYXRDb250ZXh0Py5kcmFmdE1lc3NhZ2UgfHwgJycsXG4gICAgICAgICAgbGFzdE1lc3NhZ2VUaW1lc3RhbXA6IHN0b3JlZFN0YXRlLmNoYXRDb250ZXh0Py5sYXN0TWVzc2FnZVRpbWVzdGFtcCB8fCAwXG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBNYXAgcGFnZSBzdGF0ZVxuICAgICAgICBwYWdlU3RhdGU6IHtcbiAgICAgICAgICBsYXN0VmlzaXRlZFBhdGg6IHN0b3JlZFN0YXRlLnBhZ2VTdGF0ZT8ubGFzdFZpc2l0ZWRQYXRoIHx8ICcvJyxcbiAgICAgICAgICBzY3JvbGxQb3NpdGlvbnM6IHN0b3JlZFN0YXRlLnBhZ2VTdGF0ZT8uc2Nyb2xsUG9zaXRpb25zIHx8IHt9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBNYXAgd2lkZ2V0IHN0YXRlc1xuICAgICAgICB3aWRnZXRTdGF0ZXM6IHtcbiAgICAgICAgICB0cmFkaW5nUG9zaXRpb25zOiBzdG9yZWRTdGF0ZS53aWRnZXRTdGF0ZXM/LnRyYWRpbmdQb3NpdGlvbnMgfHwgW10sXG4gICAgICAgICAgd2FsbGV0QmFsYW5jZTogc3RvcmVkU3RhdGUud2lkZ2V0U3RhdGVzPy53YWxsZXRCYWxhbmNlIHx8IDBcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIE1hcCBleHRlbmRlZCBjaGF0IHN0YXRlXG4gICAgICAgIGNoYXRTdGF0ZToge1xuICAgICAgICAgIGFjdGl2ZVNlc3Npb25zOiBzdG9yZWRTdGF0ZS5jaGF0U3RhdGU/LmFjdGl2ZVNlc3Npb25zIHx8IFtdLFxuICAgICAgICAgIGN1cnJlbnRTZXNzaW9uSWQ6IHN0b3JlZFN0YXRlLmNoYXRTdGF0ZT8uY3VycmVudFNlc3Npb25JZCxcbiAgICAgICAgICBzZXNzaW9uczogc3RvcmVkU3RhdGUuY2hhdFN0YXRlPy5zZXNzaW9ucyB8fCB7fSxcbiAgICAgICAgICBkcmFmdE1lc3NhZ2VzOiBzdG9yZWRTdGF0ZS5jaGF0U3RhdGU/LmRyYWZ0TWVzc2FnZXMgfHwge31cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIE1hcCB0cmFkaW5nIHN0YXRlXG4gICAgICAgIHRyYWRpbmdTdGF0ZTogc3RvcmVkU3RhdGUudHJhZGluZ1N0YXRlID8ge1xuICAgICAgICAgIHNlbGVjdGVkVG9rZW46IHN0b3JlZFN0YXRlLnRyYWRpbmdTdGF0ZS5zZWxlY3RlZFRva2VuLFxuICAgICAgICAgIHdhdGNobGlzdDogc3RvcmVkU3RhdGUudHJhZGluZ1N0YXRlLndhdGNobGlzdCB8fCBbXSxcbiAgICAgICAgICB0cmFkZUhpc3Rvcnk6IHN0b3JlZFN0YXRlLnRyYWRpbmdTdGF0ZS50cmFkZUhpc3RvcnkgfHwgW10sXG4gICAgICAgICAgdHJhZGVGb3JtOiBzdG9yZWRTdGF0ZS50cmFkaW5nU3RhdGUudHJhZGVGb3JtLFxuICAgICAgICAgIHJlc29sdXRpb246IHN0b3JlZFN0YXRlLnRyYWRpbmdTdGF0ZS5yZXNvbHV0aW9uLFxuICAgICAgICAgIHNlYXJjaDogc3RvcmVkU3RhdGUudHJhZGluZ1N0YXRlLnNlYXJjaCxcbiAgICAgICAgICBwb3NpdGlvbnM6IHN0b3JlZFN0YXRlLnRyYWRpbmdTdGF0ZS5wb3NpdGlvbnMgfHwgW11cbiAgICAgICAgfSA6IHt9LFxuICAgICAgICBcbiAgICAgICAgLy8gTWFwIHdhbGxldCBzdGF0ZVxuICAgICAgICB3YWxsZXRTdGF0ZTogc3RvcmVkU3RhdGUud2FsbGV0U3RhdGUgPyB7XG4gICAgICAgICAgY29ubmVjdGVkV2FsbGV0czogc3RvcmVkU3RhdGUud2FsbGV0U3RhdGUuY29ubmVjdGVkV2FsbGV0cyB8fCBbXSxcbiAgICAgICAgICB0cmFuc2FjdGlvbnM6IHN0b3JlZFN0YXRlLndhbGxldFN0YXRlLnRyYW5zYWN0aW9ucyB8fCBbXVxuICAgICAgICB9IDoge30sXG4gICAgICAgIFxuICAgICAgICAvLyBNYXAgc29jaWFsIHN0YXRlXG4gICAgICAgIHNvY2lhbFN0YXRlOiBzdG9yZWRTdGF0ZS5zb2NpYWxTdGF0ZSA/IHtcbiAgICAgICAgICBwb3N0czogc3RvcmVkU3RhdGUuc29jaWFsU3RhdGUucG9zdHMgfHwgW10sXG4gICAgICAgICAgZm9sbG93aW5nOiBzdG9yZWRTdGF0ZS5zb2NpYWxTdGF0ZS5mb2xsb3dpbmcgfHwgW10sXG4gICAgICAgICAgbm90aWZpY2F0aW9uczogc3RvcmVkU3RhdGUuc29jaWFsU3RhdGUubm90aWZpY2F0aW9ucyB8fCBbXVxuICAgICAgICB9IDoge30sXG4gICAgICAgIFxuICAgICAgICAvLyBNYXAgVUkgc3RhdGUgd2l0aCBkZWZhdWx0c1xuICAgICAgICB1aVN0YXRlOiB7XG4gICAgICAgICAgZGFya01vZGU6IHN0b3JlZFN0YXRlLnVpU3RhdGU/LmRhcmtNb2RlID8/IHRydWUsXG4gICAgICAgICAgc2lkZWJhck9wZW46IHN0b3JlZFN0YXRlLnVpU3RhdGU/LnNpZGViYXJPcGVuID8/IHRydWUsXG4gICAgICAgICAgYWN0aXZlVGFiczogc3RvcmVkU3RhdGUudWlTdGF0ZT8uYWN0aXZlVGFicyB8fCB7fVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB4ZmVlZCB3aXRoIGRlZmF1bHQgdmFsdWVzIHNpbmNlIGl0J3Mgbm90IGluIER5bmFtaWNTdGF0ZVNuYXBzaG90XG4gICAgICAgIHhmZWVkOiB7XG4gICAgICAgICAgZm9sbG93ZWRBY2NvdW50czogW10sXG4gICAgICAgICAgbGFzdFVwZGF0ZWQ6IHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBBcHBseSB0aGUgaHlkcmF0ZWQgc3RhdGVcbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogJ0hZRFJBVEVfU1RBVEUnLCBwYXlsb2FkOiBoeWRyYXRlZFN0YXRlIH0pO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgbmF2aWdhdGlvbiBpZiBuZWVkZWRcbiAgICAgIGlmIChuYXZpZ2F0ZSAmJiBoeWRyYXRlZFN0YXRlLnBhZ2VTdGF0ZT8ubGFzdFZpc2l0ZWRQYXRoKSB7XG4gICAgICAgIG5hdmlnYXRlKGh5ZHJhdGVkU3RhdGUucGFnZVN0YXRlLmxhc3RWaXNpdGVkUGF0aCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciBhIHNtYWxsIGRlbGF5XG4gICAgICAgIGlmIChoeWRyYXRlZFN0YXRlLnBhZ2VTdGF0ZS5zY3JvbGxQb3NpdGlvbnMpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbFkgPSBoeWRyYXRlZFN0YXRlLnBhZ2VTdGF0ZT8uc2Nyb2xsUG9zaXRpb25zPy5baHlkcmF0ZWRTdGF0ZS5wYWdlU3RhdGUubGFzdFZpc2l0ZWRQYXRoIHx8ICcnXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2Nyb2xsWSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIHNjcm9sbFkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGFjdGl2ZSBzZXNzaW9uIGluIGxvY2FsU3RvcmFnZVxuICAgICAgY29uc3QgYWN0aXZlU2Vzc2lvbklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZVNlc3Npb25JZCcpO1xuICAgICAgaWYgKGFjdGl2ZVNlc3Npb25JZCAmJiAhaHlkcmF0ZWRTdGF0ZS5jaGF0Q29udGV4dD8uY3VycmVudENvbnZlcnNhdGlvbklkKSB7XG4gICAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgICB0eXBlOiAnU0VUX0NIQVRfQ09OVEVYVCcsXG4gICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgLi4uaHlkcmF0ZWRTdGF0ZS5jaGF0Q29udGV4dCxcbiAgICAgICAgICAgIGN1cnJlbnRDb252ZXJzYXRpb25JZDogYWN0aXZlU2Vzc2lvbklkXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTWFyayBhcyBoeWRyYXRlZFxuICAgICAgc2V0SXNTdGF0ZUh5ZHJhdGVkKHRydWUpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBoeWRyYXRpbmcgc3RhdGU6JywgZXJyb3IpO1xuICAgICAgLy8gRXZlbiBpZiB0aGVyZSdzIGFuIGVycm9yLCB3ZSBzaG91bGQgbWFyayBhcyBoeWRyYXRlZCB0byBwcmV2ZW50IGluZmluaXRlIGxvYWRpbmdcbiAgICAgIHNldElzU3RhdGVIeWRyYXRlZCh0cnVlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNTdGF0ZUxvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8vIEluaXRpYWwgaHlkcmF0aW9uIG9uIG1vdW50XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gU2V0IGxvYWRpbmcgc3RhdGVcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfVUlfU1RBVEUnLCBwYXlsb2FkOiB7IGlzTG9hZGluZzogdHJ1ZSB9IH0pO1xuICAgIFxuICAgIC8vIFNtYWxsIGRlbGF5IHRvIGFsbG93IFVJIHRvIHJlbmRlciBsb2FkaW5nIHN0YXRlXG4gICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGh5ZHJhdGVGcm9tU3RvcmFnZSgpO1xuICAgICAgZGlzcGF0Y2goeyB0eXBlOiAnU0VUX1VJX1NUQVRFJywgcGF5bG9hZDogeyBpc0xvYWRpbmc6IGZhbHNlIH0gfSk7XG4gICAgfSwgMzAwKTtcbiAgICBcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgfSwgW2h5ZHJhdGVGcm9tU3RvcmFnZV0pO1xuICBcbiAgLy8gTGlzdGVuIGZvciBjaGFuZ2VzIGZyb20gb3RoZXIgdGFic1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZVN0b3JhZ2VDaGFuZ2UgPSAoZXZlbnQ6IFN0b3JhZ2VFdmVudCkgPT4ge1xuICAgICAgLy8gT25seSBwcm9jZXNzIGV2ZW50cyBmb3Igb3VyIHN0b3JhZ2Uga2V5XG4gICAgICBjb25zdCBTVE9SQUdFX0tFWSA9ICdHUkFDRV9EWU5BTUlDX1NOQVBTSE9UJzsgLy8gTXVzdCBtYXRjaCB0aGUga2V5IGluIFN0YXRlUGVyc2lzdGVuY2VNYW5hZ2VyXG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBTVE9SQUdFX0tFWSkge1xuICAgICAgICAvLyBQcmV2ZW50IHByb2Nlc3Npbmcgb3VyIG93biB1cGRhdGVzXG4gICAgICAgIGlmIChpc1VwZGF0aW5nRnJvbVN0b3JhZ2UuY3VycmVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ1N0YXRlIGNoYW5nZWQgaW4gYW5vdGhlciB0YWIsIHN5bmNocm9uaXppbmcuLi4nKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBVcGRhdGUgZmxhZyB0byBwcmV2ZW50IGNpcmN1bGFyIHVwZGF0ZXNcbiAgICAgICAgICBpc1VwZGF0aW5nRnJvbVN0b3JhZ2UuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUGFyc2UgbmV3IHN0YXRlIGZyb20gc3RvcmFnZVxuICAgICAgICAgIGNvbnN0IG5ld1N0YXRlID0gZXZlbnQubmV3VmFsdWUgPyBKU09OLnBhcnNlKGV2ZW50Lm5ld1ZhbHVlKSA6IG51bGw7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVmFsaWRhdGUgc3RhdGUgYmVmb3JlIGFwcGx5aW5nXG4gICAgICAgICAgaWYgKG5ld1N0YXRlICYmIHR5cGVvZiBuZXdTdGF0ZSA9PT0gJ29iamVjdCcgJiYgbmV3U3RhdGUudGltZXN0YW1wKSB7XG4gICAgICAgICAgICAvLyBTaWduYWwgdGhhdCB3ZSdyZSBzeW5jaW5nIGZyb20gYW5vdGhlciB0YWJcbiAgICAgICAgICAgIHNldElzU3RhdGVTeW5jaW5nKHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBPbmx5IGFwcGx5IGlmIHRoZSB0aW1lc3RhbXAgaXMgbmV3ZXJcbiAgICAgICAgICAgIGlmICghc3RhdGUudGltZXN0YW1wIHx8IG5ld1N0YXRlLnRpbWVzdGFtcCA+IHN0YXRlLnRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICBkaXNwYXRjaCh7IHR5cGU6ICdIWURSQVRFX1NUQVRFJywgcGF5bG9hZDogbmV3U3RhdGUgfSk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdGF0ZSBzeW5jaHJvbml6ZWQgZnJvbSBhbm90aGVyIHRhYicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZXNldCBzeW5jaW5nIHN0YXRlIGFmdGVyIGEgZGVsYXlcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNldElzU3RhdGVTeW5jaW5nKGZhbHNlKSwgMTAwMCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2hyb25pemluZyBzdGF0ZSBmcm9tIGFub3RoZXIgdGFiOicsIGVycm9yKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAvLyBSZXNldCBmbGFnIGFmdGVyIGEgc2hvcnQgZGVsYXlcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlzVXBkYXRpbmdGcm9tU3RvcmFnZS5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVyIGZvciBzdG9yYWdlIGV2ZW50c1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgaGFuZGxlU3RvcmFnZUNoYW5nZSk7XG4gICAgXG4gICAgLy8gQ2xlYW51cCBldmVudCBsaXN0ZW5lciBvbiB1bm1vdW50XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgaGFuZGxlU3RvcmFnZUNoYW5nZSk7XG4gICAgfTtcbiAgfSwgW3N0YXRlLnRpbWVzdGFtcF0pO1xuICBcbiAgLy8gU2F2ZSBzdGF0ZSB0byBzdG9yYWdlIHdoZW5ldmVyIGl0IGNoYW5nZXMgd2l0aCBkZWJvdW5jZSB0byBwcmV2ZW50IHJhY2UgY29uZGl0aW9uc1xuICBjb25zdCBkZWJvdW5jZWRTYXZlVGltZW91dCA9IHVzZVJlZjxudW1iZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgbGFzdFNhdmVkVGltZXN0YW1wID0gdXNlUmVmPG51bWJlcj4oMCk7XG4gIFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFNraXAgaW5pdGlhbCByZW5kZXIgdG8gYXZvaWQgb3ZlcndyaXRpbmcgd2l0aCBlbXB0eSBzdGF0ZVxuICAgIC8vIE9ubHkgcHJvY2VlZCBpZiB3ZSBoYXZlIHNvbWUgbWVhbmluZ2Z1bCBzdGF0ZSB0byBzYXZlXG4gICAgY29uc3QgaGFzQ29udGVudCA9IFxuICAgICAgT2JqZWN0LmtleXMoc3RhdGUudHJhZGluZ1N0YXRlIHx8IHt9KS5sZW5ndGggPiAwIHx8IFxuICAgICAgT2JqZWN0LmtleXMoc3RhdGUud2FsbGV0U3RhdGUgfHwge30pLmxlbmd0aCA+IDAgfHxcbiAgICAgIE9iamVjdC5rZXlzKHN0YXRlLmNoYXRDb250ZXh0IHx8IHt9KS5sZW5ndGggPiAwIHx8XG4gICAgICBPYmplY3Qua2V5cyhzdGF0ZS5jaGF0U3RhdGU/LnNlc3Npb25zIHx8IHt9KS5sZW5ndGggPiAwO1xuICAgIFxuICAgIGlmIChoYXNDb250ZW50KSB7XG4gICAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZW91dCB0byBkZWJvdW5jZSBmcmVxdWVudCB1cGRhdGVzXG4gICAgICBpZiAoZGVib3VuY2VkU2F2ZVRpbWVvdXQuY3VycmVudCAhPT0gbnVsbCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoZGVib3VuY2VkU2F2ZVRpbWVvdXQuY3VycmVudCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIERlYm91bmNlIHN0YXRlIHNhdmVzIHRvIHByZXZlbnQgZXhjZXNzaXZlIHdyaXRlcyBhbmQgcmFjZSBjb25kaXRpb25zXG4gICAgICBkZWJvdW5jZWRTYXZlVGltZW91dC5jdXJyZW50ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyBPbmx5IHNhdmUgaWYgd2UncmUgbm90IGN1cnJlbnRseSBwcm9jZXNzaW5nIGFuIHVwZGF0ZSBmcm9tIHN0b3JhZ2VcbiAgICAgICAgaWYgKCFpc1VwZGF0aW5nRnJvbVN0b3JhZ2UuY3VycmVudCkge1xuICAgICAgICAgIC8vIERvbid0IHNhdmUgdG9vIGZyZXF1ZW50bHkgLSBhdCBtb3N0IG9uY2UgZXZlcnkgMiBzZWNvbmRzXG4gICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICBpZiAobm93IC0gbGFzdFNhdmVkVGltZXN0YW1wLmN1cnJlbnQgPiAyMDAwKSB7XG4gICAgICAgICAgICBsYXN0U2F2ZWRUaW1lc3RhbXAuY3VycmVudCA9IG5vdztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRW5zdXJlIHRpbWVzdGFtcCBpcyB1cGRhdGVkXG4gICAgICAgICAgICBjb25zdCBzdGF0ZVRvU2F2ZSA9IHtcbiAgICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICAgIHRpbWVzdGFtcDogbm93XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGQgbWV0YWRhdGEgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAgICAgaWYgKHN0YXRlLmNoYXRDb250ZXh0Py5jdXJyZW50Q29udmVyc2F0aW9uSWQpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYFNhdmluZyBzdGF0ZSB3aXRoIGFjdGl2ZSBjb252ZXJzYXRpb246ICR7c3RhdGUuY2hhdENvbnRleHQuY3VycmVudENvbnZlcnNhdGlvbklkfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRvIGFzeW5jL2F3YWl0IHBhdHRlcm4gdG8gcHJvcGVybHkgaGFuZGxlIFByb21pc2VcbiAgICAgICAgICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgYXdhaXQgU3RhdGVQZXJzaXN0ZW5jZU1hbmFnZXIuY2FwdHVyZVNuYXBzaG90KHN0YXRlVG9TYXZlKTtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdGF0ZSBzYXZlZCB0byBsb2NhbFN0b3JhZ2UnLCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBBbHNvIGVuc3VyZSB0aGUgYWN0aXZlU2Vzc2lvbklkIGlzIHNldCBpbiBsb2NhbFN0b3JhZ2UgaWYgd2UgaGF2ZSBhIGN1cnJlbnQgY29udmVyc2F0aW9uXG4gICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuY2hhdENvbnRleHQ/LmN1cnJlbnRDb252ZXJzYXRpb25JZCkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWN0aXZlU2Vzc2lvbklkJywgc3RhdGUuY2hhdENvbnRleHQuY3VycmVudENvbnZlcnNhdGlvbklkKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHN0YXRlIHRvIGxvY2FsU3RvcmFnZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc3RhdGUgcGVyc2lzdGVuY2UgZmxvdzonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlYm91bmNlZFNhdmVUaW1lb3V0LmN1cnJlbnQgPSBudWxsO1xuICAgICAgfSwgMzAwKTsgLy8gMzAwbXMgZGVib3VuY2UgdGltZVxuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhbnVwIHRpbWVvdXQgb24gdW5tb3VudFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoZGVib3VuY2VkU2F2ZVRpbWVvdXQuY3VycmVudCAhPT0gbnVsbCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoZGVib3VuY2VkU2F2ZVRpbWVvdXQuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3N0YXRlXSk7XG4gIFxuICBcbiAgY29uc3QgY29udGV4dFZhbHVlOiBBcHBTdGF0ZUNvbnRleHRUeXBlID0ge1xuICAgIHN0YXRlLFxuICAgIGRpc3BhdGNoLFxuICAgIGlzU3RhdGVMb2FkaW5nLFxuICAgIGlzU3RhdGVIeWRyYXRlZCxcbiAgICBpc1N0YXRlUmVjb3ZlcmVkLFxuICAgIGlzU3RhdGVTeW5jaW5nLFxuICAgIGh5ZHJhdGVGcm9tU3RvcmFnZSxcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxBcHBTdGF0ZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHRWYWx1ZX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9BcHBTdGF0ZUNvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59XG5cbi8vIEN1c3RvbSBob29rIGZvciB1c2luZyB0aGUgYXBwIHN0YXRlXG5leHBvcnQgZnVuY3Rpb24gdXNlQXBwU3RhdGUoKSB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KEFwcFN0YXRlQ29udGV4dCk7XG4gIGlmIChjb250ZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZUFwcFN0YXRlIG11c3QgYmUgdXNlZCB3aXRoaW4gYW4gQXBwU3RhdGVQcm92aWRlcicpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufVxuIl0sIm5hbWVzIjpbIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VSZWR1Y2VyIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsIlN0YXRlUGVyc2lzdGVuY2VNYW5hZ2VyIiwidXNlQXV0aCIsImluaXRpYWxTdGF0ZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJ1c2VyU2Vzc2lvbiIsImF1dGhTZXNzaW9uIiwiY2hhdENvbnRleHQiLCJjdXJyZW50Q29udmVyc2F0aW9uSWQiLCJ1bmRlZmluZWQiLCJkcmFmdE1lc3NhZ2UiLCJsYXN0TWVzc2FnZVRpbWVzdGFtcCIsImNoYXRTdGF0ZSIsImFjdGl2ZVNlc3Npb25zIiwic2Vzc2lvbnMiLCJkcmFmdE1lc3NhZ2VzIiwicGFnZVN0YXRlIiwid2lkZ2V0U3RhdGVzIiwiaXNIeWRyYXRlZCIsImlzTG9hZGluZyIsImxhc3RTYXZlZCIsInRyYWRpbmdTdGF0ZSIsIndhbGxldFN0YXRlIiwic29jaWFsU3RhdGUiLCJ1aVN0YXRlIiwiZGFya01vZGUiLCJzaWRlYmFyT3BlbiIsInhmZWVkIiwiZm9sbG93ZWRBY2NvdW50cyIsImxhc3RVcGRhdGVkIiwiYXBwU3RhdGVSZWR1Y2VyIiwic3RhdGUiLCJhY3Rpb24iLCJ0eXBlIiwicGF5bG9hZCIsInVzZXIiLCJ0b2tlbiIsInVzZXJuYW1lIiwiZXhwaXJlc0F0IiwiTWF0aCIsImZsb29yIiwiQXBwU3RhdGVDb250ZXh0IiwiQXBwU3RhdGVQcm92aWRlciIsImNoaWxkcmVuIiwiZGlzcGF0Y2giLCJpc1N0YXRlTG9hZGluZyIsInNldElzU3RhdGVMb2FkaW5nIiwiaXNTdGF0ZUh5ZHJhdGVkIiwic2V0SXNTdGF0ZUh5ZHJhdGVkIiwiaXNTdGF0ZVJlY292ZXJlZCIsInNldElzU3RhdGVSZWNvdmVyZWQiLCJpc1N0YXRlU3luY2luZyIsInNldElzU3RhdGVTeW5jaW5nIiwiaXNVcGRhdGluZ0Zyb21TdG9yYWdlIiwiaXNBdXRoZW50aWNhdGVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImh5ZHJhdGVGcm9tU3RvcmFnZSIsIm5hdmlnYXRlIiwic3RvcmVkU3RhdGUiLCJyZXRyaWV2ZVNuYXBzaG90IiwiY29uc29sZSIsImxvZyIsImh5ZHJhdGVkU3RhdGUiLCJsYXN0VmlzaXRlZFBhdGgiLCJzY3JvbGxQb3NpdGlvbnMiLCJ0cmFkaW5nUG9zaXRpb25zIiwid2FsbGV0QmFsYW5jZSIsImN1cnJlbnRTZXNzaW9uSWQiLCJzZWxlY3RlZFRva2VuIiwid2F0Y2hsaXN0IiwidHJhZGVIaXN0b3J5IiwidHJhZGVGb3JtIiwicmVzb2x1dGlvbiIsInNlYXJjaCIsInBvc2l0aW9ucyIsImNvbm5lY3RlZFdhbGxldHMiLCJ0cmFuc2FjdGlvbnMiLCJwb3N0cyIsImZvbGxvd2luZyIsIm5vdGlmaWNhdGlvbnMiLCJhY3RpdmVUYWJzIiwic2V0VGltZW91dCIsInNjcm9sbFkiLCJ3aW5kb3ciLCJzY3JvbGxUbyIsImFjdGl2ZVNlc3Npb25JZCIsImVycm9yIiwidGltZXIiLCJjbGVhclRpbWVvdXQiLCJoYW5kbGVTdG9yYWdlQ2hhbmdlIiwiZXZlbnQiLCJTVE9SQUdFX0tFWSIsImtleSIsImN1cnJlbnQiLCJuZXdTdGF0ZSIsIm5ld1ZhbHVlIiwiSlNPTiIsInBhcnNlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZWJvdW5jZWRTYXZlVGltZW91dCIsImxhc3RTYXZlZFRpbWVzdGFtcCIsImhhc0NvbnRlbnQiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwic3RhdGVUb1NhdmUiLCJjYXB0dXJlU25hcHNob3QiLCJ0b0lTT1N0cmluZyIsInNldEl0ZW0iLCJjb250ZXh0VmFsdWUiLCJQcm92aWRlciIsInZhbHVlIiwidXNlQXBwU3RhdGUiLCJjb250ZXh0IiwiRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./context/AppStateContext.tsx\n");

/***/ }),

/***/ "./index.css":
/*!*******************!*\
  !*** ./index.css ***!
  \*******************/
/***/ (() => {



/***/ }),

/***/ "./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2F.pnpm%2Fnext%4015.4.5_%40babel%2Bcore%407.28.0_react-dom%4019.1.1_react%4019.1.1__react%4019.1.1%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2F.pnpm%2Fnext%4015.4.5_%40babel%2Bcore%407.28.0_react-dom%4019.1.1_react%4019.1.1__react%4019.1.1%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages/module.compiled */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_shared_lib_router_utils_format_url__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/format-url */ \"next/dist/shared/lib/router/utils/format-url\");\n/* harmony import */ var next_dist_shared_lib_router_utils_format_url__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_format_url__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/request-meta */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_app_render_interop_default__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/app-render/interop-default */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/app-render/interop-default.js\");\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_shared_lib_page_path_normalize_data_path__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/shared/lib/page-path/normalize-data-path */ \"next/dist/shared/lib/page-path/normalize-data-path\");\n/* harmony import */ var next_dist_shared_lib_page_path_normalize_data_path__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_page_path_normalize_data_path__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/response-cache */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! private-next-pages/_document */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/pages/_document.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(private_next_pages_document__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! private-next-pages/_app */ \"./pages/_app.tsx\");\n/* harmony import */ var _node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/pages/_error.js */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/pages/_error.js\");\n/* harmony import */ var _node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_shared_lib_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/shared/lib/utils */ \"next/dist/shared/lib/utils\");\n/* harmony import */ var next_dist_shared_lib_utils__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_utils__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var next_dist_lib_redirect_status__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! next/dist/lib/redirect-status */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/lib/redirect-status.js\");\n/* harmony import */ var next_dist_lib_redirect_status__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_redirect_status__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! next/dist/lib/constants */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! next/dist/server/send-payload */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/send-payload.js\");\n/* harmony import */ var next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! next/dist/server/render-result */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/render-result.js\");\n/* harmony import */ var next_dist_server_response_cache_utils__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! next/dist/server/response-cache/utils */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/response-cache/utils.js\");\n/* harmony import */ var next_dist_server_response_cache_utils__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache_utils__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! next/dist/client/components/redirect-status-code */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/client/components/redirect-status-code.js\");\n/* harmony import */ var next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/is-bot */ \"next/dist/shared/lib/router/utils/is-bot\");\n/* harmony import */ var next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var next_dist_shared_lib_router_utils_add_path_prefix__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/add-path-prefix */ \"next/dist/shared/lib/router/utils/add-path-prefix\");\n/* harmony import */ var next_dist_shared_lib_router_utils_add_path_prefix__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_add_path_prefix__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var next_dist_shared_lib_router_utils_remove_trailing_slash__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/remove-trailing-slash */ \"next/dist/shared/lib/router/utils/remove-trailing-slash\");\n/* harmony import */ var next_dist_shared_lib_router_utils_remove_trailing_slash__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_remove_trailing_slash__WEBPACK_IMPORTED_MODULE_25__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([private_next_pages_app__WEBPACK_IMPORTED_MODULE_12__]);\nprivate_next_pages_app__WEBPACK_IMPORTED_MODULE_12__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__.hoist)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__, 'default'));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__.hoist)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__, 'getStaticProps');\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__.hoist)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__, 'getStaticPaths');\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__.hoist)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__, 'getServerSideProps');\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__.hoist)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__, 'config');\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__.hoist)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__, 'reportWebVitals');\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__.hoist)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__, 'unstable_getStaticProps');\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__.hoist)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__, 'unstable_getStaticPaths');\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__.hoist)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__, 'unstable_getStaticParams');\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__.hoist)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__, 'unstable_getServerProps');\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_10__.hoist)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/_error\",\n        pathname: \"/_error\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    distDir: \".next\" || 0,\n    projectDir:  false || '',\n    components: {\n        // default export might not exist when optimized for data only\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_12__[\"default\"],\n        Document: (private_next_pages_document__WEBPACK_IMPORTED_MODULE_11___default())\n    },\n    userland: _node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__\n});\nasync function handler(req, res, ctx) {\n    var _serverFilesManifest_config_experimental, _serverFilesManifest_config;\n    let srcPage = \"/_error\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = \"false\";\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { buildId, query, params, parsedUrl, originalQuery, originalPathname, buildManifest, nextFontManifest, serverFilesManifest, reactLoadableManifest, prerenderManifest, isDraftMode, isOnDemandRevalidate, revalidateOnlyGenerated, locale, locales, defaultLocale, routerServerContext, nextConfig, resolvedPathname } = prepareResult;\n    const isExperimentalCompile = serverFilesManifest == null ? void 0 : (_serverFilesManifest_config = serverFilesManifest.config) == null ? void 0 : (_serverFilesManifest_config_experimental = _serverFilesManifest_config.experimental) == null ? void 0 : _serverFilesManifest_config_experimental.isExperimentalCompile;\n    const hasServerProps = Boolean(getServerSideProps);\n    const hasStaticProps = Boolean(getStaticProps);\n    const hasStaticPaths = Boolean(getStaticPaths);\n    const hasGetInitialProps = Boolean(((_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13___default()) || _node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__).getInitialProps);\n    const isAmp = query.amp && config.amp;\n    let cacheKey = null;\n    let isIsrFallback = false;\n    let isNextDataRequest = prepareResult.isNextDataRequest && (hasStaticProps || hasServerProps);\n    const is404Page = srcPage === '/404';\n    const is500Page = srcPage === '/500';\n    const isErrorPage = srcPage === '/_error';\n    if (!routeModule.isDev && !isDraftMode && hasStaticProps) {\n        cacheKey = `${locale ? `/${locale}` : ''}${(srcPage === '/' || resolvedPathname === '/') && locale ? '' : resolvedPathname}${isAmp ? '.amp' : ''}`;\n        if (is404Page || is500Page || isErrorPage) {\n            cacheKey = `${locale ? `/${locale}` : ''}${srcPage}${isAmp ? '.amp' : ''}`;\n        }\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    if (hasStaticPaths && !isDraftMode) {\n        const decodedPathname = (0,next_dist_shared_lib_router_utils_remove_trailing_slash__WEBPACK_IMPORTED_MODULE_25__.removeTrailingSlash)(locale ? (0,next_dist_shared_lib_router_utils_add_path_prefix__WEBPACK_IMPORTED_MODULE_24__.addPathPrefix)(resolvedPathname, `/${locale}`) : resolvedPathname);\n        const isPrerendered = Boolean(prerenderManifest.routes[decodedPathname]) || prerenderManifest.notFoundRoutes.includes(decodedPathname);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[srcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_21__.NoFallbackError();\n            }\n            if (typeof prerenderInfo.fallback === 'string' && !isPrerendered && !isNextDataRequest) {\n                isIsrFallback = true;\n            }\n        }\n    }\n    // When serving a bot request, we want to serve a blocking render and not\n    // the prerendered page. This ensures that the correct content is served\n    // to the bot in the head.\n    if (isIsrFallback && (0,next_dist_shared_lib_router_utils_is_bot__WEBPACK_IMPORTED_MODULE_23__.isBot)(req.headers['user-agent'] || '') || (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__.getRequestMeta)(req, 'minimalMode')) {\n        isIsrFallback = false;\n    }\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    try {\n        const method = req.method || 'GET';\n        const resolvedUrl = (0,next_dist_shared_lib_router_utils_format_url__WEBPACK_IMPORTED_MODULE_4__.formatUrl)({\n            pathname: nextConfig.trailingSlash ? parsedUrl.pathname : (0,next_dist_shared_lib_router_utils_remove_trailing_slash__WEBPACK_IMPORTED_MODULE_25__.removeTrailingSlash)(parsedUrl.pathname || '/'),\n            // make sure to only add query values from original URL\n            query: hasStaticProps ? {} : originalQuery\n        });\n        const publicRuntimeConfig = (routerServerContext == null ? void 0 : routerServerContext.publicRuntimeConfig) || nextConfig.publicRuntimeConfig;\n        const handleResponse = async (span)=>{\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                var _previousCacheEntry_value;\n                const doRender = async ()=>{\n                    try {\n                        var _nextConfig_i18n, _nextConfig_experimental_amp, _nextConfig_experimental_amp1;\n                        return await routeModule.render(req, res, {\n                            query: hasStaticProps && !isExperimentalCompile ? {\n                                ...params,\n                                ...isAmp ? {\n                                    amp: query.amp\n                                } : {}\n                            } : {\n                                ...query,\n                                ...params\n                            },\n                            params,\n                            page: srcPage,\n                            renderContext: {\n                                isDraftMode,\n                                isFallback: isIsrFallback,\n                                developmentNotFoundSourcePage: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__.getRequestMeta)(req, 'developmentNotFoundSourcePage')\n                            },\n                            sharedContext: {\n                                buildId,\n                                customServer: Boolean(routerServerContext == null ? void 0 : routerServerContext.isCustomServer) || undefined,\n                                deploymentId: false\n                            },\n                            renderOpts: {\n                                params,\n                                routeModule,\n                                page: srcPage,\n                                pageConfig: config || {},\n                                Component: (0,next_dist_server_app_render_interop_default__WEBPACK_IMPORTED_MODULE_6__.interopDefault)(_node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__),\n                                ComponentMod: _node_modules_pnpm_next_15_4_5_babel_core_7_28_0_react_dom_19_1_1_react_19_1_1_react_19_1_1_node_modules_next_dist_pages_error_js__WEBPACK_IMPORTED_MODULE_13__,\n                                getStaticProps,\n                                getStaticPaths,\n                                getServerSideProps,\n                                supportsDynamicResponse: !hasStaticProps,\n                                buildManifest,\n                                nextFontManifest,\n                                reactLoadableManifest,\n                                assetPrefix: nextConfig.assetPrefix,\n                                strictNextHead: nextConfig.experimental.strictNextHead ?? true,\n                                previewProps: prerenderManifest.preview,\n                                images: nextConfig.images,\n                                nextConfigOutput: nextConfig.output,\n                                optimizeCss: Boolean(nextConfig.experimental.optimizeCss),\n                                nextScriptWorkers: Boolean(nextConfig.experimental.nextScriptWorkers),\n                                domainLocales: (_nextConfig_i18n = nextConfig.i18n) == null ? void 0 : _nextConfig_i18n.domains,\n                                crossOrigin: nextConfig.crossOrigin,\n                                multiZoneDraftMode,\n                                basePath: nextConfig.basePath,\n                                canonicalBase: nextConfig.amp.canonicalBase || '',\n                                ampOptimizerConfig: (_nextConfig_experimental_amp = nextConfig.experimental.amp) == null ? void 0 : _nextConfig_experimental_amp.optimizer,\n                                disableOptimizedLoading: nextConfig.experimental.disableOptimizedLoading,\n                                largePageDataBytes: nextConfig.experimental.largePageDataBytes,\n                                // Only the `publicRuntimeConfig` key is exposed to the client side\n                                // It'll be rendered as part of __NEXT_DATA__ on the client side\n                                runtimeConfig: Object.keys(publicRuntimeConfig).length > 0 ? publicRuntimeConfig : undefined,\n                                isExperimentalCompile,\n                                experimental: {\n                                    clientTraceMetadata: nextConfig.experimental.clientTraceMetadata || []\n                                },\n                                locale,\n                                locales,\n                                defaultLocale,\n                                setIsrStatus: routerServerContext == null ? void 0 : routerServerContext.setIsrStatus,\n                                isNextDataRequest: isNextDataRequest && (hasServerProps || hasStaticProps),\n                                resolvedUrl,\n                                // For getServerSideProps and getInitialProps we need to ensure we use the original URL\n                                // and not the resolved URL to prevent a hydration mismatch on\n                                // asPath\n                                resolvedAsPath: hasServerProps || hasGetInitialProps ? (0,next_dist_shared_lib_router_utils_format_url__WEBPACK_IMPORTED_MODULE_4__.formatUrl)({\n                                    // we use the original URL pathname less the _next/data prefix if\n                                    // present\n                                    pathname: isNextDataRequest ? (0,next_dist_shared_lib_page_path_normalize_data_path__WEBPACK_IMPORTED_MODULE_8__.normalizeDataPath)(originalPathname) : originalPathname,\n                                    query: originalQuery\n                                }) : resolvedUrl,\n                                isOnDemandRevalidate,\n                                ErrorDebug: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__.getRequestMeta)(req, 'PagesErrorDebug'),\n                                err: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__.getRequestMeta)(req, 'invokeError'),\n                                dev: routeModule.isDev,\n                                // needed for experimental.optimizeCss feature\n                                distDir: `${routeModule.projectDir}/${routeModule.distDir}`,\n                                ampSkipValidation: (_nextConfig_experimental_amp1 = nextConfig.experimental.amp) == null ? void 0 : _nextConfig_experimental_amp1.skipValidation,\n                                ampValidator: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__.getRequestMeta)(req, 'ampValidator')\n                            }\n                        }).then((renderResult)=>{\n                            const { metadata } = renderResult;\n                            let cacheControl = metadata.cacheControl;\n                            if ('isNotFound' in metadata && metadata.isNotFound) {\n                                return {\n                                    value: null,\n                                    cacheControl\n                                };\n                            }\n                            // Handle `isRedirect`.\n                            if (metadata.isRedirect) {\n                                return {\n                                    value: {\n                                        kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_9__.CachedRouteKind.REDIRECT,\n                                        props: metadata.pageData ?? metadata.flightData\n                                    },\n                                    cacheControl\n                                };\n                            }\n                            return {\n                                value: {\n                                    kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_9__.CachedRouteKind.PAGES,\n                                    html: renderResult,\n                                    pageData: renderResult.metadata.pageData,\n                                    headers: renderResult.metadata.headers,\n                                    status: renderResult.metadata.statusCode\n                                },\n                                cacheControl\n                            };\n                        }).finally(()=>{\n                            if (!span) return;\n                            span.setAttributes({\n                                'http.status_code': res.statusCode,\n                                'next.rsc': false\n                            });\n                            const rootSpanAttributes = tracer.getRootSpanAttributes();\n                            // We were unable to get attributes, probably OTEL is not enabled\n                            if (!rootSpanAttributes) {\n                                return;\n                            }\n                            if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_2__.BaseServerSpan.handleRequest) {\n                                console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                                return;\n                            }\n                            const route = rootSpanAttributes.get('next.route');\n                            if (route) {\n                                const name = `${method} ${route}`;\n                                span.setAttributes({\n                                    'next.route': route,\n                                    'http.route': route,\n                                    'next.span_name': name\n                                });\n                                span.updateName(name);\n                            } else {\n                                span.updateName(`${method} ${req.url}`);\n                            }\n                        });\n                    } catch (err) {\n                        // if this is a background revalidate we need to report\n                        // the request error here as it won't be bubbled\n                        if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                            await routeModule.onRequestError(req, err, {\n                                routerKind: 'Pages Router',\n                                routePath: srcPage,\n                                routeType: 'render',\n                                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_7__.getRevalidateReason)({\n                                    isRevalidate: hasStaticProps,\n                                    isOnDemandRevalidate\n                                })\n                            }, routerServerContext);\n                        }\n                        throw err;\n                    }\n                };\n                // if we've already generated this page we no longer\n                // serve the fallback\n                if (previousCacheEntry) {\n                    isIsrFallback = false;\n                }\n                if (isIsrFallback) {\n                    const fallbackResponse = await routeModule.getResponseCache(req).get(routeModule.isDev ? null : locale ? `/${locale}${srcPage}` : srcPage, async ({ previousCacheEntry: previousFallbackCacheEntry = null })=>{\n                        if (!routeModule.isDev) {\n                            return (0,next_dist_server_response_cache_utils__WEBPACK_IMPORTED_MODULE_20__.toResponseCacheEntry)(previousFallbackCacheEntry);\n                        }\n                        return doRender();\n                    }, {\n                        routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n                        isFallback: true,\n                        isRoutePPREnabled: false,\n                        isOnDemandRevalidate: false,\n                        incrementalCache: await routeModule.getIncrementalCache(req, nextConfig, prerenderManifest),\n                        waitUntil: ctx.waitUntil\n                    });\n                    if (fallbackResponse) {\n                        // Remove the cache control from the response to prevent it from being\n                        // used in the surrounding cache.\n                        delete fallbackResponse.cacheControl;\n                        fallbackResponse.isMiss = true;\n                        return fallbackResponse;\n                    }\n                }\n                if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                    res.statusCode = 404;\n                    // on-demand revalidate always sets this header\n                    res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                    res.end('This page could not be found');\n                    return null;\n                }\n                if (isIsrFallback && (previousCacheEntry == null ? void 0 : (_previousCacheEntry_value = previousCacheEntry.value) == null ? void 0 : _previousCacheEntry_value.kind) === next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_9__.CachedRouteKind.PAGES) {\n                    return {\n                        value: {\n                            kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_9__.CachedRouteKind.PAGES,\n                            html: new next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_19__[\"default\"](Buffer.from(previousCacheEntry.value.html), {\n                                contentType: 'text/html;utf-8',\n                                metadata: {\n                                    statusCode: previousCacheEntry.value.status,\n                                    headers: previousCacheEntry.value.headers\n                                }\n                            }),\n                            pageData: {},\n                            status: previousCacheEntry.value.status,\n                            headers: previousCacheEntry.value.headers\n                        },\n                        cacheControl: {\n                            revalidate: 0,\n                            expire: undefined\n                        }\n                    };\n                }\n                return doRender();\n            };\n            const result = await routeModule.handleResponse({\n                cacheKey,\n                req,\n                nextConfig,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                waitUntil: ctx.waitUntil,\n                responseGenerator: responseGenerator,\n                prerenderManifest\n            });\n            // if we got a cache hit this wasn't an ISR fallback\n            // but it wasn't generated during build so isn't in the\n            // prerender-manifest\n            if (isIsrFallback && !(result == null ? void 0 : result.isMiss)) {\n                isIsrFallback = false;\n            }\n            // response is finished is no cache entry\n            if (!result) {\n                return;\n            }\n            if (hasStaticProps && !(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : result.isMiss ? 'MISS' : result.isStale ? 'STALE' : 'HIT');\n            }\n            let cacheControl;\n            if (!hasStaticProps || isIsrFallback) {\n                if (!res.getHeader('Cache-Control')) {\n                    cacheControl = {\n                        revalidate: 0,\n                        expire: undefined\n                    };\n                }\n            } else if (is404Page) {\n                const notFoundRevalidate = (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__.getRequestMeta)(req, 'notFoundRevalidate');\n                cacheControl = {\n                    revalidate: typeof notFoundRevalidate === 'undefined' ? 0 : notFoundRevalidate,\n                    expire: undefined\n                };\n            } else if (is500Page) {\n                cacheControl = {\n                    revalidate: 0,\n                    expire: undefined\n                };\n            } else if (result.cacheControl) {\n                // If the cache entry has a cache control with a revalidate value that's\n                // a number, use it.\n                if (typeof result.cacheControl.revalidate === 'number') {\n                    var _result_cacheControl;\n                    if (result.cacheControl.revalidate < 1) {\n                        throw Object.defineProperty(new Error(`Invalid revalidate configuration provided: ${result.cacheControl.revalidate} < 1`), \"__NEXT_ERROR_CODE\", {\n                            value: \"E22\",\n                            enumerable: false,\n                            configurable: true\n                        });\n                    }\n                    cacheControl = {\n                        revalidate: result.cacheControl.revalidate,\n                        expire: ((_result_cacheControl = result.cacheControl) == null ? void 0 : _result_cacheControl.expire) ?? nextConfig.expireTime\n                    };\n                } else {\n                    // revalidate: false\n                    cacheControl = {\n                        revalidate: next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_17__.CACHE_ONE_YEAR,\n                        expire: undefined\n                    };\n                }\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheControl && !res.getHeader('Cache-Control')) {\n                res.setHeader('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_14__.getCacheControlHeader)(cacheControl));\n            }\n            // notFound: true case\n            if (!result.value) {\n                var _result_cacheControl1;\n                // add revalidate metadata before rendering 404 page\n                // so that we can use this as source of truth for the\n                // cache-control header instead of what the 404 page returns\n                // for the revalidate value\n                (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__.addRequestMeta)(req, 'notFoundRevalidate', (_result_cacheControl1 = result.cacheControl) == null ? void 0 : _result_cacheControl1.revalidate);\n                res.statusCode = 404;\n                if (isNextDataRequest) {\n                    res.end('{\"notFound\":true}');\n                    return;\n                }\n                // TODO: should route-module itself handle rendering the 404\n                if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n                    await routerServerContext.render404(req, res, parsedUrl, false);\n                } else {\n                    res.end('This page could not be found');\n                }\n                return;\n            }\n            if (result.value.kind === next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_9__.CachedRouteKind.REDIRECT) {\n                if (isNextDataRequest) {\n                    res.setHeader('content-type', 'application/json');\n                    res.end(JSON.stringify(result.value.props));\n                    return;\n                } else {\n                    const handleRedirect = (pageData)=>{\n                        const redirect = {\n                            destination: pageData.pageProps.__N_REDIRECT,\n                            statusCode: pageData.pageProps.__N_REDIRECT_STATUS,\n                            basePath: pageData.pageProps.__N_REDIRECT_BASE_PATH\n                        };\n                        const statusCode = (0,next_dist_lib_redirect_status__WEBPACK_IMPORTED_MODULE_16__.getRedirectStatus)(redirect);\n                        const { basePath } = nextConfig;\n                        if (basePath && redirect.basePath !== false && redirect.destination.startsWith('/')) {\n                            redirect.destination = `${basePath}${redirect.destination}`;\n                        }\n                        if (redirect.destination.startsWith('/')) {\n                            redirect.destination = (0,next_dist_shared_lib_utils__WEBPACK_IMPORTED_MODULE_15__.normalizeRepeatedSlashes)(redirect.destination);\n                        }\n                        res.statusCode = statusCode;\n                        res.setHeader('Location', redirect.destination);\n                        if (statusCode === next_dist_client_components_redirect_status_code__WEBPACK_IMPORTED_MODULE_22__.RedirectStatusCode.PermanentRedirect) {\n                            res.setHeader('Refresh', `0;url=${redirect.destination}`);\n                        }\n                        res.end(redirect.destination);\n                    };\n                    await handleRedirect(result.value.props);\n                    return null;\n                }\n            }\n            if (result.value.kind !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_9__.CachedRouteKind.PAGES) {\n                throw Object.defineProperty(new Error(`Invariant: received non-pages cache entry in pages handler`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E695\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            // In dev, we should not cache pages for any reason.\n            if (routeModule.isDev) {\n                res.setHeader('Cache-Control', 'no-store, must-revalidate');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            // when invoking _error before pages/500 we don't actually\n            // send the _error response\n            if ((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__.getRequestMeta)(req, 'customErrorRender') || isErrorPage && (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_5__.getRequestMeta)(req, 'minimalMode') && res.statusCode === 500) {\n                return null;\n            }\n            await (0,next_dist_server_send_payload__WEBPACK_IMPORTED_MODULE_18__.sendRenderResult)({\n                req,\n                res,\n                // If we are rendering the error page it's not a data request\n                // anymore\n                result: isNextDataRequest && !isErrorPage && !is500Page ? new next_dist_server_render_result__WEBPACK_IMPORTED_MODULE_19__[\"default\"](Buffer.from(JSON.stringify(result.value.pageData)), {\n                    contentType: 'application/json',\n                    metadata: result.value.html.metadata\n                }) : result.value.html,\n                generateEtags: nextConfig.generateEtags,\n                poweredByHeader: nextConfig.poweredByHeader,\n                cacheControl: routeModule.isDev ? undefined : cacheControl,\n                type: isNextDataRequest ? 'json' : 'html'\n            });\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse();\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_2__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_3__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_21__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'Pages Router',\n                routePath: srcPage,\n                routeType: 'render',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_7__.getRevalidateReason)({\n                    isRevalidate: hasStaticProps,\n                    isOnDemandRevalidate\n                })\n            }, routerServerContext);\n        }\n        // rethrow so that we can handle serving error page\n        throw err;\n    }\n}\n\n//# sourceMappingURL=pages.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS40LjVfQGJhYmVsK2NvcmVANy4yOC4wX3JlYWN0LWRvbUAxOS4xLjFfcmVhY3RAMTkuMS4xX19yZWFjdEAxOS4xLjEvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1yb3V0ZS1sb2FkZXIvaW5kZXguanM/a2luZD1QQUdFUyZwYWdlPSUyRl9lcnJvciZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRm5vZGVfbW9kdWxlcyUyRi5wbnBtJTJGbmV4dCU0MDE1LjQuNV8lNDBiYWJlbCUyQmNvcmUlNDA3LjI4LjBfcmVhY3QtZG9tJTQwMTkuMS4xX3JlYWN0JTQwMTkuMS4xX19yZWFjdCU0MDE5LjEuMSUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGcGFnZXMlMkZfZXJyb3IuanMmYWJzb2x1dGVBcHBQYXRoPXByaXZhdGUtbmV4dC1wYWdlcyUyRl9hcHAmYWJzb2x1dGVEb2N1bWVudFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2RvY3VtZW50Jm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdGO0FBQ2hDO0FBQ2M7QUFDRTtBQUNDO0FBQ007QUFDRjtBQUNBO0FBQ1U7QUFDckI7QUFDUjtBQUMxRDtBQUN5RDtBQUNWO0FBQy9DO0FBQ21LO0FBQ3hGO0FBQ0w7QUFDSjtBQUNUO0FBQ1E7QUFDUDtBQUNtQjtBQUNLO0FBQ0k7QUFDckI7QUFDaUI7QUFDWTtBQUM5RjtBQUNBLGlFQUFlLHlFQUFLLENBQUMsK0pBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sdUJBQXVCLHlFQUFLLENBQUMsK0pBQVE7QUFDckMsdUJBQXVCLHlFQUFLLENBQUMsK0pBQVE7QUFDckMsMkJBQTJCLHlFQUFLLENBQUMs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Q3RGO0FBQ0E7QUFDQSxtREFBbUQscUZBQXdCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxpR0FBa0I7QUFDN0Qsd0RBQXdELE1BQU0scUJBQXFCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDRFQUFlO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNkVBQWMsNkNBQTZDLDZFQUFjO0FBQ3pGO0FBQ0E7QUFDQSxrQkFBa0IsZ0ZBQWdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLHVFQUFZO0FBQzFGO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTiw2QkFBNkIsNkZBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUMiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc1JvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IGZvcm1hdFVybCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvZm9ybWF0LXVybFwiO1xuaW1wb3J0IHsgYWRkUmVxdWVzdE1ldGEsIGdldFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBpbnRlcm9wRGVmYXVsdCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvaW50ZXJvcC1kZWZhdWx0XCI7XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBub3JtYWxpemVEYXRhUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9wYWdlLXBhdGgvbm9ybWFsaXplLWRhdGEtcGF0aFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSBhcHAgYW5kIGRvY3VtZW50IG1vZHVsZXMuXG5pbXBvcnQgKiBhcyBkb2N1bWVudCBmcm9tIFwicHJpdmF0ZS1uZXh0LXBhZ2VzL19kb2N1bWVudFwiO1xuaW1wb3J0ICogYXMgYXBwIGZyb20gXCJwcml2YXRlLW5leHQtcGFnZXMvX2FwcFwiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTUuNC41X0BiYWJlbCtjb3JlQDcuMjguMF9yZWFjdC1kb21AMTkuMS4xX3JlYWN0QDE5LjEuMV9fcmVhY3RAMTkuMS4xL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvcGFnZXMvX2Vycm9yLmpzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgbm9ybWFsaXplUmVwZWF0ZWRTbGFzaGVzIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRSZWRpcmVjdFN0YXR1cyB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL3JlZGlyZWN0LXN0YXR1c1wiO1xuaW1wb3J0IHsgQ0FDSEVfT05FX1lFQVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IHNlbmRSZW5kZXJSZXN1bHQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXBheWxvYWRcIjtcbmltcG9ydCBSZW5kZXJSZXN1bHQgZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVuZGVyLXJlc3VsdFwiO1xuaW1wb3J0IHsgdG9SZXNwb25zZUNhY2hlRW50cnkgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZS91dGlsc1wiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG5pbXBvcnQgeyBSZWRpcmVjdFN0YXR1c0NvZGUgfSBmcm9tIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3JlZGlyZWN0LXN0YXR1cy1jb2RlXCI7XG5pbXBvcnQgeyBpc0JvdCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvaXMtYm90XCI7XG5pbXBvcnQgeyBhZGRQYXRoUHJlZml4IH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci91dGlscy9hZGQtcGF0aC1wcmVmaXhcIjtcbmltcG9ydCB7IHJlbW92ZVRyYWlsaW5nU2xhc2ggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL3JlbW92ZS10cmFpbGluZy1zbGFzaFwiO1xuLy8gUmUtZXhwb3J0IHRoZSBjb21wb25lbnQgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAnZ2V0U3RhdGljUHJvcHMnKTtcbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCAnZ2V0U3RhdGljUGF0aHMnKTtcbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJTaWRlUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgJ2dldFNlcnZlclNpZGVQcm9wcycpO1xuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG5leHBvcnQgY29uc3QgcmVwb3J0V2ViVml0YWxzID0gaG9pc3QodXNlcmxhbmQsICdyZXBvcnRXZWJWaXRhbHMnKTtcbi8vIFJlLWV4cG9ydCBsZWdhY3kgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U3RhdGljUHJvcHMnKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U3RhdGljUGF0aHMnKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXJhbXMgPSBob2lzdCh1c2VybGFuZCwgJ3Vuc3RhYmxlX2dldFN0YXRpY1BhcmFtcycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclByb3BzID0gaG9pc3QodXNlcmxhbmQsICd1bnN0YWJsZV9nZXRTZXJ2ZXJQcm9wcycpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCAndW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc1JvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFUyxcbiAgICAgICAgcGFnZTogXCIvX2Vycm9yXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9fZXJyb3JcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnLFxuICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgLy8gZGVmYXVsdCBleHBvcnQgbWlnaHQgbm90IGV4aXN0IHdoZW4gb3B0aW1pemVkIGZvciBkYXRhIG9ubHlcbiAgICAgICAgQXBwOiBhcHAuZGVmYXVsdCxcbiAgICAgICAgRG9jdW1lbnQ6IGRvY3VtZW50LmRlZmF1bHRcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX3NlcnZlckZpbGVzTWFuaWZlc3RfY29uZmlnX2V4cGVyaW1lbnRhbCwgX3NlcnZlckZpbGVzTWFuaWZlc3RfY29uZmlnO1xuICAgIGxldCBzcmNQYWdlID0gXCIvX2Vycm9yXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBxdWVyeSwgcGFyYW1zLCBwYXJzZWRVcmwsIG9yaWdpbmFsUXVlcnksIG9yaWdpbmFsUGF0aG5hbWUsIGJ1aWxkTWFuaWZlc3QsIG5leHRGb250TWFuaWZlc3QsIHNlcnZlckZpbGVzTWFuaWZlc3QsIHJlYWN0TG9hZGFibGVNYW5pZmVzdCwgcHJlcmVuZGVyTWFuaWZlc3QsIGlzRHJhZnRNb2RlLCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIGxvY2FsZSwgbG9jYWxlcywgZGVmYXVsdExvY2FsZSwgcm91dGVyU2VydmVyQ29udGV4dCwgbmV4dENvbmZpZywgcmVzb2x2ZWRQYXRobmFtZSB9ID0gcHJlcGFyZVJlc3VsdDtcbiAgICBjb25zdCBpc0V4cGVyaW1lbnRhbENvbXBpbGUgPSBzZXJ2ZXJGaWxlc01hbmlmZXN0ID09IG51bGwgPyB2b2lkIDAgOiAoX3NlcnZlckZpbGVzTWFuaWZlc3RfY29uZmlnID0gc2VydmVyRmlsZXNNYW5pZmVzdC5jb25maWcpID09IG51bGwgPyB2b2lkIDAgOiAoX3NlcnZlckZpbGVzTWFuaWZlc3RfY29uZmlnX2V4cGVyaW1lbnRhbCA9IF9zZXJ2ZXJGaWxlc01hbmlmZXN0X2NvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfc2VydmVyRmlsZXNNYW5pZmVzdF9jb25maWdfZXhwZXJpbWVudGFsLmlzRXhwZXJpbWVudGFsQ29tcGlsZTtcbiAgICBjb25zdCBoYXNTZXJ2ZXJQcm9wcyA9IEJvb2xlYW4oZ2V0U2VydmVyU2lkZVByb3BzKTtcbiAgICBjb25zdCBoYXNTdGF0aWNQcm9wcyA9IEJvb2xlYW4oZ2V0U3RhdGljUHJvcHMpO1xuICAgIGNvbnN0IGhhc1N0YXRpY1BhdGhzID0gQm9vbGVhbihnZXRTdGF0aWNQYXRocyk7XG4gICAgY29uc3QgaGFzR2V0SW5pdGlhbFByb3BzID0gQm9vbGVhbigodXNlcmxhbmQuZGVmYXVsdCB8fCB1c2VybGFuZCkuZ2V0SW5pdGlhbFByb3BzKTtcbiAgICBjb25zdCBpc0FtcCA9IHF1ZXJ5LmFtcCAmJiBjb25maWcuYW1wO1xuICAgIGxldCBjYWNoZUtleSA9IG51bGw7XG4gICAgbGV0IGlzSXNyRmFsbGJhY2sgPSBmYWxzZTtcbiAgICBsZXQgaXNOZXh0RGF0YVJlcXVlc3QgPSBwcmVwYXJlUmVzdWx0LmlzTmV4dERhdGFSZXF1ZXN0ICYmIChoYXNTdGF0aWNQcm9wcyB8fCBoYXNTZXJ2ZXJQcm9wcyk7XG4gICAgY29uc3QgaXM0MDRQYWdlID0gc3JjUGFnZSA9PT0gJy80MDQnO1xuICAgIGNvbnN0IGlzNTAwUGFnZSA9IHNyY1BhZ2UgPT09ICcvNTAwJztcbiAgICBjb25zdCBpc0Vycm9yUGFnZSA9IHNyY1BhZ2UgPT09ICcvX2Vycm9yJztcbiAgICBpZiAoIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSAmJiBoYXNTdGF0aWNQcm9wcykge1xuICAgICAgICBjYWNoZUtleSA9IGAke2xvY2FsZSA/IGAvJHtsb2NhbGV9YCA6ICcnfSR7KHNyY1BhZ2UgPT09ICcvJyB8fCByZXNvbHZlZFBhdGhuYW1lID09PSAnLycpICYmIGxvY2FsZSA/ICcnIDogcmVzb2x2ZWRQYXRobmFtZX0ke2lzQW1wID8gJy5hbXAnIDogJyd9YDtcbiAgICAgICAgaWYgKGlzNDA0UGFnZSB8fCBpczUwMFBhZ2UgfHwgaXNFcnJvclBhZ2UpIHtcbiAgICAgICAgICAgIGNhY2hlS2V5ID0gYCR7bG9jYWxlID8gYC8ke2xvY2FsZX1gIDogJyd9JHtzcmNQYWdlfSR7aXNBbXAgPyAnLmFtcCcgOiAnJ31gO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGlmIChoYXNTdGF0aWNQYXRocyAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgY29uc3QgZGVjb2RlZFBhdGhuYW1lID0gcmVtb3ZlVHJhaWxpbmdTbGFzaChsb2NhbGUgPyBhZGRQYXRoUHJlZml4KHJlc29sdmVkUGF0aG5hbWUsIGAvJHtsb2NhbGV9YCkgOiByZXNvbHZlZFBhdGhuYW1lKTtcbiAgICAgICAgY29uc3QgaXNQcmVyZW5kZXJlZCA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW2RlY29kZWRQYXRobmFtZV0pIHx8IHByZXJlbmRlck1hbmlmZXN0Lm5vdEZvdW5kUm91dGVzLmluY2x1ZGVzKGRlY29kZWRQYXRobmFtZSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW3NyY1BhZ2VdO1xuICAgICAgICBpZiAocHJlcmVuZGVySW5mbykge1xuICAgICAgICAgICAgaWYgKHByZXJlbmRlckluZm8uZmFsbGJhY2sgPT09IGZhbHNlICYmICFpc1ByZXJlbmRlcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vRmFsbGJhY2tFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSAnc3RyaW5nJyAmJiAhaXNQcmVyZW5kZXJlZCAmJiAhaXNOZXh0RGF0YVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICBpc0lzckZhbGxiYWNrID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBXaGVuIHNlcnZpbmcgYSBib3QgcmVxdWVzdCwgd2Ugd2FudCB0byBzZXJ2ZSBhIGJsb2NraW5nIHJlbmRlciBhbmQgbm90XG4gICAgLy8gdGhlIHByZXJlbmRlcmVkIHBhZ2UuIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBjb3JyZWN0IGNvbnRlbnQgaXMgc2VydmVkXG4gICAgLy8gdG8gdGhlIGJvdCBpbiB0aGUgaGVhZC5cbiAgICBpZiAoaXNJc3JGYWxsYmFjayAmJiBpc0JvdChyZXEuaGVhZGVyc1sndXNlci1hZ2VudCddIHx8ICcnKSB8fCBnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpKSB7XG4gICAgICAgIGlzSXNyRmFsbGJhY2sgPSBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kIHx8ICdHRVQnO1xuICAgICAgICBjb25zdCByZXNvbHZlZFVybCA9IGZvcm1hdFVybCh7XG4gICAgICAgICAgICBwYXRobmFtZTogbmV4dENvbmZpZy50cmFpbGluZ1NsYXNoID8gcGFyc2VkVXJsLnBhdGhuYW1lIDogcmVtb3ZlVHJhaWxpbmdTbGFzaChwYXJzZWRVcmwucGF0aG5hbWUgfHwgJy8nKSxcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0byBvbmx5IGFkZCBxdWVyeSB2YWx1ZXMgZnJvbSBvcmlnaW5hbCBVUkxcbiAgICAgICAgICAgIHF1ZXJ5OiBoYXNTdGF0aWNQcm9wcyA/IHt9IDogb3JpZ2luYWxRdWVyeVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcHVibGljUnVudGltZUNvbmZpZyA9IChyb3V0ZXJTZXJ2ZXJDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZXJTZXJ2ZXJDb250ZXh0LnB1YmxpY1J1bnRpbWVDb25maWcpIHx8IG5leHRDb25maWcucHVibGljUnVudGltZUNvbmZpZztcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdmFyIF9wcmV2aW91c0NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc3QgZG9SZW5kZXIgPSBhc3luYyAoKT0+e1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9uZXh0Q29uZmlnX2kxOG4sIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbF9hbXAsIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbF9hbXAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJvdXRlTW9kdWxlLnJlbmRlcihyZXEsIHJlcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBoYXNTdGF0aWNQcm9wcyAmJiAhaXNFeHBlcmltZW50YWxDb21waWxlID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmlzQW1wID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1wOiBxdWVyeS5hbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucXVlcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IHNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQ29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0RyYWZ0TW9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNGYWxsYmFjazogaXNJc3JGYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2ZWxvcG1lbnROb3RGb3VuZFNvdXJjZVBhZ2U6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2RldmVsb3BtZW50Tm90Rm91bmRTb3VyY2VQYWdlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlZENvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tU2VydmVyOiBCb29sZWFuKHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQuaXNDdXN0b21TZXJ2ZXIpIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwbG95bWVudElkOiBwcm9jZXNzLmVudi5ORVhUX0RFUExPWU1FTlRfSURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZU1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZUNvbmZpZzogY29uZmlnIHx8IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb21wb25lbnQ6IGludGVyb3BEZWZhdWx0KHVzZXJsYW5kKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50TW9kOiB1c2VybGFuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U3RhdGljUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFN0YXRpY1BhdGhzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRTZXJ2ZXJTaWRlUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlOiAhaGFzU3RhdGljUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRGb250TWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWN0TG9hZGFibGVNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRQcmVmaXg6IG5leHRDb25maWcuYXNzZXRQcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdE5leHRIZWFkOiBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5zdHJpY3ROZXh0SGVhZCA/PyB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3UHJvcHM6IHByZXJlbmRlck1hbmlmZXN0LnByZXZpZXcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlczogbmV4dENvbmZpZy5pbWFnZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRDb25maWdPdXRwdXQ6IG5leHRDb25maWcub3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWl6ZUNzczogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5vcHRpbWl6ZUNzcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTY3JpcHRXb3JrZXJzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLm5leHRTY3JpcHRXb3JrZXJzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluTG9jYWxlczogKF9uZXh0Q29uZmlnX2kxOG4gPSBuZXh0Q29uZmlnLmkxOG4pID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19pMThuLmRvbWFpbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyb3NzT3JpZ2luOiBuZXh0Q29uZmlnLmNyb3NzT3JpZ2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VQYXRoOiBuZXh0Q29uZmlnLmJhc2VQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5vbmljYWxCYXNlOiBuZXh0Q29uZmlnLmFtcC5jYW5vbmljYWxCYXNlIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbXBPcHRpbWl6ZXJDb25maWc6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWxfYW1wID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwuYW1wKSA9PSBudWxsID8gdm9pZCAwIDogX25leHRDb25maWdfZXhwZXJpbWVudGFsX2FtcC5vcHRpbWl6ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVPcHRpbWl6ZWRMb2FkaW5nOiBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5kaXNhYmxlT3B0aW1pemVkTG9hZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyZ2VQYWdlRGF0YUJ5dGVzOiBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5sYXJnZVBhZ2VEYXRhQnl0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgdGhlIGBwdWJsaWNSdW50aW1lQ29uZmlnYCBrZXkgaXMgZXhwb3NlZCB0byB0aGUgY2xpZW50IHNpZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXQnbGwgYmUgcmVuZGVyZWQgYXMgcGFydCBvZiBfX05FWFRfREFUQV9fIG9uIHRoZSBjbGllbnQgc2lkZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW50aW1lQ29uZmlnOiBPYmplY3Qua2V5cyhwdWJsaWNSdW50aW1lQ29uZmlnKS5sZW5ndGggPiAwID8gcHVibGljUnVudGltZUNvbmZpZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFeHBlcmltZW50YWxDb21waWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFRyYWNlTWV0YWRhdGE6IG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNsaWVudFRyYWNlTWV0YWRhdGEgfHwgW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TG9jYWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc3JTdGF0dXM6IHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQuc2V0SXNyU3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc05leHREYXRhUmVxdWVzdDogaXNOZXh0RGF0YVJlcXVlc3QgJiYgKGhhc1NlcnZlclByb3BzIHx8IGhhc1N0YXRpY1Byb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWRVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBnZXRTZXJ2ZXJTaWRlUHJvcHMgYW5kIGdldEluaXRpYWxQcm9wcyB3ZSBuZWVkIHRvIGVuc3VyZSB3ZSB1c2UgdGhlIG9yaWdpbmFsIFVSTFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgbm90IHRoZSByZXNvbHZlZCBVUkwgdG8gcHJldmVudCBhIGh5ZHJhdGlvbiBtaXNtYXRjaCBvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhc1BhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWRBc1BhdGg6IGhhc1NlcnZlclByb3BzIHx8IGhhc0dldEluaXRpYWxQcm9wcyA/IGZvcm1hdFVybCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSB1c2UgdGhlIG9yaWdpbmFsIFVSTCBwYXRobmFtZSBsZXNzIHRoZSBfbmV4dC9kYXRhIHByZWZpeCBpZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlc2VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aG5hbWU6IGlzTmV4dERhdGFSZXF1ZXN0ID8gbm9ybWFsaXplRGF0YVBhdGgob3JpZ2luYWxQYXRobmFtZSkgOiBvcmlnaW5hbFBhdGhuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IG9yaWdpbmFsUXVlcnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiByZXNvbHZlZFVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVycm9yRGVidWc6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ1BhZ2VzRXJyb3JEZWJ1ZycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnI6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2ludm9rZUVycm9yJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldjogcm91dGVNb2R1bGUuaXNEZXYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgZXhwZXJpbWVudGFsLm9wdGltaXplQ3NzIGZlYXR1cmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdERpcjogYCR7cm91dGVNb2R1bGUucHJvamVjdERpcn0vJHtyb3V0ZU1vZHVsZS5kaXN0RGlyfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFtcFNraXBWYWxpZGF0aW9uOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsX2FtcDEgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hbXApID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWxfYW1wMS5za2lwVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1wVmFsaWRhdG9yOiBnZXRSZXF1ZXN0TWV0YShyZXEsICdhbXBWYWxpZGF0b3InKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKHJlbmRlclJlc3VsdCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1ldGFkYXRhIH0gPSByZW5kZXJSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhY2hlQ29udHJvbCA9IG1ldGFkYXRhLmNhY2hlQ29udHJvbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ2lzTm90Rm91bmQnIGluIG1ldGFkYXRhICYmIG1ldGFkYXRhLmlzTm90Rm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBgaXNSZWRpcmVjdGAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhLmlzUmVkaXJlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLlJFRElSRUNULFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiBtZXRhZGF0YS5wYWdlRGF0YSA/PyBtZXRhZGF0YS5mbGlnaHREYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuUEFHRVMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sOiByZW5kZXJSZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlRGF0YTogcmVuZGVyUmVzdWx0Lm1ldGFkYXRhLnBhZ2VEYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogcmVuZGVyUmVzdWx0Lm1ldGFkYXRhLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlbmRlclJlc3VsdC5tZXRhZGF0YS5zdGF0dXNDb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAuc3RhdHVzX2NvZGUnOiByZXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSB0cmFjZXIuZ2V0Um9vdFNwYW5BdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJvb3RTcGFuQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpICE9PSBCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCByb290IHNwYW4gdHlwZSAnJHtyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpfScuIFBsZWFzZSByZXBvcnQgdGhpcyBOZXh0LmpzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qc2ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5yb3V0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7bWV0aG9kfSAke3JvdXRlfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnNwYW5fbmFtZSc6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3JlcS51cmx9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlcXVlc3QgZXJyb3IgaGVyZSBhcyBpdCB3b24ndCBiZSBidWJibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdQYWdlcyBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IHNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JlbmRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlOiBoYXNTdGF0aWNQcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIGlmIHdlJ3ZlIGFscmVhZHkgZ2VuZXJhdGVkIHRoaXMgcGFnZSB3ZSBubyBsb25nZXJcbiAgICAgICAgICAgICAgICAvLyBzZXJ2ZSB0aGUgZmFsbGJhY2tcbiAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlzSXNyRmFsbGJhY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlzSXNyRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tSZXNwb25zZSA9IGF3YWl0IHJvdXRlTW9kdWxlLmdldFJlc3BvbnNlQ2FjaGUocmVxKS5nZXQocm91dGVNb2R1bGUuaXNEZXYgPyBudWxsIDogbG9jYWxlID8gYC8ke2xvY2FsZX0ke3NyY1BhZ2V9YCA6IHNyY1BhZ2UsIGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeTogcHJldmlvdXNGYWxsYmFja0NhY2hlRW50cnkgPSBudWxsIH0pPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvUmVzcG9uc2VDYWNoZUVudHJ5KHByZXZpb3VzRmFsbGJhY2tDYWNoZUVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb1JlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZUtpbmQ6IFJvdXRlS2luZC5QQUdFUyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRhbENhY2hlOiBhd2FpdCByb3V0ZU1vZHVsZS5nZXRJbmNyZW1lbnRhbENhY2hlKHJlcSwgbmV4dENvbmZpZywgcHJlcmVuZGVyTWFuaWZlc3QpLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmFsbGJhY2tSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBjYWNoZSBjb250cm9sIGZyb20gdGhlIHJlc3BvbnNlIHRvIHByZXZlbnQgaXQgZnJvbSBiZWluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlZCBpbiB0aGUgc3Vycm91bmRpbmcgY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZmFsbGJhY2tSZXNwb25zZS5jYWNoZUNvbnRyb2w7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWxsYmFja1Jlc3BvbnNlLmlzTWlzcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsbGJhY2tSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNPbkRlbWFuZFJldmFsaWRhdGUgJiYgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQgJiYgIXByZXZpb3VzQ2FjaGVFbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCAnUkVWQUxJREFURUQnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlzSXNyRmFsbGJhY2sgJiYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9wcmV2aW91c0NhY2hlRW50cnlfdmFsdWUgPSBwcmV2aW91c0NhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfcHJldmlvdXNDYWNoZUVudHJ5X3ZhbHVlLmtpbmQpID09PSBDYWNoZWRSb3V0ZUtpbmQuUEFHRVMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLlBBR0VTLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6IG5ldyBSZW5kZXJSZXN1bHQoQnVmZmVyLmZyb20ocHJldmlvdXNDYWNoZUVudHJ5LnZhbHVlLmh0bWwpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAndGV4dC9odG1sO3V0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHByZXZpb3VzQ2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBwcmV2aW91c0NhY2hlRW50cnkudmFsdWUuaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZURhdGE6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogcHJldmlvdXNDYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBwcmV2aW91c0NhY2hlRW50cnkudmFsdWUuaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvUmVuZGVyKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLlBBR0VTLFxuICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLFxuICAgICAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcjogcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3RcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gaWYgd2UgZ290IGEgY2FjaGUgaGl0IHRoaXMgd2Fzbid0IGFuIElTUiBmYWxsYmFja1xuICAgICAgICAgICAgLy8gYnV0IGl0IHdhc24ndCBnZW5lcmF0ZWQgZHVyaW5nIGJ1aWxkIHNvIGlzbid0IGluIHRoZVxuICAgICAgICAgICAgLy8gcHJlcmVuZGVyLW1hbmlmZXN0XG4gICAgICAgICAgICBpZiAoaXNJc3JGYWxsYmFjayAmJiAhKHJlc3VsdCA9PSBudWxsID8gdm9pZCAwIDogcmVzdWx0LmlzTWlzcykpIHtcbiAgICAgICAgICAgICAgICBpc0lzckZhbGxiYWNrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZXNwb25zZSBpcyBmaW5pc2hlZCBpcyBubyBjYWNoZSBlbnRyeVxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFzU3RhdGljUHJvcHMgJiYgIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IHJlc3VsdC5pc01pc3MgPyAnTUlTUycgOiByZXN1bHQuaXNTdGFsZSA/ICdTVEFMRScgOiAnSElUJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY2FjaGVDb250cm9sO1xuICAgICAgICAgICAgaWYgKCFoYXNTdGF0aWNQcm9wcyB8fCBpc0lzckZhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpczQwNFBhZ2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub3RGb3VuZFJldmFsaWRhdGUgPSBnZXRSZXF1ZXN0TWV0YShyZXEsICdub3RGb3VuZFJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2wgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IHR5cGVvZiBub3RGb3VuZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnID8gMCA6IG5vdEZvdW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpczUwMFBhZ2UpIHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2wgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGU6IDAsXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmNhY2hlQ29udHJvbCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjYWNoZSBlbnRyeSBoYXMgYSBjYWNoZSBjb250cm9sIHdpdGggYSByZXZhbGlkYXRlIHZhbHVlIHRoYXQnc1xuICAgICAgICAgICAgICAgIC8vIGEgbnVtYmVyLCB1c2UgaXQuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQuY2FjaGVDb250cm9sLnJldmFsaWRhdGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfcmVzdWx0X2NhY2hlQ29udHJvbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jYWNoZUNvbnRyb2wucmV2YWxpZGF0ZSA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFsaWQgcmV2YWxpZGF0ZSBjb25maWd1cmF0aW9uIHByb3ZpZGVkOiAke3Jlc3VsdC5jYWNoZUNvbnRyb2wucmV2YWxpZGF0ZX0gPCAxYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkUyMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogcmVzdWx0LmNhY2hlQ29udHJvbC5yZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiAoKF9yZXN1bHRfY2FjaGVDb250cm9sID0gcmVzdWx0LmNhY2hlQ29udHJvbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9yZXN1bHRfY2FjaGVDb250cm9sLmV4cGlyZSkgPz8gbmV4dENvbmZpZy5leHBpcmVUaW1lXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV2YWxpZGF0ZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZTogQ0FDSEVfT05FX1lFQVIsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBpcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIGNhY2hlIGNvbnRyb2wgaXMgYWxyZWFkeSBzZXQgb24gdGhlIHJlc3BvbnNlIHdlIGRvbid0XG4gICAgICAgICAgICAvLyBvdmVycmlkZSBpdCB0byBhbGxvdyB1c2VycyB0byBjdXN0b21pemUgaXQgdmlhIG5leHQuY29uZmlnXG4gICAgICAgICAgICBpZiAoY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgZ2V0Q2FjaGVDb250cm9sSGVhZGVyKGNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbm90Rm91bmQ6IHRydWUgY2FzZVxuICAgICAgICAgICAgaWYgKCFyZXN1bHQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3Jlc3VsdF9jYWNoZUNvbnRyb2wxO1xuICAgICAgICAgICAgICAgIC8vIGFkZCByZXZhbGlkYXRlIG1ldGFkYXRhIGJlZm9yZSByZW5kZXJpbmcgNDA0IHBhZ2VcbiAgICAgICAgICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiB1c2UgdGhpcyBhcyBzb3VyY2Ugb2YgdHJ1dGggZm9yIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNhY2hlLWNvbnRyb2wgaGVhZGVyIGluc3RlYWQgb2Ygd2hhdCB0aGUgNDA0IHBhZ2UgcmV0dXJuc1xuICAgICAgICAgICAgICAgIC8vIGZvciB0aGUgcmV2YWxpZGF0ZSB2YWx1ZVxuICAgICAgICAgICAgICAgIGFkZFJlcXVlc3RNZXRhKHJlcSwgJ25vdEZvdW5kUmV2YWxpZGF0ZScsIChfcmVzdWx0X2NhY2hlQ29udHJvbDEgPSByZXN1bHQuY2FjaGVDb250cm9sKSA9PSBudWxsID8gdm9pZCAwIDogX3Jlc3VsdF9jYWNoZUNvbnRyb2wxLnJldmFsaWRhdGUpO1xuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgIGlmIChpc05leHREYXRhUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCd7XCJub3RGb3VuZFwiOnRydWV9Jyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogc2hvdWxkIHJvdXRlLW1vZHVsZSBpdHNlbGYgaGFuZGxlIHJlbmRlcmluZyB0aGUgNDA0XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlclNlcnZlckNvbnRleHQgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlclNlcnZlckNvbnRleHQucmVuZGVyNDA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlclNlcnZlckNvbnRleHQucmVuZGVyNDA0KHJlcSwgcmVzLCBwYXJzZWRVcmwsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQudmFsdWUua2luZCA9PT0gQ2FjaGVkUm91dGVLaW5kLlJFRElSRUNUKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmV4dERhdGFSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ2NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5lbmQoSlNPTi5zdHJpbmdpZnkocmVzdWx0LnZhbHVlLnByb3BzKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVSZWRpcmVjdCA9IChwYWdlRGF0YSk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBwYWdlRGF0YS5wYWdlUHJvcHMuX19OX1JFRElSRUNULFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHBhZ2VEYXRhLnBhZ2VQcm9wcy5fX05fUkVESVJFQ1RfU1RBVFVTLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VQYXRoOiBwYWdlRGF0YS5wYWdlUHJvcHMuX19OX1JFRElSRUNUX0JBU0VfUEFUSFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1c0NvZGUgPSBnZXRSZWRpcmVjdFN0YXR1cyhyZWRpcmVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGJhc2VQYXRoIH0gPSBuZXh0Q29uZmlnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VQYXRoICYmIHJlZGlyZWN0LmJhc2VQYXRoICE9PSBmYWxzZSAmJiByZWRpcmVjdC5kZXN0aW5hdGlvbi5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdC5kZXN0aW5hdGlvbiA9IGAke2Jhc2VQYXRofSR7cmVkaXJlY3QuZGVzdGluYXRpb259YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWRpcmVjdC5kZXN0aW5hdGlvbi5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdC5kZXN0aW5hdGlvbiA9IG5vcm1hbGl6ZVJlcGVhdGVkU2xhc2hlcyhyZWRpcmVjdC5kZXN0aW5hdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdMb2NhdGlvbicsIHJlZGlyZWN0LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID09PSBSZWRpcmVjdFN0YXR1c0NvZGUuUGVybWFuZW50UmVkaXJlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdSZWZyZXNoJywgYDA7dXJsPSR7cmVkaXJlY3QuZGVzdGluYXRpb259YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKHJlZGlyZWN0LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVkaXJlY3QocmVzdWx0LnZhbHVlLnByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZS5raW5kICE9PSBDYWNoZWRSb3V0ZUtpbmQuUEFHRVMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBJbnZhcmlhbnQ6IHJlY2VpdmVkIG5vbi1wYWdlcyBjYWNoZSBlbnRyeSBpbiBwYWdlcyBoYW5kbGVyYCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNjk1XCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEluIGRldiwgd2Ugc2hvdWxkIG5vdCBjYWNoZSBwYWdlcyBmb3IgYW55IHJlYXNvbi5cbiAgICAgICAgICAgIGlmIChyb3V0ZU1vZHVsZS5pc0Rldikge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAnbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHdoZW4gaW52b2tpbmcgX2Vycm9yIGJlZm9yZSBwYWdlcy81MDAgd2UgZG9uJ3QgYWN0dWFsbHlcbiAgICAgICAgICAgIC8vIHNlbmQgdGhlIF9lcnJvciByZXNwb25zZVxuICAgICAgICAgICAgaWYgKGdldFJlcXVlc3RNZXRhKHJlcSwgJ2N1c3RvbUVycm9yUmVuZGVyJykgfHwgaXNFcnJvclBhZ2UgJiYgZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiByZXMuc3RhdHVzQ29kZSA9PT0gNTAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBzZW5kUmVuZGVyUmVzdWx0KHtcbiAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgcmVzLFxuICAgICAgICAgICAgICAgIC8vIElmIHdlIGFyZSByZW5kZXJpbmcgdGhlIGVycm9yIHBhZ2UgaXQncyBub3QgYSBkYXRhIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAvLyBhbnltb3JlXG4gICAgICAgICAgICAgICAgcmVzdWx0OiBpc05leHREYXRhUmVxdWVzdCAmJiAhaXNFcnJvclBhZ2UgJiYgIWlzNTAwUGFnZSA/IG5ldyBSZW5kZXJSZXN1bHQoQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkocmVzdWx0LnZhbHVlLnBhZ2VEYXRhKSksIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJlc3VsdC52YWx1ZS5odG1sLm1ldGFkYXRhXG4gICAgICAgICAgICAgICAgfSkgOiByZXN1bHQudmFsdWUuaHRtbCxcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZUV0YWdzOiBuZXh0Q29uZmlnLmdlbmVyYXRlRXRhZ3MsXG4gICAgICAgICAgICAgICAgcG93ZXJlZEJ5SGVhZGVyOiBuZXh0Q29uZmlnLnBvd2VyZWRCeUhlYWRlcixcbiAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IHJvdXRlTW9kdWxlLmlzRGV2ID8gdW5kZWZpbmVkIDogY2FjaGVDb250cm9sLFxuICAgICAgICAgICAgICAgIHR5cGU6IGlzTmV4dERhdGFSZXF1ZXN0ID8gJ2pzb24nIDogJ2h0bWwnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdQYWdlcyBSb3V0ZXInLFxuICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyZW5kZXInLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGU6IGhhc1N0YXRpY1Byb3BzLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2F.pnpm%2Fnext%4015.4.5_%40babel%2Bcore%407.28.0_react-dom%4019.1.1_react%4019.1.1__react%4019.1.1%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./pages/Layout.tsx":
/*!**************************!*\
  !*** ./pages/Layout.tsx ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Layout)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/link */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/link.js\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/router */ \"./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _components_AuthContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/AuthContext */ \"./components/AuthContext.tsx\");\n/* harmony import */ var _context_AppStateContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../context/AppStateContext */ \"./context/AppStateContext.tsx\");\n/* harmony import */ var _components_LogoutButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/LogoutButton */ \"./components/LogoutButton.tsx\");\n// src/ui/pages/Layout.tsx\n\n\n\n\n\n\n\n// Use a static public path for the logo to avoid bundling object URLs\nconst logoPath = '/assets/grace_logo_gold.png';\nfunction Layout({ children }) {\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    const { pathname } = router;\n    const { user } = (0,_components_AuthContext__WEBPACK_IMPORTED_MODULE_4__.useAuth)();\n    const [mobileMenuOpen, setMobileMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Use the AppState context\n    const { dispatch, hydrateFromStorage } = (0,_context_AppStateContext__WEBPACK_IMPORTED_MODULE_5__.useAppState)();\n    // Capture page state on path change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Layout.useEffect\": ()=>{\n            if (user) {\n                dispatch({\n                    type: 'SET_PAGE_STATE',\n                    payload: {\n                        lastVisitedPath: pathname\n                    }\n                });\n            }\n        }\n    }[\"Layout.useEffect\"], [\n        pathname,\n        user,\n        dispatch\n    ]);\n    // Removed beforeunload prompt to allow smooth navigation\n    // Hydrate state on initial load\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"Layout.useEffect\": ()=>{\n            if (user) {\n                hydrateFromStorage({\n                    \"Layout.useEffect\": (path)=>{\n                        router.push(path);\n                    }\n                }[\"Layout.useEffect\"]);\n            }\n        }\n    }[\"Layout.useEffect\"], [\n        user,\n        router,\n        hydrateFromStorage\n    ]);\n    const navLinks = [\n        {\n            name: 'Chat',\n            path: '/chat'\n        },\n        {\n            name: 'Wallet',\n            path: '/wallet'\n        },\n        {\n            name: 'Trading',\n            path: '/trading'\n        },\n        {\n            name: 'Social',\n            path: '/social'\n        },\n        {\n            name: 'Settings',\n            path: '/settings'\n        }\n    ];\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-gradient-to-b from-[#140000] to-black text-white flex flex-col items-center\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                className: \"w-full max-w-screen-md text-center border-b border-red-700 pb-1 mb-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                        src: logoPath,\n                        alt: \"Grace Logo\",\n                        className: \"w-48 md:w-56 mx-auto mt-2 mb-1\"\n                    }, void 0, false, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/Layout.tsx\",\n                        lineNumber: 56,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: \"md:hidden absolute right-4 top-6 text-white p-2\",\n                        onClick: ()=>setMobileMenuOpen(!mobileMenuOpen),\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            className: \"h-6 w-6\",\n                            fill: \"none\",\n                            viewBox: \"0 0 24 24\",\n                            stroke: \"currentColor\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                strokeLinecap: \"round\",\n                                strokeLinejoin: \"round\",\n                                strokeWidth: 2,\n                                d: mobileMenuOpen ? \"M6 18L18 6M6 6l12 12\" : \"M4 6h16M4 12h16M4 18h16\"\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/Layout.tsx\",\n                                lineNumber: 64,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/Layout.tsx\",\n                            lineNumber: 63,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/Layout.tsx\",\n                        lineNumber: 59,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"nav\", {\n                        className: `\n          ${mobileMenuOpen ? 'flex' : 'hidden'} \n          md:flex \n          flex-col md:flex-row \n          justify-center \n          md:space-x-6 md:space-y-0 \n          space-y-4 \n          text-red-300 text-lg md:text-xl font-mono\n          w-full \n          pb-1\n        `,\n                        children: [\n                            navLinks.map((link)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_2___default()), {\n                                    href: link.path,\n                                    onClick: ()=>setMobileMenuOpen(false),\n                                    className: `transition-all hover:text-red-400 pb-1 ${pathname === link.path ? 'text-red-300 border-b border-red-500' : 'text-white'}`,\n                                    children: link.name\n                                }, link.path, false, {\n                                    fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/Layout.tsx\",\n                                    lineNumber: 81,\n                                    columnNumber: 13\n                                }, this)),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LogoutButton__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {}, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/Layout.tsx\",\n                                lineNumber: 90,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/Layout.tsx\",\n                        lineNumber: 69,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/Layout.tsx\",\n                lineNumber: 55,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                className: \"w-full max-w-screen-md px-4 py-3 flex-grow\",\n                children: children\n            }, void 0, false, {\n                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/Layout.tsx\",\n                lineNumber: 93,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/Layout.tsx\",\n        lineNumber: 54,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9MYXlvdXQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDBCQUEwQjs7QUFFb0M7QUFDakM7QUFDVztBQUNZO0FBQ0s7QUFDSDtBQUV0RCxzRUFBc0U7QUFDdEUsTUFBTVEsV0FBVztBQU1GLFNBQVNDLE9BQU8sRUFBRUMsUUFBUSxFQUFlO0lBQ3RELE1BQU1DLFNBQVNQLHNEQUFTQTtJQUN4QixNQUFNLEVBQUVRLFFBQVEsRUFBRSxHQUFHRDtJQUNyQixNQUFNLEVBQUVFLElBQUksRUFBRSxHQUFHUixnRUFBT0E7SUFDeEIsTUFBTSxDQUFDUyxnQkFBZ0JDLGtCQUFrQixHQUFHZCwrQ0FBUUEsQ0FBQztJQUVyRCwyQkFBMkI7SUFDM0IsTUFBTSxFQUFFZSxRQUFRLEVBQUVDLGtCQUFrQixFQUFFLEdBQUdYLHFFQUFXQTtJQUVwRCxvQ0FBb0M7SUFDcENKLGdEQUFTQTs0QkFBQztZQUNSLElBQUlXLE1BQU07Z0JBQ1JHLFNBQVM7b0JBQ1BFLE1BQU07b0JBQ05DLFNBQVM7d0JBQUVDLGlCQUFpQlI7b0JBQVM7Z0JBQ3ZDO1lBQ0Y7UUFDRjsyQkFBRztRQUFDQTtRQUFVQztRQUFNRztLQUFTO0lBRTdCLHlEQUF5RDtJQUV6RCxnQ0FBZ0M7SUFDaENkLGdEQUFTQTs0QkFBQztZQUNSLElBQUlXLE1BQU07Z0JBQ1JJO3dDQUFtQixDQUFDSTt3QkFBV1YsT0FBT1csSUFBSSxDQUFDRDtvQkFBTzs7WUFDcEQ7UUFDRjsyQkFBRztRQUFDUjtRQUFNRjtRQUFRTTtLQUFtQjtJQUVyQyxNQUFNTSxXQUFXO1FBQ2Y7WUFBRUMsTUFBTTtZQUFRSCxNQUFNO1FBQVE7UUFDOUI7WUFBRUcsTUFBTTtZQUFVSCxNQUFNO1FBQVU7UUFDbEM7WUFBRUcsTUFBTTtZQUFXSCxNQUFNO1FBQVc7UUFDcEM7WUFBRUcsTUFBTTtZQUFVSCxNQUFNO1FBQVU7UUFDbEM7WUFBRUcsTUFBTTtZQUFZSCxNQUFNO1FBQVk7S0FDdkM7SUFFRCxxQkFDRSw4REFBQ0k7UUFBSUMsV0FBVTs7MEJBQ2IsOERBQUNDO2dCQUFPRCxXQUFVOztrQ0FDaEIsOERBQUNFO3dCQUFJQyxLQUFLckI7d0JBQVVzQixLQUFJO3dCQUFhSixXQUFVOzs7Ozs7a0NBRy9DLDhEQUFDSzt3QkFDQ0wsV0FBVTt3QkFDVk0sU0FBUyxJQUFNakIsa0JBQWtCLENBQUNEO2tDQUVsQyw0RUFBQ21COzRCQUFJQyxPQUFNOzRCQUE2QlIsV0FBVTs0QkFBVVMsTUFBSzs0QkFBT0MsU0FBUTs0QkFBWUMsUUFBTztzQ0FDakcsNEVBQUNoQjtnQ0FBS2lCLGVBQWM7Z0NBQVFDLGdCQUFlO2dDQUFRQyxhQUFhO2dDQUFHQyxHQUFHM0IsaUJBQWlCLHlCQUF5Qjs7Ozs7Ozs7Ozs7Ozs7OztrQ0FLcEgsOERBQUM0Qjt3QkFBSWhCLFdBQVcsQ0FBQztVQUNmLEVBQUVaLGlCQUFpQixTQUFTLFNBQVM7Ozs7Ozs7OztRQVN2QyxDQUFDOzs0QkFDRVMsU0FBU29CLEdBQUcsQ0FBQyxDQUFDQyxxQkFDYiw4REFBQ3pDLGtEQUFJQTtvQ0FFSDBDLE1BQU1ELEtBQUt2QixJQUFJO29DQUNmVyxTQUFTLElBQU1qQixrQkFBa0I7b0NBQ2pDVyxXQUFXLENBQUMsdUNBQXVDLEVBQUVkLGFBQWFnQyxLQUFLdkIsSUFBSSxHQUFHLHlDQUF5QyxjQUFjOzhDQUVwSXVCLEtBQUtwQixJQUFJO21DQUxMb0IsS0FBS3ZCLElBQUk7Ozs7OzBDQVFsQiw4REFBQ2QsZ0VBQVlBOzs7Ozs7Ozs7Ozs7Ozs7OzswQkFHakIsOERBQUN1QztnQkFBS3BCLFdBQVU7MEJBQ2JoQjs7Ozs7Ozs7Ozs7O0FBSVQiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b25rYXN3b3JsZC9Eb3dubG9hZHMvZ3JhY2UtcHJvamVjdC9zcmMvdWkvcGFnZXMvTGF5b3V0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdWkvcGFnZXMvTGF5b3V0LnRzeFxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IExpbmsgZnJvbSAnbmV4dC9saW5rJztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICcuLi9jb21wb25lbnRzL0F1dGhDb250ZXh0JztcbmltcG9ydCB7IHVzZUFwcFN0YXRlIH0gZnJvbSAnLi4vY29udGV4dC9BcHBTdGF0ZUNvbnRleHQnO1xuaW1wb3J0IExvZ291dEJ1dHRvbiBmcm9tICcuLi9jb21wb25lbnRzL0xvZ291dEJ1dHRvbic7XG5cbi8vIFVzZSBhIHN0YXRpYyBwdWJsaWMgcGF0aCBmb3IgdGhlIGxvZ28gdG8gYXZvaWQgYnVuZGxpbmcgb2JqZWN0IFVSTHNcbmNvbnN0IGxvZ29QYXRoID0gJy9hc3NldHMvZ3JhY2VfbG9nb19nb2xkLnBuZyc7XG5cbmludGVyZmFjZSBMYXlvdXRQcm9wcyB7XG4gIGNoaWxkcmVuPzogUmVhY3ROb2RlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMYXlvdXQoeyBjaGlsZHJlbiB9OiBMYXlvdXRQcm9wcykge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgeyBwYXRobmFtZSB9ID0gcm91dGVyO1xuICBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3QgW21vYmlsZU1lbnVPcGVuLCBzZXRNb2JpbGVNZW51T3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gVXNlIHRoZSBBcHBTdGF0ZSBjb250ZXh0XG4gIGNvbnN0IHsgZGlzcGF0Y2gsIGh5ZHJhdGVGcm9tU3RvcmFnZSB9ID0gdXNlQXBwU3RhdGUoKTtcbiAgXG4gIC8vIENhcHR1cmUgcGFnZSBzdGF0ZSBvbiBwYXRoIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh1c2VyKSB7XG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6ICdTRVRfUEFHRV9TVEFURScsXG4gICAgICAgIHBheWxvYWQ6IHsgbGFzdFZpc2l0ZWRQYXRoOiBwYXRobmFtZSB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtwYXRobmFtZSwgdXNlciwgZGlzcGF0Y2hdKTtcblxuICAvLyBSZW1vdmVkIGJlZm9yZXVubG9hZCBwcm9tcHQgdG8gYWxsb3cgc21vb3RoIG5hdmlnYXRpb25cblxuICAvLyBIeWRyYXRlIHN0YXRlIG9uIGluaXRpYWwgbG9hZFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh1c2VyKSB7XG4gICAgICBoeWRyYXRlRnJvbVN0b3JhZ2UoKHBhdGgpID0+IHsgcm91dGVyLnB1c2gocGF0aCk7IH0pO1xuICAgIH1cbiAgfSwgW3VzZXIsIHJvdXRlciwgaHlkcmF0ZUZyb21TdG9yYWdlXSk7XG5cbiAgY29uc3QgbmF2TGlua3MgPSBbXG4gICAgeyBuYW1lOiAnQ2hhdCcsIHBhdGg6ICcvY2hhdCcgfSxcbiAgICB7IG5hbWU6ICdXYWxsZXQnLCBwYXRoOiAnL3dhbGxldCcgfSxcbiAgICB7IG5hbWU6ICdUcmFkaW5nJywgcGF0aDogJy90cmFkaW5nJyB9LFxuICAgIHsgbmFtZTogJ1NvY2lhbCcsIHBhdGg6ICcvc29jaWFsJyB9LFxuICAgIHsgbmFtZTogJ1NldHRpbmdzJywgcGF0aDogJy9zZXR0aW5ncycgfSxcbiAgXTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYWRpZW50LXRvLWIgZnJvbS1bIzE0MDAwMF0gdG8tYmxhY2sgdGV4dC13aGl0ZSBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgPGhlYWRlciBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXctc2NyZWVuLW1kIHRleHQtY2VudGVyIGJvcmRlci1iIGJvcmRlci1yZWQtNzAwIHBiLTEgbWItMlwiPlxuICAgICAgICA8aW1nIHNyYz17bG9nb1BhdGh9IGFsdD1cIkdyYWNlIExvZ29cIiBjbGFzc05hbWU9XCJ3LTQ4IG1kOnctNTYgbXgtYXV0byBtdC0yIG1iLTFcIiAvPlxuICAgICAgICBcbiAgICAgICAgey8qIE1vYmlsZSBoYW1idXJnZXIgYnV0dG9uICovfVxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIGNsYXNzTmFtZT1cIm1kOmhpZGRlbiBhYnNvbHV0ZSByaWdodC00IHRvcC02IHRleHQtd2hpdGUgcC0yXCIgXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0TW9iaWxlTWVudU9wZW4oIW1vYmlsZU1lbnVPcGVuKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNiB3LTZcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD17bW9iaWxlTWVudU9wZW4gPyBcIk02IDE4TDE4IDZNNiA2bDEyIDEyXCIgOiBcIk00IDZoMTZNNCAxMmgxNk00IDE4aDE2XCJ9IC8+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBcbiAgICAgICAgey8qIERlc2t0b3AgbmF2IGJhciAqL31cbiAgICAgICAgPG5hdiBjbGFzc05hbWU9e2BcbiAgICAgICAgICAke21vYmlsZU1lbnVPcGVuID8gJ2ZsZXgnIDogJ2hpZGRlbid9IFxuICAgICAgICAgIG1kOmZsZXggXG4gICAgICAgICAgZmxleC1jb2wgbWQ6ZmxleC1yb3cgXG4gICAgICAgICAganVzdGlmeS1jZW50ZXIgXG4gICAgICAgICAgbWQ6c3BhY2UteC02IG1kOnNwYWNlLXktMCBcbiAgICAgICAgICBzcGFjZS15LTQgXG4gICAgICAgICAgdGV4dC1yZWQtMzAwIHRleHQtbGcgbWQ6dGV4dC14bCBmb250LW1vbm9cbiAgICAgICAgICB3LWZ1bGwgXG4gICAgICAgICAgcGItMVxuICAgICAgICBgfT5cbiAgICAgICAgICB7bmF2TGlua3MubWFwKChsaW5rKSA9PiAoXG4gICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICBrZXk9e2xpbmsucGF0aH1cbiAgICAgICAgICAgICAgaHJlZj17bGluay5wYXRofVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRNb2JpbGVNZW51T3BlbihmYWxzZSl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YHRyYW5zaXRpb24tYWxsIGhvdmVyOnRleHQtcmVkLTQwMCBwYi0xICR7cGF0aG5hbWUgPT09IGxpbmsucGF0aCA/ICd0ZXh0LXJlZC0zMDAgYm9yZGVyLWIgYm9yZGVyLXJlZC01MDAnIDogJ3RleHQtd2hpdGUnfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtsaW5rLm5hbWV9XG4gICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgKSl9XG4gICAgICAgICAgPExvZ291dEJ1dHRvbiAvPlxuICAgICAgICA8L25hdj5cbiAgICAgIDwvaGVhZGVyPlxuICAgICAgPG1haW4gY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LXNjcmVlbi1tZCBweC00IHB5LTMgZmxleC1ncm93XCI+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgIDwvbWFpbj5cbiAgICA8L2Rpdj5cbiAgKTtcbn0iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsIkxpbmsiLCJ1c2VSb3V0ZXIiLCJ1c2VBdXRoIiwidXNlQXBwU3RhdGUiLCJMb2dvdXRCdXR0b24iLCJsb2dvUGF0aCIsIkxheW91dCIsImNoaWxkcmVuIiwicm91dGVyIiwicGF0aG5hbWUiLCJ1c2VyIiwibW9iaWxlTWVudU9wZW4iLCJzZXRNb2JpbGVNZW51T3BlbiIsImRpc3BhdGNoIiwiaHlkcmF0ZUZyb21TdG9yYWdlIiwidHlwZSIsInBheWxvYWQiLCJsYXN0VmlzaXRlZFBhdGgiLCJwYXRoIiwicHVzaCIsIm5hdkxpbmtzIiwibmFtZSIsImRpdiIsImNsYXNzTmFtZSIsImhlYWRlciIsImltZyIsInNyYyIsImFsdCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzdmciLCJ4bWxucyIsImZpbGwiLCJ2aWV3Qm94Iiwic3Ryb2tlIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwibmF2IiwibWFwIiwibGluayIsImhyZWYiLCJtYWluIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/Layout.tsx\n");

/***/ }),

/***/ "./pages/_app.tsx":
/*!************************!*\
  !*** ./pages/_app.tsx ***!
  \************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ App)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/AuthContext */ \"./components/AuthContext.tsx\");\n/* harmony import */ var _context_AppStateContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context/AppStateContext */ \"./context/AppStateContext.tsx\");\n/* harmony import */ var _components_ErrorBoundary__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/ErrorBoundary */ \"./components/ErrorBoundary.tsx\");\n/* harmony import */ var _components_StateLoader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/StateLoader */ \"./components/StateLoader.tsx\");\n/* harmony import */ var _components_LoadingPage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/LoadingPage */ \"./components/LoadingPage.tsx\");\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-toastify */ \"react-toastify\");\n/* harmony import */ var _Layout__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Layout */ \"./pages/Layout.tsx\");\n/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../index.css */ \"./index.css\");\n/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_index_css__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var react_toastify_dist_ReactToastify_css__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-toastify/dist/ReactToastify.css */ \"./node_modules/.pnpm/react-toastify@10.0.6_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/react-toastify/dist/ReactToastify.css\");\n/* harmony import */ var react_toastify_dist_ReactToastify_css__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_toastify_dist_ReactToastify_css__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _styles_animations_css__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../styles/animations.css */ \"./styles/animations.css\");\n/* harmony import */ var _styles_animations_css__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_styles_animations_css__WEBPACK_IMPORTED_MODULE_11__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_toastify__WEBPACK_IMPORTED_MODULE_7__]);\nreact_toastify__WEBPACK_IMPORTED_MODULE_7__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\n\n\n\n// Pages that should have the layout (header/navigation)\nconst pagesWithLayout = [\n    '/chat',\n    '/wallet',\n    '/trading',\n    '/social',\n    '/settings'\n];\n// Pages that don't require authentication\nconst publicPages = [\n    '/login',\n    '/register',\n    '/forgot',\n    '/reset'\n];\n// Auth guard component to protect routes\nfunction AuthGuard({ children, router }) {\n    const { user, loading, isAuthenticated } = (0,_components_AuthContext__WEBPACK_IMPORTED_MODULE_2__.useAuth)();\n    const isPublicPage = publicPages.includes(router.pathname);\n    const [isNavigating, setIsNavigating] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const lastRedirectAtRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const initialLoadComplete = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    // Once the initial load is complete, we'll handle redirects\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthGuard.useEffect\": ()=>{\n            if (!loading) {\n                initialLoadComplete.current = true;\n            }\n        }\n    }[\"AuthGuard.useEffect\"], [\n        loading\n    ]);\n    // Handle redirects separately, but only after initial auth check\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthGuard.useEffect\": ()=>{\n            if (!initialLoadComplete.current) return;\n            // If still loading auth, don't redirect yet\n            if (loading) return;\n            // Skip navigation if:\n            // 1. Still loading authentication state\n            // 2. Already navigating\n            // 3. Initial load hasn't completed\n            if (loading || isNavigating || !initialLoadComplete.current) {\n                return;\n            }\n            // If not authenticated and not on a public page, redirect to login\n            if (!isAuthenticated && !user && !isPublicPage) {\n                console.log('AuthGuard: Redirecting unauthenticated user to login');\n                setIsNavigating(true);\n                router.push('/login').then({\n                    \"AuthGuard.useEffect\": ()=>setIsNavigating(false)\n                }[\"AuthGuard.useEffect\"]).catch({\n                    \"AuthGuard.useEffect\": (error)=>{\n                        console.error('Navigation error:', error);\n                        setIsNavigating(false);\n                    }\n                }[\"AuthGuard.useEffect\"]);\n            }\n            // If authenticated and on a public page, redirect to chat\n            // But only if there isn't an explicit navigation happening from login/register\n            // (which is handled by the useEffect in those components)\n            if (isAuthenticated && user && isPublicPage) {\n                // Coordination flag set by login/register to avoid double redirects\n                let skipPublicRedirect = false;\n                try {\n                    skipPublicRedirect = sessionStorage.getItem('GRACE_POST_LOGIN_REDIRECT') === '1';\n                } catch  {}\n                // Throttle repeated redirects within a short window\n                const now = Date.now();\n                const recentlyRedirected = now - lastRedirectAtRef.current < 1000;\n                // Persist a one-time guard to avoid repeated redirects across remounts\n                let alreadyRedirected = false;\n                try {\n                    alreadyRedirected = sessionStorage.getItem('GRACE_ALREADY_REDIRECTED') === '1';\n                } catch  {}\n                if (!skipPublicRedirect && !recentlyRedirected && !alreadyRedirected) {\n                    console.log('AuthGuard: Redirecting authenticated user to chat');\n                    lastRedirectAtRef.current = now;\n                    setIsNavigating(true);\n                    try {\n                        sessionStorage.setItem('GRACE_ALREADY_REDIRECTED', '1');\n                    } catch  {}\n                    router.replace('/chat').then({\n                        \"AuthGuard.useEffect\": ()=>setIsNavigating(false)\n                    }[\"AuthGuard.useEffect\"]).catch({\n                        \"AuthGuard.useEffect\": (error)=>{\n                            console.error('Navigation error:', error);\n                            setIsNavigating(false);\n                        }\n                    }[\"AuthGuard.useEffect\"]);\n                } else {\n                    // Clear the flag after the first pass to re-enable normal behavior\n                    try {\n                        sessionStorage.removeItem('GRACE_POST_LOGIN_REDIRECT');\n                    } catch  {}\n                }\n            }\n        }\n    }[\"AuthGuard.useEffect\"], [\n        isAuthenticated,\n        user,\n        isPublicPage,\n        loading,\n        router\n    ]);\n    // Clear the one-time redirect guard when we are on /chat\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"AuthGuard.useEffect\": ()=>{\n            if (router.pathname === '/chat') {\n                try {\n                    sessionStorage.removeItem('GRACE_ALREADY_REDIRECTED');\n                } catch  {}\n            }\n        }\n    }[\"AuthGuard.useEffect\"], [\n        router.pathname\n    ]);\n    // Show enhanced loading states\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LoadingPage__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n            message: \"Loading authentication...\"\n        }, void 0, false, {\n            fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n            lineNumber: 110,\n            columnNumber: 12\n        }, this);\n    }\n    // Show navigation state\n    if (isNavigating) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LoadingPage__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n            message: \"Navigating...\"\n        }, void 0, false, {\n            fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n            lineNumber: 115,\n            columnNumber: 12\n        }, this);\n    }\n    // Don't render children until auth check is complete\n    if (!loading && !user && !isPublicPage) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LoadingPage__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n            message: \"Redirecting to login...\"\n        }, void 0, false, {\n            fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n            lineNumber: 120,\n            columnNumber: 12\n        }, this);\n    }\n    // Render children with proper layout\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: children\n    }, void 0, false);\n}\nfunction App({ Component, pageProps, router }) {\n    const shouldHaveLayout = pagesWithLayout.includes(router.pathname);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ErrorBoundary__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n        componentName: \"Main App\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AuthContext__WEBPACK_IMPORTED_MODULE_2__.AuthProvider, {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_context_AppStateContext__WEBPACK_IMPORTED_MODULE_3__.AppStateProvider, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_StateLoader__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthGuard, {\n                        router: router,\n                        children: [\n                            shouldHaveLayout ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Layout__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                                    ...pageProps\n                                }, void 0, false, {\n                                    fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n                                    lineNumber: 138,\n                                    columnNumber: 19\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n                                lineNumber: 137,\n                                columnNumber: 17\n                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                                ...pageProps\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n                                lineNumber: 141,\n                                columnNumber: 17\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_toastify__WEBPACK_IMPORTED_MODULE_7__.ToastContainer, {\n                                position: \"bottom-right\",\n                                theme: \"dark\"\n                            }, void 0, false, {\n                                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n                                lineNumber: 143,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n                        lineNumber: 135,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n                    lineNumber: 134,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n                lineNumber: 133,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n            lineNumber: 132,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/wonkasworld/Downloads/grace-project/src/ui/pages/_app.tsx\",\n        lineNumber: 131,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUdDLFNBQVM7Ozs7OzswQ0FFMUIsOERBQUNyQywwREFBY0E7Z0NBQUN3QyxVQUFTO2dDQUFlQyxPQUFNOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU81RCIsInNvdXJjZXMiOlsiL1VzZXJzL3dvbmthc3dvcmxkL0Rvd25sb2Fkcy9ncmFjZS1wcm9qZWN0L3NyYy91aS9wYWdlcy9fYXBwLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQXBwUHJvcHMgfSBmcm9tICduZXh0L2FwcCc7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L3JvdXRlcic7XG5pbXBvcnQgeyBBdXRoUHJvdmlkZXIsIHVzZUF1dGggfSBmcm9tICcuLi9jb21wb25lbnRzL0F1dGhDb250ZXh0JztcbmltcG9ydCB7IEFwcFN0YXRlUHJvdmlkZXIgfSBmcm9tICcuLi9jb250ZXh0L0FwcFN0YXRlQ29udGV4dCc7XG5pbXBvcnQgRXJyb3JCb3VuZGFyeSBmcm9tICcuLi9jb21wb25lbnRzL0Vycm9yQm91bmRhcnknO1xuaW1wb3J0IFN0YXRlTG9hZGVyIGZyb20gJy4uL2NvbXBvbmVudHMvU3RhdGVMb2FkZXInO1xuaW1wb3J0IExvYWRpbmdQYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvTG9hZGluZ1BhZ2UnO1xuaW1wb3J0IHsgVG9hc3RDb250YWluZXIgfSBmcm9tICdyZWFjdC10b2FzdGlmeSc7XG5pbXBvcnQgTGF5b3V0IGZyb20gJy4vTGF5b3V0JztcbmltcG9ydCAnLi4vaW5kZXguY3NzJztcbmltcG9ydCAncmVhY3QtdG9hc3RpZnkvZGlzdC9SZWFjdFRvYXN0aWZ5LmNzcyc7XG5pbXBvcnQgJy4uL3N0eWxlcy9hbmltYXRpb25zLmNzcyc7XG5cbi8vIFBhZ2VzIHRoYXQgc2hvdWxkIGhhdmUgdGhlIGxheW91dCAoaGVhZGVyL25hdmlnYXRpb24pXG5jb25zdCBwYWdlc1dpdGhMYXlvdXQgPSBbJy9jaGF0JywgJy93YWxsZXQnLCAnL3RyYWRpbmcnLCAnL3NvY2lhbCcsICcvc2V0dGluZ3MnXTtcblxuLy8gUGFnZXMgdGhhdCBkb24ndCByZXF1aXJlIGF1dGhlbnRpY2F0aW9uXG5jb25zdCBwdWJsaWNQYWdlcyA9IFsnL2xvZ2luJywgJy9yZWdpc3RlcicsICcvZm9yZ290JywgJy9yZXNldCddO1xuXG4vLyBBdXRoIGd1YXJkIGNvbXBvbmVudCB0byBwcm90ZWN0IHJvdXRlc1xuZnVuY3Rpb24gQXV0aEd1YXJkKHsgY2hpbGRyZW4sIHJvdXRlciB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUsIHJvdXRlcjogYW55IH0pIHtcbiAgY29uc3QgeyB1c2VyLCBsb2FkaW5nLCBpc0F1dGhlbnRpY2F0ZWQgfSA9IHVzZUF1dGgoKTtcbiAgY29uc3QgaXNQdWJsaWNQYWdlID0gcHVibGljUGFnZXMuaW5jbHVkZXMocm91dGVyLnBhdGhuYW1lKTtcbiAgY29uc3QgW2lzTmF2aWdhdGluZywgc2V0SXNOYXZpZ2F0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgbGFzdFJlZGlyZWN0QXRSZWYgPSB1c2VSZWY8bnVtYmVyPigwKTtcbiAgY29uc3QgaW5pdGlhbExvYWRDb21wbGV0ZSA9IHVzZVJlZihmYWxzZSk7XG4gIFxuICAvLyBPbmNlIHRoZSBpbml0aWFsIGxvYWQgaXMgY29tcGxldGUsIHdlJ2xsIGhhbmRsZSByZWRpcmVjdHNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWxvYWRpbmcpIHtcbiAgICAgIGluaXRpYWxMb2FkQ29tcGxldGUuY3VycmVudCA9IHRydWU7XG4gICAgfVxuICB9LCBbbG9hZGluZ10pO1xuICBcbiAgLy8gSGFuZGxlIHJlZGlyZWN0cyBzZXBhcmF0ZWx5LCBidXQgb25seSBhZnRlciBpbml0aWFsIGF1dGggY2hlY2tcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWluaXRpYWxMb2FkQ29tcGxldGUuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgLy8gSWYgc3RpbGwgbG9hZGluZyBhdXRoLCBkb24ndCByZWRpcmVjdCB5ZXRcbiAgICBpZiAobG9hZGluZykgcmV0dXJuO1xuXG4gICAgLy8gU2tpcCBuYXZpZ2F0aW9uIGlmOlxuICAgIC8vIDEuIFN0aWxsIGxvYWRpbmcgYXV0aGVudGljYXRpb24gc3RhdGVcbiAgICAvLyAyLiBBbHJlYWR5IG5hdmlnYXRpbmdcbiAgICAvLyAzLiBJbml0aWFsIGxvYWQgaGFzbid0IGNvbXBsZXRlZFxuICAgIGlmIChsb2FkaW5nIHx8IGlzTmF2aWdhdGluZyB8fCAhaW5pdGlhbExvYWRDb21wbGV0ZS5jdXJyZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIElmIG5vdCBhdXRoZW50aWNhdGVkIGFuZCBub3Qgb24gYSBwdWJsaWMgcGFnZSwgcmVkaXJlY3QgdG8gbG9naW5cbiAgICBpZiAoIWlzQXV0aGVudGljYXRlZCAmJiAhdXNlciAmJiAhaXNQdWJsaWNQYWdlKSB7XG4gICAgICBjb25zb2xlLmxvZygnQXV0aEd1YXJkOiBSZWRpcmVjdGluZyB1bmF1dGhlbnRpY2F0ZWQgdXNlciB0byBsb2dpbicpO1xuICAgICAgc2V0SXNOYXZpZ2F0aW5nKHRydWUpO1xuICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpXG4gICAgICAgIC50aGVuKCgpID0+IHNldElzTmF2aWdhdGluZyhmYWxzZSkpXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdOYXZpZ2F0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICBzZXRJc05hdmlnYXRpbmcoZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgYXV0aGVudGljYXRlZCBhbmQgb24gYSBwdWJsaWMgcGFnZSwgcmVkaXJlY3QgdG8gY2hhdFxuICAgIC8vIEJ1dCBvbmx5IGlmIHRoZXJlIGlzbid0IGFuIGV4cGxpY2l0IG5hdmlnYXRpb24gaGFwcGVuaW5nIGZyb20gbG9naW4vcmVnaXN0ZXJcbiAgICAvLyAod2hpY2ggaXMgaGFuZGxlZCBieSB0aGUgdXNlRWZmZWN0IGluIHRob3NlIGNvbXBvbmVudHMpXG4gICAgaWYgKGlzQXV0aGVudGljYXRlZCAmJiB1c2VyICYmIGlzUHVibGljUGFnZSkge1xuICAgICAgLy8gQ29vcmRpbmF0aW9uIGZsYWcgc2V0IGJ5IGxvZ2luL3JlZ2lzdGVyIHRvIGF2b2lkIGRvdWJsZSByZWRpcmVjdHNcbiAgICAgIGxldCBza2lwUHVibGljUmVkaXJlY3QgPSBmYWxzZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNraXBQdWJsaWNSZWRpcmVjdCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ0dSQUNFX1BPU1RfTE9HSU5fUkVESVJFQ1QnKSA9PT0gJzEnO1xuICAgICAgfSBjYXRjaCB7fVxuXG4gICAgICAvLyBUaHJvdHRsZSByZXBlYXRlZCByZWRpcmVjdHMgd2l0aGluIGEgc2hvcnQgd2luZG93XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgcmVjZW50bHlSZWRpcmVjdGVkID0gbm93IC0gbGFzdFJlZGlyZWN0QXRSZWYuY3VycmVudCA8IDEwMDA7XG5cbiAgICAgIC8vIFBlcnNpc3QgYSBvbmUtdGltZSBndWFyZCB0byBhdm9pZCByZXBlYXRlZCByZWRpcmVjdHMgYWNyb3NzIHJlbW91bnRzXG4gICAgICBsZXQgYWxyZWFkeVJlZGlyZWN0ZWQgPSBmYWxzZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGFscmVhZHlSZWRpcmVjdGVkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnR1JBQ0VfQUxSRUFEWV9SRURJUkVDVEVEJykgPT09ICcxJztcbiAgICAgIH0gY2F0Y2gge31cblxuICAgICAgaWYgKCFza2lwUHVibGljUmVkaXJlY3QgJiYgIXJlY2VudGx5UmVkaXJlY3RlZCAmJiAhYWxyZWFkeVJlZGlyZWN0ZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0F1dGhHdWFyZDogUmVkaXJlY3RpbmcgYXV0aGVudGljYXRlZCB1c2VyIHRvIGNoYXQnKTtcbiAgICAgICAgbGFzdFJlZGlyZWN0QXRSZWYuY3VycmVudCA9IG5vdztcbiAgICAgICAgc2V0SXNOYXZpZ2F0aW5nKHRydWUpO1xuICAgICAgICB0cnkgeyBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdHUkFDRV9BTFJFQURZX1JFRElSRUNURUQnLCAnMScpOyB9IGNhdGNoIHt9XG4gICAgICAgIHJvdXRlci5yZXBsYWNlKCcvY2hhdCcpXG4gICAgICAgICAgLnRoZW4oKCkgPT4gc2V0SXNOYXZpZ2F0aW5nKGZhbHNlKSlcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOYXZpZ2F0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAgIHNldElzTmF2aWdhdGluZyhmYWxzZSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDbGVhciB0aGUgZmxhZyBhZnRlciB0aGUgZmlyc3QgcGFzcyB0byByZS1lbmFibGUgbm9ybWFsIGJlaGF2aW9yXG4gICAgICAgIHRyeSB7IHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ0dSQUNFX1BPU1RfTE9HSU5fUkVESVJFQ1QnKTsgfSBjYXRjaCB7fVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2lzQXV0aGVudGljYXRlZCwgdXNlciwgaXNQdWJsaWNQYWdlLCBsb2FkaW5nLCByb3V0ZXJdKTtcblxuICAvLyBDbGVhciB0aGUgb25lLXRpbWUgcmVkaXJlY3QgZ3VhcmQgd2hlbiB3ZSBhcmUgb24gL2NoYXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocm91dGVyLnBhdGhuYW1lID09PSAnL2NoYXQnKSB7XG4gICAgICB0cnkgeyBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdHUkFDRV9BTFJFQURZX1JFRElSRUNURUQnKTsgfSBjYXRjaCB7fVxuICAgIH1cbiAgfSwgW3JvdXRlci5wYXRobmFtZV0pO1xuXG4gIC8vIFNob3cgZW5oYW5jZWQgbG9hZGluZyBzdGF0ZXNcbiAgaWYgKGxvYWRpbmcpIHtcbiAgICByZXR1cm4gPExvYWRpbmdQYWdlIG1lc3NhZ2U9XCJMb2FkaW5nIGF1dGhlbnRpY2F0aW9uLi4uXCIgLz47XG4gIH1cbiAgXG4gIC8vIFNob3cgbmF2aWdhdGlvbiBzdGF0ZVxuICBpZiAoaXNOYXZpZ2F0aW5nKSB7XG4gICAgcmV0dXJuIDxMb2FkaW5nUGFnZSBtZXNzYWdlPVwiTmF2aWdhdGluZy4uLlwiIC8+O1xuICB9XG4gIFxuICAvLyBEb24ndCByZW5kZXIgY2hpbGRyZW4gdW50aWwgYXV0aCBjaGVjayBpcyBjb21wbGV0ZVxuICBpZiAoIWxvYWRpbmcgJiYgIXVzZXIgJiYgIWlzUHVibGljUGFnZSkge1xuICAgIHJldHVybiA8TG9hZGluZ1BhZ2UgbWVzc2FnZT1cIlJlZGlyZWN0aW5nIHRvIGxvZ2luLi4uXCIgLz47XG4gIH1cbiAgXG4gIC8vIFJlbmRlciBjaGlsZHJlbiB3aXRoIHByb3BlciBsYXlvdXRcbiAgcmV0dXJuIDw+e2NoaWxkcmVufTwvPjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwKHsgQ29tcG9uZW50LCBwYWdlUHJvcHMsIHJvdXRlciB9OiBBcHBQcm9wcykge1xuICBjb25zdCBzaG91bGRIYXZlTGF5b3V0ID0gcGFnZXNXaXRoTGF5b3V0LmluY2x1ZGVzKHJvdXRlci5wYXRobmFtZSk7XG5cbiAgcmV0dXJuIChcbiAgICA8RXJyb3JCb3VuZGFyeSBjb21wb25lbnROYW1lPVwiTWFpbiBBcHBcIj5cbiAgICAgIDxBdXRoUHJvdmlkZXI+XG4gICAgICAgIDxBcHBTdGF0ZVByb3ZpZGVyPlxuICAgICAgICAgIDxTdGF0ZUxvYWRlcj5cbiAgICAgICAgICAgIDxBdXRoR3VhcmQgcm91dGVyPXtyb3V0ZXJ9PlxuICAgICAgICAgICAgICB7c2hvdWxkSGF2ZUxheW91dCA/IChcbiAgICAgICAgICAgICAgICA8TGF5b3V0PlxuICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCB7Li4ucGFnZVByb3BzfSAvPlxuICAgICAgICAgICAgICAgIDwvTGF5b3V0PlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxDb21wb25lbnQgey4uLnBhZ2VQcm9wc30gLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPFRvYXN0Q29udGFpbmVyIHBvc2l0aW9uPVwiYm90dG9tLXJpZ2h0XCIgdGhlbWU9XCJkYXJrXCIgLz5cbiAgICAgICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgICAgIDwvU3RhdGVMb2FkZXI+XG4gICAgICAgIDwvQXBwU3RhdGVQcm92aWRlcj5cbiAgICAgIDwvQXV0aFByb3ZpZGVyPlxuICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgKTtcbn0iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsInVzZVJlZiIsIkF1dGhQcm92aWRlciIsInVzZUF1dGgiLCJBcHBTdGF0ZVByb3ZpZGVyIiwiRXJyb3JCb3VuZGFyeSIsIlN0YXRlTG9hZGVyIiwiTG9hZGluZ1BhZ2UiLCJUb2FzdENvbnRhaW5lciIsIkxheW91dCIsInBhZ2VzV2l0aExheW91dCIsInB1YmxpY1BhZ2VzIiwiQXV0aEd1YXJkIiwiY2hpbGRyZW4iLCJyb3V0ZXIiLCJ1c2VyIiwibG9hZGluZyIsImlzQXV0aGVudGljYXRlZCIsImlzUHVibGljUGFnZSIsImluY2x1ZGVzIiwicGF0aG5hbWUiLCJpc05hdmlnYXRpbmciLCJzZXRJc05hdmlnYXRpbmciLCJsYXN0UmVkaXJlY3RBdFJlZiIsImluaXRpYWxMb2FkQ29tcGxldGUiLCJjdXJyZW50IiwiY29uc29sZSIsImxvZyIsInB1c2giLCJ0aGVuIiwiY2F0Y2giLCJlcnJvciIsInNraXBQdWJsaWNSZWRpcmVjdCIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsIm5vdyIsIkRhdGUiLCJyZWNlbnRseVJlZGlyZWN0ZWQiLCJhbHJlYWR5UmVkaXJlY3RlZCIsInNldEl0ZW0iLCJyZXBsYWNlIiwicmVtb3ZlSXRlbSIsIm1lc3NhZ2UiLCJBcHAiLCJDb21wb25lbnQiLCJwYWdlUHJvcHMiLCJzaG91bGRIYXZlTGF5b3V0IiwiY29tcG9uZW50TmFtZSIsInBvc2l0aW9uIiwidGhlbWUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/_app.tsx\n");

/***/ }),

/***/ "./styles/animations.css":
/*!*******************************!*\
  !*** ./styles/animations.css ***!
  \*******************************/
/***/ (() => {



/***/ }),

/***/ "./utils/StateBackupService.ts":
/*!*************************************!*\
  !*** ./utils/StateBackupService.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _StatePersistence__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StatePersistence */ \"./utils/StatePersistence.ts\");\n// StateBackupService.ts - Manages additional state backup mechanisms\n\nclass StateBackupService {\n    static instance;\n    serviceWorkerRegistration = null;\n    backupInterval = null;\n    lastBackupTime = 0;\n    BACKUP_INTERVAL_MS = 60000;\n    isRegistering = false;\n    constructor(){\n    // Private constructor for singleton pattern\n    }\n    static getInstance() {\n        if (!StateBackupService.instance) {\n            StateBackupService.instance = new StateBackupService();\n        }\n        return StateBackupService.instance;\n    }\n    /**\n   * Initialize the backup service\n   */ async initialize() {\n        try {\n            // Register service worker only in production builds to avoid 404s in dev\n            const isProd = \"development\" === 'production';\n            if (isProd && 'serviceWorker' in navigator && !this.isRegistering) {\n                this.isRegistering = true;\n                try {\n                    this.serviceWorkerRegistration = await navigator.serviceWorker.register('/serviceWorker.js', {\n                        scope: '/'\n                    });\n                    console.log('Service Worker registered successfully', this.serviceWorkerRegistration);\n                    // Set up service worker message handling\n                    navigator.serviceWorker.addEventListener('message', this.handleServiceWorkerMessage);\n                    // Start periodic backup\n                    this.startPeriodicBackup();\n                    this.isRegistering = false;\n                    return true;\n                } catch (error) {\n                    console.error('Service Worker registration failed:', error);\n                    this.isRegistering = false;\n                    // Even if service worker fails, we can still use local storage backups\n                    this.startPeriodicBackup();\n                    return false;\n                }\n            } else {\n                // Fallback for browsers without SW support or in development\n                if (!isProd) {\n                    console.log('Skipping Service Worker in development; using local storage backups only');\n                } else {\n                    console.log('Service Workers not supported or already registering, using local storage only');\n                }\n                this.startPeriodicBackup();\n                return false;\n            }\n        } catch (error) {\n            console.error('Error initializing backup service:', error);\n            return false;\n        }\n    }\n    /**\n   * Handle messages from service worker\n   */ handleServiceWorkerMessage = (event)=>{\n        if (event.data && event.data.type === 'BACKUP_STATE_COMPLETE') {\n            if (event.data.success) {\n                console.log('Service Worker backup complete');\n            } else {\n                console.error('Service Worker backup failed:', event.data.error);\n            }\n        }\n    };\n    /**\n   * Start periodic state backups\n   */ startPeriodicBackup() {\n        if (this.backupInterval) {\n            clearInterval(this.backupInterval);\n        }\n        this.backupInterval = window.setInterval(()=>{\n            this.backupCurrentState();\n        }, this.BACKUP_INTERVAL_MS);\n        console.log('Periodic state backup started');\n        // Also backup on certain events\n        window.addEventListener('beforeunload', this.backupCurrentState);\n        window.addEventListener('pagehide', this.backupCurrentState);\n        // Backup now\n        this.backupCurrentState();\n    }\n    /**\n   * Stop periodic backups\n   */ stopPeriodicBackup() {\n        if (this.backupInterval) {\n            clearInterval(this.backupInterval);\n            this.backupInterval = null;\n            window.removeEventListener('beforeunload', this.backupCurrentState);\n            window.removeEventListener('pagehide', this.backupCurrentState);\n            console.log('Periodic state backup stopped');\n        }\n    }\n    /**\n   * Backup the current application state\n   */ backupCurrentState = async ()=>{\n        try {\n            // Don't backup too frequently\n            const now = Date.now();\n            if (now - this.lastBackupTime < 10000) {\n                return;\n            }\n            this.lastBackupTime = now;\n            // Get current state snapshot\n            const snapshot = _StatePersistence__WEBPACK_IMPORTED_MODULE_0__[\"default\"].retrieveSnapshot();\n            if (!snapshot) {\n                console.log('No state snapshot to backup');\n                return;\n            }\n            // Backup to service worker if available\n            if (navigator.serviceWorker.controller) {\n                navigator.serviceWorker.controller.postMessage({\n                    type: 'BACKUP_STATE',\n                    state: snapshot\n                });\n                console.log('State backup sent to Service Worker');\n            }\n            // Secondary browser storage backup using a different key\n            try {\n                localStorage.setItem('GRACE_STATE_BACKUP', JSON.stringify({\n                    timestamp: now,\n                    state: snapshot\n                }));\n            } catch (storageError) {\n                console.error('Error backing up to localStorage:', storageError);\n            }\n        } catch (error) {\n            console.error('State backup failed:', error);\n        }\n    };\n    /**\n   * Attempt to recover state from all backup sources\n   */ async attemptRecovery() {\n        try {\n            console.log('Attempting state recovery from all sources');\n            // Try main persistence manager first\n            const mainSnapshot = _StatePersistence__WEBPACK_IMPORTED_MODULE_0__[\"default\"].retrieveSnapshot();\n            if (mainSnapshot) {\n                console.log('Recovered state from main persistence manager');\n                return mainSnapshot;\n            }\n            // Try localStorage backup\n            try {\n                const backupJson = localStorage.getItem('GRACE_STATE_BACKUP');\n                if (backupJson) {\n                    const backup = JSON.parse(backupJson);\n                    if (backup && backup.state) {\n                        console.log('Recovered state from localStorage backup');\n                        return backup.state;\n                    }\n                }\n            } catch (e) {\n                console.error('Error reading from localStorage backup:', e);\n            }\n            // Try service worker backup (this gets complex with async)\n            if (navigator.serviceWorker.controller) {\n                return new Promise((resolve)=>{\n                    // Set up a one-time message handler\n                    const messageHandler = (event)=>{\n                        if (event.data && event.data.type === 'RECOVERY_RESULT') {\n                            navigator.serviceWorker.removeEventListener('message', messageHandler);\n                            if (event.data.state) {\n                                console.log('Recovered state from Service Worker');\n                                resolve(event.data.state);\n                            } else {\n                                console.log('No state found in Service Worker');\n                                resolve(null);\n                            }\n                        }\n                    };\n                    navigator.serviceWorker.addEventListener('message', messageHandler);\n                    // Request recovery - we've already checked controller is not null\n                    navigator.serviceWorker.controller.postMessage({\n                        type: 'RECOVER_STATE'\n                    });\n                    // Set timeout for recovery attempt\n                    setTimeout(()=>{\n                        navigator.serviceWorker.removeEventListener('message', messageHandler);\n                        console.log('Service Worker recovery timed out');\n                        resolve(null);\n                    }, 3000);\n                });\n            }\n            console.log('No state recovered from any source');\n            return null;\n        } catch (error) {\n            console.error('Error during state recovery:', error);\n            return null;\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StateBackupService);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxDQUFFQyxXQUFXLENBQUM7d0JBQzlDYixNQUFNO29CQUNSO29CQUVBLG1DQUFtQztvQkFDbkMrQixXQUFXO3dCQUNUM0MsVUFBVUMsYUFBYSxDQUFDa0IsbUJBQW1CLENBQUMsV0FBV3VCO3dCQUN2RHRDLFFBQVFDLEdBQUcsQ0FBQzt3QkFDWm9DLFFBQVE7b0JBQ1YsR0FBRztnQkFDTDtZQUNGO1lBRUFyQyxRQUFRQyxHQUFHLENBQUM7WUFDWixPQUFPO1FBQ1QsRUFBRSxPQUFPSSxPQUFPO1lBQ2RMLFFBQVFLLEtBQUssQ0FBQyxnQ0FBZ0NBO1lBQzlDLE9BQU87UUFDVDtJQUNGO0FBQ0Y7QUFFQSxpRUFBZXBCLGtCQUFrQkEsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3dvbmthc3dvcmxkL0Rvd25sb2Fkcy9ncmFjZS1wcm9qZWN0L3NyYy91aS91dGlscy9TdGF0ZUJhY2t1cFNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU3RhdGVCYWNrdXBTZXJ2aWNlLnRzIC0gTWFuYWdlcyBhZGRpdGlvbmFsIHN0YXRlIGJhY2t1cCBtZWNoYW5pc21zXG5pbXBvcnQgU3RhdGVQZXJzaXN0ZW5jZU1hbmFnZXIgZnJvbSAnLi9TdGF0ZVBlcnNpc3RlbmNlJztcblxuY2xhc3MgU3RhdGVCYWNrdXBTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFN0YXRlQmFja3VwU2VydmljZTtcbiAgcHJpdmF0ZSBzZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uOiBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYmFja3VwSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGxhc3RCYWNrdXBUaW1lOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHJlYWRvbmx5IEJBQ0tVUF9JTlRFUlZBTF9NUyA9IDYwMDAwOyAvLyAxIG1pbnV0ZVxuICBwcml2YXRlIGlzUmVnaXN0ZXJpbmcgPSBmYWxzZTtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIFByaXZhdGUgY29uc3RydWN0b3IgZm9yIHNpbmdsZXRvbiBwYXR0ZXJuXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IFN0YXRlQmFja3VwU2VydmljZSB7XG4gICAgaWYgKCFTdGF0ZUJhY2t1cFNlcnZpY2UuaW5zdGFuY2UpIHtcbiAgICAgIFN0YXRlQmFja3VwU2VydmljZS5pbnN0YW5jZSA9IG5ldyBTdGF0ZUJhY2t1cFNlcnZpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIFN0YXRlQmFja3VwU2VydmljZS5pbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBiYWNrdXAgc2VydmljZVxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFJlZ2lzdGVyIHNlcnZpY2Ugd29ya2VyIG9ubHkgaW4gcHJvZHVjdGlvbiBidWlsZHMgdG8gYXZvaWQgNDA0cyBpbiBkZXZcbiAgICAgIGNvbnN0IGlzUHJvZCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbic7XG4gICAgICBpZiAoaXNQcm9kICYmICdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IgJiYgIXRoaXMuaXNSZWdpc3RlcmluZykge1xuICAgICAgICB0aGlzLmlzUmVnaXN0ZXJpbmcgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuc2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbiA9IGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCcvc2VydmljZVdvcmtlci5qcycsIHtcbiAgICAgICAgICAgIHNjb3BlOiAnLydcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnU2VydmljZSBXb3JrZXIgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHknLCB0aGlzLnNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCB1cCBzZXJ2aWNlIHdvcmtlciBtZXNzYWdlIGhhbmRsaW5nXG4gICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFN0YXJ0IHBlcmlvZGljIGJhY2t1cFxuICAgICAgICAgIHRoaXMuc3RhcnRQZXJpb2RpY0JhY2t1cCgpO1xuICAgICAgICAgIHRoaXMuaXNSZWdpc3RlcmluZyA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlcnZpY2UgV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgIHRoaXMuaXNSZWdpc3RlcmluZyA9IGZhbHNlO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEV2ZW4gaWYgc2VydmljZSB3b3JrZXIgZmFpbHMsIHdlIGNhbiBzdGlsbCB1c2UgbG9jYWwgc3RvcmFnZSBiYWNrdXBzXG4gICAgICAgICAgdGhpcy5zdGFydFBlcmlvZGljQmFja3VwKCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGYWxsYmFjayBmb3IgYnJvd3NlcnMgd2l0aG91dCBTVyBzdXBwb3J0IG9yIGluIGRldmVsb3BtZW50XG4gICAgICAgIGlmICghaXNQcm9kKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1NraXBwaW5nIFNlcnZpY2UgV29ya2VyIGluIGRldmVsb3BtZW50OyB1c2luZyBsb2NhbCBzdG9yYWdlIGJhY2t1cHMgb25seScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlIFdvcmtlcnMgbm90IHN1cHBvcnRlZCBvciBhbHJlYWR5IHJlZ2lzdGVyaW5nLCB1c2luZyBsb2NhbCBzdG9yYWdlIG9ubHknKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXJ0UGVyaW9kaWNCYWNrdXAoKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgYmFja3VwIHNlcnZpY2U6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgbWVzc2FnZXMgZnJvbSBzZXJ2aWNlIHdvcmtlclxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVTZXJ2aWNlV29ya2VyTWVzc2FnZSA9IChldmVudDogTWVzc2FnZUV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmRhdGEgJiYgZXZlbnQuZGF0YS50eXBlID09PSAnQkFDS1VQX1NUQVRFX0NPTVBMRVRFJykge1xuICAgICAgaWYgKGV2ZW50LmRhdGEuc3VjY2Vzcykge1xuICAgICAgICBjb25zb2xlLmxvZygnU2VydmljZSBXb3JrZXIgYmFja3VwIGNvbXBsZXRlJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTZXJ2aWNlIFdvcmtlciBiYWNrdXAgZmFpbGVkOicsIGV2ZW50LmRhdGEuZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU3RhcnQgcGVyaW9kaWMgc3RhdGUgYmFja3Vwc1xuICAgKi9cbiAgcHVibGljIHN0YXJ0UGVyaW9kaWNCYWNrdXAoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYmFja3VwSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5iYWNrdXBJbnRlcnZhbCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuYmFja3VwSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5iYWNrdXBDdXJyZW50U3RhdGUoKTtcbiAgICB9LCB0aGlzLkJBQ0tVUF9JTlRFUlZBTF9NUyk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1BlcmlvZGljIHN0YXRlIGJhY2t1cCBzdGFydGVkJyk7XG4gICAgXG4gICAgLy8gQWxzbyBiYWNrdXAgb24gY2VydGFpbiBldmVudHNcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5iYWNrdXBDdXJyZW50U3RhdGUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwYWdlaGlkZScsIHRoaXMuYmFja3VwQ3VycmVudFN0YXRlKTtcbiAgICBcbiAgICAvLyBCYWNrdXAgbm93XG4gICAgdGhpcy5iYWNrdXBDdXJyZW50U3RhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHBlcmlvZGljIGJhY2t1cHNcbiAgICovXG4gIHB1YmxpYyBzdG9wUGVyaW9kaWNCYWNrdXAoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYmFja3VwSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5iYWNrdXBJbnRlcnZhbCk7XG4gICAgICB0aGlzLmJhY2t1cEludGVydmFsID0gbnVsbDtcbiAgICAgIFxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMuYmFja3VwQ3VycmVudFN0YXRlKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwYWdlaGlkZScsIHRoaXMuYmFja3VwQ3VycmVudFN0YXRlKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1BlcmlvZGljIHN0YXRlIGJhY2t1cCBzdG9wcGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJhY2t1cCB0aGUgY3VycmVudCBhcHBsaWNhdGlvbiBzdGF0ZVxuICAgKi9cbiAgcHVibGljIGJhY2t1cEN1cnJlbnRTdGF0ZSA9IGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRG9uJ3QgYmFja3VwIHRvbyBmcmVxdWVudGx5XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgaWYgKG5vdyAtIHRoaXMubGFzdEJhY2t1cFRpbWUgPCAxMDAwMCkgeyAvLyBNaW4gMTBzIGJldHdlZW4gYmFja3Vwc1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMubGFzdEJhY2t1cFRpbWUgPSBub3c7XG4gICAgICBcbiAgICAgIC8vIEdldCBjdXJyZW50IHN0YXRlIHNuYXBzaG90XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IFN0YXRlUGVyc2lzdGVuY2VNYW5hZ2VyLnJldHJpZXZlU25hcHNob3QoKTtcbiAgICAgIGlmICghc25hcHNob3QpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ05vIHN0YXRlIHNuYXBzaG90IHRvIGJhY2t1cCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEJhY2t1cCB0byBzZXJ2aWNlIHdvcmtlciBpZiBhdmFpbGFibGVcbiAgICAgIGlmIChuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyKSB7XG4gICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIHR5cGU6ICdCQUNLVVBfU1RBVEUnLFxuICAgICAgICAgIHN0YXRlOiBzbmFwc2hvdFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1N0YXRlIGJhY2t1cCBzZW50IHRvIFNlcnZpY2UgV29ya2VyJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNlY29uZGFyeSBicm93c2VyIHN0b3JhZ2UgYmFja3VwIHVzaW5nIGEgZGlmZmVyZW50IGtleVxuICAgICAgdHJ5IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ0dSQUNFX1NUQVRFX0JBQ0tVUCcsIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0aW1lc3RhbXA6IG5vdyxcbiAgICAgICAgICBzdGF0ZTogc25hcHNob3RcbiAgICAgICAgfSkpO1xuICAgICAgfSBjYXRjaCAoc3RvcmFnZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGJhY2tpbmcgdXAgdG8gbG9jYWxTdG9yYWdlOicsIHN0b3JhZ2VFcnJvcik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0YXRlIGJhY2t1cCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQXR0ZW1wdCB0byByZWNvdmVyIHN0YXRlIGZyb20gYWxsIGJhY2t1cCBzb3VyY2VzXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgYXR0ZW1wdFJlY292ZXJ5KCk6IFByb21pc2U8YW55IHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyBzdGF0ZSByZWNvdmVyeSBmcm9tIGFsbCBzb3VyY2VzJyk7XG4gICAgICBcbiAgICAgIC8vIFRyeSBtYWluIHBlcnNpc3RlbmNlIG1hbmFnZXIgZmlyc3RcbiAgICAgIGNvbnN0IG1haW5TbmFwc2hvdCA9IFN0YXRlUGVyc2lzdGVuY2VNYW5hZ2VyLnJldHJpZXZlU25hcHNob3QoKTtcbiAgICAgIGlmIChtYWluU25hcHNob3QpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1JlY292ZXJlZCBzdGF0ZSBmcm9tIG1haW4gcGVyc2lzdGVuY2UgbWFuYWdlcicpO1xuICAgICAgICByZXR1cm4gbWFpblNuYXBzaG90O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBUcnkgbG9jYWxTdG9yYWdlIGJhY2t1cFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgYmFja3VwSnNvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdHUkFDRV9TVEFURV9CQUNLVVAnKTtcbiAgICAgICAgaWYgKGJhY2t1cEpzb24pIHtcbiAgICAgICAgICBjb25zdCBiYWNrdXAgPSBKU09OLnBhcnNlKGJhY2t1cEpzb24pO1xuICAgICAgICAgIGlmIChiYWNrdXAgJiYgYmFja3VwLnN0YXRlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVjb3ZlcmVkIHN0YXRlIGZyb20gbG9jYWxTdG9yYWdlIGJhY2t1cCcpO1xuICAgICAgICAgICAgcmV0dXJuIGJhY2t1cC5zdGF0ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBmcm9tIGxvY2FsU3RvcmFnZSBiYWNrdXA6JywgZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRyeSBzZXJ2aWNlIHdvcmtlciBiYWNrdXAgKHRoaXMgZ2V0cyBjb21wbGV4IHdpdGggYXN5bmMpXG4gICAgICBpZiAobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlcikge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAvLyBTZXQgdXAgYSBvbmUtdGltZSBtZXNzYWdlIGhhbmRsZXJcbiAgICAgICAgICBjb25zdCBtZXNzYWdlSGFuZGxlciA9IChldmVudDogTWVzc2FnZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGF0YSAmJiBldmVudC5kYXRhLnR5cGUgPT09ICdSRUNPVkVSWV9SRVNVTFQnKSB7XG4gICAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBtZXNzYWdlSGFuZGxlcik7XG4gICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlY292ZXJlZCBzdGF0ZSBmcm9tIFNlcnZpY2UgV29ya2VyJyk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShldmVudC5kYXRhLnN0YXRlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gc3RhdGUgZm91bmQgaW4gU2VydmljZSBXb3JrZXInKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbWVzc2FnZUhhbmRsZXIpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJlcXVlc3QgcmVjb3ZlcnkgLSB3ZSd2ZSBhbHJlYWR5IGNoZWNrZWQgY29udHJvbGxlciBpcyBub3QgbnVsbFxuICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIhLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6ICdSRUNPVkVSX1NUQVRFJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCB0aW1lb3V0IGZvciByZWNvdmVyeSBhdHRlbXB0XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbWVzc2FnZUhhbmRsZXIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2UgV29ya2VyIHJlY292ZXJ5IHRpbWVkIG91dCcpO1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdObyBzdGF0ZSByZWNvdmVyZWQgZnJvbSBhbnkgc291cmNlJyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIHN0YXRlIHJlY292ZXJ5OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTdGF0ZUJhY2t1cFNlcnZpY2U7XG4iXSwibmFtZXMiOlsiU3RhdGVQZXJzaXN0ZW5jZU1hbmFnZXIiLCJTdGF0ZUJhY2t1cFNlcnZpY2UiLCJpbnN0YW5jZSIsInNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24iLCJiYWNrdXBJbnRlcnZhbCIsImxhc3RCYWNrdXBUaW1lIiwiQkFDS1VQX0lOVEVSVkFMX01TIiwiaXNSZWdpc3RlcmluZyIsImdldEluc3RhbmNlIiwiaW5pdGlhbGl6ZSIsImlzUHJvZCIsInByb2Nlc3MiLCJuYXZpZ2F0b3IiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJzY29wZSIsImNvbnNvbGUiLCJsb2ciLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UiLCJzdGFydFBlcmlvZGljQmFja3VwIiwiZXJyb3IiLCJldmVudCIsImRhdGEiLCJ0eXBlIiwic3VjY2VzcyIsImNsZWFySW50ZXJ2YWwiLCJ3aW5kb3ciLCJzZXRJbnRlcnZhbCIsImJhY2t1cEN1cnJlbnRTdGF0ZSIsInN0b3BQZXJpb2RpY0JhY2t1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJub3ciLCJEYXRlIiwic25hcHNob3QiLCJyZXRyaWV2ZVNuYXBzaG90IiwiY29udHJvbGxlciIsInBvc3RNZXNzYWdlIiwic3RhdGUiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInRpbWVzdGFtcCIsInN0b3JhZ2VFcnJvciIsImF0dGVtcHRSZWNvdmVyeSIsIm1haW5TbmFwc2hvdCIsImJhY2t1cEpzb24iLCJnZXRJdGVtIiwiYmFja3VwIiwicGFyc2UiLCJlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJtZXNzYWdlSGFuZGxlciIsInNldFRpbWVvdXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utils/StateBackupService.ts\n");

/***/ }),

/***/ "./utils/StateOperationLock.ts":
/*!*************************************!*\
  !*** ./utils/StateOperationLock.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * StateOperationLock - Prevents race conditions in state operations\n * \n * This utility provides a central locking mechanism to prevent concurrent state operations\n * from interfering with each other, which can cause race conditions and lost updates.\n */ class StateOperationLock {\n    static instance;\n    activeLocks = new Map();\n    DEFAULT_TIMEOUT = 5000;\n    // Make this a singleton\n    constructor(){}\n    static getInstance() {\n        if (!StateOperationLock.instance) {\n            StateOperationLock.instance = new StateOperationLock();\n        }\n        return StateOperationLock.instance;\n    }\n    /**\n   * Acquires a lock for a specific operation\n   * @param resourceId Identifier for the resource being locked (e.g., 'chat', 'trading')\n   * @param operation Description of the operation being performed\n   * @param timeoutMs Lock timeout in milliseconds\n   * @returns Lock ID if acquired, null if failed\n   */ acquireLock(resourceId, operation, timeoutMs = this.DEFAULT_TIMEOUT) {\n        // Clean expired locks first\n        this.cleanExpiredLocks();\n        // Check if the resource is already locked\n        if (this.activeLocks.has(resourceId)) {\n            console.warn(`Resource ${resourceId} is already locked for operation: ${this.activeLocks.get(resourceId)?.operation}`);\n            return null;\n        }\n        // Create a new lock\n        const lockId = `lock_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`;\n        const now = Date.now();\n        const lockInfo = {\n            id: lockId,\n            operation,\n            acquiredAt: now,\n            expiresAt: now + timeoutMs\n        };\n        // Set the lock\n        this.activeLocks.set(resourceId, lockInfo);\n        console.log(`Lock acquired for ${resourceId}: ${operation}`);\n        // Set automatic release after timeout\n        setTimeout(()=>{\n            this.releaseLock(resourceId, lockId);\n        }, timeoutMs);\n        return lockId;\n    }\n    /**\n   * Releases a lock if the lockId matches\n   * @param resourceId Resource identifier\n   * @param lockId Lock ID returned from acquireLock\n   * @returns true if released, false if not found or ID doesn't match\n   */ releaseLock(resourceId, lockId) {\n        const lock = this.activeLocks.get(resourceId);\n        if (!lock) {\n            console.warn(`No lock found for resource ${resourceId}`);\n            return false;\n        }\n        if (lock.id !== lockId) {\n            console.warn(`Lock ID mismatch for ${resourceId}: expected ${lock.id}, got ${lockId}`);\n            return false;\n        }\n        // Release the lock\n        this.activeLocks.delete(resourceId);\n        console.log(`Lock released for ${resourceId}`);\n        return true;\n    }\n    /**\n   * Checks if a resource is currently locked\n   * @param resourceId Resource identifier\n   * @returns true if locked, false otherwise\n   */ isLocked(resourceId) {\n        this.cleanExpiredLocks();\n        return this.activeLocks.has(resourceId);\n    }\n    /**\n   * Clean up any expired locks\n   */ cleanExpiredLocks() {\n        const now = Date.now();\n        for (const [resourceId, lock] of this.activeLocks.entries()){\n            if (lock.expiresAt < now) {\n                console.log(`Lock for ${resourceId} expired and was auto-released`);\n                this.activeLocks.delete(resourceId);\n            }\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StateOperationLock.getInstance());\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNsRSxJQUFJLENBQUNMLFdBQVcsQ0FBQzZCLE1BQU0sQ0FBQ3hCO1lBQzFCO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsaUVBQWVQLG1CQUFtQkssV0FBVyxFQUFFLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b25rYXN3b3JsZC9Eb3dubG9hZHMvZ3JhY2UtcHJvamVjdC9zcmMvdWkvdXRpbHMvU3RhdGVPcGVyYXRpb25Mb2NrLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3RhdGVPcGVyYXRpb25Mb2NrIC0gUHJldmVudHMgcmFjZSBjb25kaXRpb25zIGluIHN0YXRlIG9wZXJhdGlvbnNcbiAqIFxuICogVGhpcyB1dGlsaXR5IHByb3ZpZGVzIGEgY2VudHJhbCBsb2NraW5nIG1lY2hhbmlzbSB0byBwcmV2ZW50IGNvbmN1cnJlbnQgc3RhdGUgb3BlcmF0aW9uc1xuICogZnJvbSBpbnRlcmZlcmluZyB3aXRoIGVhY2ggb3RoZXIsIHdoaWNoIGNhbiBjYXVzZSByYWNlIGNvbmRpdGlvbnMgYW5kIGxvc3QgdXBkYXRlcy5cbiAqL1xuXG5pbnRlcmZhY2UgTG9ja0luZm8ge1xuICBpZDogc3RyaW5nO1xuICBvcGVyYXRpb246IHN0cmluZztcbiAgYWNxdWlyZWRBdDogbnVtYmVyO1xuICBleHBpcmVzQXQ6IG51bWJlcjtcbn1cblxuY2xhc3MgU3RhdGVPcGVyYXRpb25Mb2NrIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFN0YXRlT3BlcmF0aW9uTG9jaztcbiAgcHJpdmF0ZSBhY3RpdmVMb2NrczogTWFwPHN0cmluZywgTG9ja0luZm8+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIERFRkFVTFRfVElNRU9VVCA9IDUwMDA7IC8vIERlZmF1bHQgbG9jayB0aW1lb3V0OiA1IHNlY29uZHNcblxuICAvLyBNYWtlIHRoaXMgYSBzaW5nbGV0b25cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBTdGF0ZU9wZXJhdGlvbkxvY2sge1xuICAgIGlmICghU3RhdGVPcGVyYXRpb25Mb2NrLmluc3RhbmNlKSB7XG4gICAgICBTdGF0ZU9wZXJhdGlvbkxvY2suaW5zdGFuY2UgPSBuZXcgU3RhdGVPcGVyYXRpb25Mb2NrKCk7XG4gICAgfVxuICAgIHJldHVybiBTdGF0ZU9wZXJhdGlvbkxvY2suaW5zdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICogQWNxdWlyZXMgYSBsb2NrIGZvciBhIHNwZWNpZmljIG9wZXJhdGlvblxuICAgKiBAcGFyYW0gcmVzb3VyY2VJZCBJZGVudGlmaWVyIGZvciB0aGUgcmVzb3VyY2UgYmVpbmcgbG9ja2VkIChlLmcuLCAnY2hhdCcsICd0cmFkaW5nJylcbiAgICogQHBhcmFtIG9wZXJhdGlvbiBEZXNjcmlwdGlvbiBvZiB0aGUgb3BlcmF0aW9uIGJlaW5nIHBlcmZvcm1lZFxuICAgKiBAcGFyYW0gdGltZW91dE1zIExvY2sgdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHJldHVybnMgTG9jayBJRCBpZiBhY3F1aXJlZCwgbnVsbCBpZiBmYWlsZWRcbiAgICovXG4gIHB1YmxpYyBhY3F1aXJlTG9jayhyZXNvdXJjZUlkOiBzdHJpbmcsIG9wZXJhdGlvbjogc3RyaW5nLCB0aW1lb3V0TXMgPSB0aGlzLkRFRkFVTFRfVElNRU9VVCk6IHN0cmluZyB8IG51bGwge1xuICAgIC8vIENsZWFuIGV4cGlyZWQgbG9ja3MgZmlyc3RcbiAgICB0aGlzLmNsZWFuRXhwaXJlZExvY2tzKCk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHJlc291cmNlIGlzIGFscmVhZHkgbG9ja2VkXG4gICAgaWYgKHRoaXMuYWN0aXZlTG9ja3MuaGFzKHJlc291cmNlSWQpKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFJlc291cmNlICR7cmVzb3VyY2VJZH0gaXMgYWxyZWFkeSBsb2NrZWQgZm9yIG9wZXJhdGlvbjogJHt0aGlzLmFjdGl2ZUxvY2tzLmdldChyZXNvdXJjZUlkKT8ub3BlcmF0aW9ufWApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBhIG5ldyBsb2NrXG4gICAgY29uc3QgbG9ja0lkID0gYGxvY2tfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA5KX1gO1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgXG4gICAgY29uc3QgbG9ja0luZm86IExvY2tJbmZvID0ge1xuICAgICAgaWQ6IGxvY2tJZCxcbiAgICAgIG9wZXJhdGlvbixcbiAgICAgIGFjcXVpcmVkQXQ6IG5vdyxcbiAgICAgIGV4cGlyZXNBdDogbm93ICsgdGltZW91dE1zXG4gICAgfTtcbiAgICBcbiAgICAvLyBTZXQgdGhlIGxvY2tcbiAgICB0aGlzLmFjdGl2ZUxvY2tzLnNldChyZXNvdXJjZUlkLCBsb2NrSW5mbyk7XG4gICAgY29uc29sZS5sb2coYExvY2sgYWNxdWlyZWQgZm9yICR7cmVzb3VyY2VJZH06ICR7b3BlcmF0aW9ufWApO1xuICAgIFxuICAgIC8vIFNldCBhdXRvbWF0aWMgcmVsZWFzZSBhZnRlciB0aW1lb3V0XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnJlbGVhc2VMb2NrKHJlc291cmNlSWQsIGxvY2tJZCk7XG4gICAgfSwgdGltZW91dE1zKTtcbiAgICBcbiAgICByZXR1cm4gbG9ja0lkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIGEgbG9jayBpZiB0aGUgbG9ja0lkIG1hdGNoZXNcbiAgICogQHBhcmFtIHJlc291cmNlSWQgUmVzb3VyY2UgaWRlbnRpZmllclxuICAgKiBAcGFyYW0gbG9ja0lkIExvY2sgSUQgcmV0dXJuZWQgZnJvbSBhY3F1aXJlTG9ja1xuICAgKiBAcmV0dXJucyB0cnVlIGlmIHJlbGVhc2VkLCBmYWxzZSBpZiBub3QgZm91bmQgb3IgSUQgZG9lc24ndCBtYXRjaFxuICAgKi9cbiAgcHVibGljIHJlbGVhc2VMb2NrKHJlc291cmNlSWQ6IHN0cmluZywgbG9ja0lkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBsb2NrID0gdGhpcy5hY3RpdmVMb2Nrcy5nZXQocmVzb3VyY2VJZCk7XG4gICAgXG4gICAgaWYgKCFsb2NrKSB7XG4gICAgICBjb25zb2xlLndhcm4oYE5vIGxvY2sgZm91bmQgZm9yIHJlc291cmNlICR7cmVzb3VyY2VJZH1gKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGxvY2suaWQgIT09IGxvY2tJZCkge1xuICAgICAgY29uc29sZS53YXJuKGBMb2NrIElEIG1pc21hdGNoIGZvciAke3Jlc291cmNlSWR9OiBleHBlY3RlZCAke2xvY2suaWR9LCBnb3QgJHtsb2NrSWR9YCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlbGVhc2UgdGhlIGxvY2tcbiAgICB0aGlzLmFjdGl2ZUxvY2tzLmRlbGV0ZShyZXNvdXJjZUlkKTtcbiAgICBjb25zb2xlLmxvZyhgTG9jayByZWxlYXNlZCBmb3IgJHtyZXNvdXJjZUlkfWApO1xuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBhIHJlc291cmNlIGlzIGN1cnJlbnRseSBsb2NrZWRcbiAgICogQHBhcmFtIHJlc291cmNlSWQgUmVzb3VyY2UgaWRlbnRpZmllclxuICAgKiBAcmV0dXJucyB0cnVlIGlmIGxvY2tlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqL1xuICBwdWJsaWMgaXNMb2NrZWQocmVzb3VyY2VJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdGhpcy5jbGVhbkV4cGlyZWRMb2NrcygpO1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZUxvY2tzLmhhcyhyZXNvdXJjZUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCBhbnkgZXhwaXJlZCBsb2Nrc1xuICAgKi9cbiAgcHJpdmF0ZSBjbGVhbkV4cGlyZWRMb2NrcygpOiB2b2lkIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIFxuICAgIGZvciAoY29uc3QgW3Jlc291cmNlSWQsIGxvY2tdIG9mIHRoaXMuYWN0aXZlTG9ja3MuZW50cmllcygpKSB7XG4gICAgICBpZiAobG9jay5leHBpcmVzQXQgPCBub3cpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExvY2sgZm9yICR7cmVzb3VyY2VJZH0gZXhwaXJlZCBhbmQgd2FzIGF1dG8tcmVsZWFzZWRgKTtcbiAgICAgICAgdGhpcy5hY3RpdmVMb2Nrcy5kZWxldGUocmVzb3VyY2VJZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0YXRlT3BlcmF0aW9uTG9jay5nZXRJbnN0YW5jZSgpO1xuIl0sIm5hbWVzIjpbIlN0YXRlT3BlcmF0aW9uTG9jayIsImluc3RhbmNlIiwiYWN0aXZlTG9ja3MiLCJNYXAiLCJERUZBVUxUX1RJTUVPVVQiLCJnZXRJbnN0YW5jZSIsImFjcXVpcmVMb2NrIiwicmVzb3VyY2VJZCIsIm9wZXJhdGlvbiIsInRpbWVvdXRNcyIsImNsZWFuRXhwaXJlZExvY2tzIiwiaGFzIiwiY29uc29sZSIsIndhcm4iLCJnZXQiLCJsb2NrSWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwibG9ja0luZm8iLCJpZCIsImFjcXVpcmVkQXQiLCJleHBpcmVzQXQiLCJzZXQiLCJsb2ciLCJzZXRUaW1lb3V0IiwicmVsZWFzZUxvY2siLCJsb2NrIiwiZGVsZXRlIiwiaXNMb2NrZWQiLCJlbnRyaWVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./utils/StateOperationLock.ts\n");

/***/ }),

/***/ "./utils/StatePersistence.ts":
/*!***********************************!*\
  !*** ./utils/StatePersistence.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   preventUnintendedRefresh: () => (/* binding */ preventUnintendedRefresh)\n/* harmony export */ });\n/* harmony import */ var _StateOperationLock__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./StateOperationLock */ \"./utils/StateOperationLock.ts\");\n\nclass StatePersistenceManager {\n    static getStoredState() {\n        throw new Error('Method not implemented.');\n    }\n    // Storage keys - making this public so it can be referenced by sync logic\n    static STORAGE_KEY = 'GRACE_DYNAMIC_SNAPSHOT';\n    static MAX_SNAPSHOT_AGE = 24 * 60 * 60 * 1000;\n    static STORAGE_VERSION = 1;\n    static MAX_STORAGE_SIZE = 4 * 1024 * 1024;\n    // Advanced logging mechanism\n    static log(message, level = 'info') {\n        const timestamp = new Date().toISOString();\n        const logMessage = `[StatePersistence:${level.toUpperCase()}] ${timestamp} - ${message}`;\n        switch(level){\n            case 'info':\n                console.log(logMessage);\n                break;\n            case 'warn':\n                console.warn(logMessage);\n                break;\n            case 'error':\n                console.error(logMessage);\n                break;\n        }\n    // Optional: Send to error tracking service\n    // this.reportToErrorTracking(message, level);\n    }\n    // Check storage quota and manage size\n    static async checkStorageQuota() {\n        try {\n            // Use the Storage API if available (modern browsers)\n            if ('storage' in navigator && 'estimate' in navigator.storage) {\n                const estimate = await navigator.storage.estimate();\n                const { usage, quota } = estimate;\n                if (usage && quota) {\n                    const usageRatio = usage / quota;\n                    this.log(`Storage usage: ${(usageRatio * 100).toFixed(2)}% (${Math.round(usage / 1024 / 1024)}MB / ${Math.round(quota / 1024 / 1024)}MB)`);\n                    // If over 90% of quota, try to clean up\n                    if (usageRatio > 0.9) {\n                        this.log('Storage quota nearing limit, cleaning up old data', 'warn');\n                        return this.cleanupStorage();\n                    }\n                }\n            } else {\n                // Fallback for browsers without Storage API\n                // Check current storage size\n                let totalSize = 0;\n                for(let i = 0; i < localStorage.length; i++){\n                    const key = localStorage.key(i);\n                    if (key) {\n                        const value = localStorage.getItem(key) || '';\n                        totalSize += key.length + value.length;\n                    }\n                }\n                // Convert to MB for easier debugging\n                const sizeMB = totalSize / (1024 * 1024);\n                this.log(`Estimated localStorage usage: ${sizeMB.toFixed(2)}MB`);\n                // If over 4MB, clean up (typical localStorage limit is 5MB)\n                if (totalSize > this.MAX_STORAGE_SIZE) {\n                    this.log('Storage size nearing limit, cleaning up old data', 'warn');\n                    return this.cleanupStorage();\n                }\n            }\n            return true;\n        } catch (error) {\n            this.log(`Error checking storage quota: ${error}`, 'error');\n            return true; // Continue anyway to not block operation\n        }\n    }\n    // Clean up storage when approaching quota limits\n    static cleanupStorage() {\n        try {\n            // Strategy 1: Remove old chat messages (typically the largest data)\n            const keysToCheck = [];\n            for(let i = 0; i < localStorage.length; i++){\n                const key = localStorage.key(i);\n                if (key && (key.startsWith('messages_') || key.includes('draft_'))) {\n                    keysToCheck.push(key);\n                }\n            }\n            // Sort by last access time if available\n            const keysWithTime = keysToCheck.map((key)=>{\n                // Ensure key is a string before calling replace\n                const sessionId = String(key).replace('messages_', '').replace('draft_', '');\n                const lastSynced = localStorage.getItem(`lastSynced_${sessionId}`);\n                const timestamp = lastSynced ? new Date(lastSynced).getTime() : 0;\n                return {\n                    key,\n                    timestamp\n                };\n            });\n            // Sort oldest first\n            keysWithTime.sort((a, b)=>a.timestamp - b.timestamp);\n            // Remove oldest 30% of items\n            const itemsToRemove = Math.ceil(keysWithTime.length * 0.3);\n            for(let i = 0; i < itemsToRemove; i++){\n                if (i < keysWithTime.length) {\n                    localStorage.removeItem(keysWithTime[i].key);\n                    this.log(`Removed old data: ${keysWithTime[i].key}`);\n                }\n            }\n            // Strategy 2: If main snapshot is too large, try to trim it\n            const snapshot = localStorage.getItem(this.STORAGE_KEY);\n            if (snapshot && snapshot.length > 1024 * 1024) {\n                try {\n                    const parsedSnapshot = JSON.parse(snapshot);\n                    // Trim message history to reduce size\n                    if (parsedSnapshot.chatContext && parsedSnapshot.chatContext.messages) {\n                        // Keep only last 20 messages\n                        parsedSnapshot.chatContext.messages = parsedSnapshot.chatContext.messages.slice(-20);\n                    }\n                    // Store the trimmed version\n                    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(parsedSnapshot));\n                    this.log('Trimmed main snapshot size');\n                } catch (e) {\n                    this.log(`Error trimming snapshot: ${e}`, 'error');\n                }\n            }\n            return true;\n        } catch (error) {\n            this.log(`Error cleaning up storage: ${error}`, 'error');\n            return false;\n        }\n    }\n    // Validate snapshot structure and schema\n    static validateSnapshotSchema(snapshot) {\n        if (!snapshot || typeof snapshot !== 'object') return false;\n        // Check required fields\n        if (typeof snapshot.timestamp !== 'number') return false;\n        // Check for required sub-objects\n        const requiredObjects = [\n            'userSession',\n            'chatContext',\n            'pageState',\n            'widgetStates'\n        ];\n        for (const obj of requiredObjects){\n            if (!snapshot[obj] || typeof snapshot[obj] !== 'object') {\n                return false;\n            }\n        }\n        return true;\n    }\n    // Create a backup of the current snapshot\n    static createBackup() {\n        try {\n            const currentSnapshot = localStorage.getItem(this.STORAGE_KEY);\n            if (currentSnapshot) {\n                localStorage.setItem(`${this.STORAGE_KEY}_BACKUP`, currentSnapshot);\n            }\n        } catch (error) {\n            this.log(`Failed to create backup: ${error}`, 'warn');\n        }\n    }\n    // Capture the current application state with enhanced safety\n    static async captureSnapshot(partialState) {\n        // Acquire a lock for state operations to prevent race conditions\n        const lockId = _StateOperationLock__WEBPACK_IMPORTED_MODULE_0__[\"default\"].acquireLock('state_snapshot', 'capture_snapshot');\n        if (!lockId) {\n            this.log('Could not acquire lock for state operation, another operation is in progress', 'warn');\n            return;\n        }\n        try {\n            // Validate storage availability\n            if (!this.isStorageAvailable()) {\n                this.log('Local storage not available', 'warn');\n                return;\n            }\n            // Check quota before writing\n            const quotaOk = await this.checkStorageQuota();\n            if (!quotaOk) {\n                this.log('Storage quota issues, data may not be saved completely', 'warn');\n            }\n            const existingSnapshot = this.retrieveSnapshot();\n            const newSnapshot = {\n                timestamp: Date.now(),\n                version: this.STORAGE_VERSION,\n                userSession: partialState?.userSession || existingSnapshot?.userSession || {},\n                chatContext: partialState?.chatContext || existingSnapshot?.chatContext || {},\n                pageState: partialState?.pageState || existingSnapshot?.pageState || {},\n                widgetStates: partialState?.widgetStates || existingSnapshot?.widgetStates || {}\n            };\n            // Create a backup of the current state before updating\n            this.createBackup();\n            // Attempt to save state\n            try {\n                localStorage.setItem(this.STORAGE_KEY, JSON.stringify(newSnapshot));\n                this.log('State snapshot captured successfully');\n            } catch (storageError) {\n                // If failed due to quota, force cleanup and try again\n                this.log(`Storage error, forcing cleanup: ${storageError}`, 'warn');\n                this.cleanupStorage();\n                // Try one more time with a more minimal state\n                const minimalSnapshot = {\n                    timestamp: Date.now(),\n                    version: this.STORAGE_VERSION,\n                    userSession: newSnapshot.userSession,\n                    // Minimal objects to ensure basic functionality\n                    chatContext: {\n                        currentConversationId: newSnapshot.chatContext.currentConversationId\n                    },\n                    pageState: {\n                        lastVisitedPath: newSnapshot.pageState.lastVisitedPath\n                    },\n                    widgetStates: {}\n                };\n                localStorage.setItem(this.STORAGE_KEY, JSON.stringify(minimalSnapshot));\n                this.log('Minimal state snapshot saved as fallback');\n            }\n        } catch (error) {\n            this.log(`Failed to capture state snapshot: ${error}`, 'error');\n        } finally{\n            // Always release the lock\n            _StateOperationLock__WEBPACK_IMPORTED_MODULE_0__[\"default\"].releaseLock('state_snapshot', lockId);\n        }\n    }\n    // Check local storage availability\n    static isStorageAvailable() {\n        try {\n            const testKey = '__storage_test__';\n            localStorage.setItem(testKey, testKey);\n            localStorage.removeItem(testKey);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n    // Validate snapshot age and integrity\n    static validateSnapshot(snapshot) {\n        if (!snapshot) return false;\n        // Check schema/structure validity\n        if (!this.validateSnapshotSchema(snapshot)) {\n            this.log('Snapshot has invalid schema, discarding', 'warn');\n            return false;\n        }\n        const currentTime = Date.now();\n        const snapshotAge = currentTime - snapshot.timestamp;\n        if (snapshotAge > this.MAX_SNAPSHOT_AGE) {\n            this.log('Snapshot too old, discarding', 'warn');\n            return false;\n        }\n        return true;\n    }\n    // Retrieve the last saved state snapshot with corruption recovery\n    static retrieveSnapshot() {\n        // We don't lock for reads, but we do check if there's a write in progress\n        if (_StateOperationLock__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isLocked('state_snapshot')) {\n            this.log('State snapshot is currently being updated, using existing snapshot', 'warn');\n        }\n        try {\n            const snapshot = localStorage.getItem(this.STORAGE_KEY);\n            if (!snapshot) return null;\n            try {\n                const parsedSnapshot = JSON.parse(snapshot);\n                // Validate snapshot integrity\n                if (this.validateSnapshot(parsedSnapshot)) {\n                    return parsedSnapshot;\n                } else {\n                    this.log('Invalid snapshot detected, attempting recovery', 'warn');\n                    return this.attemptSnapshotRecovery();\n                }\n            } catch (parseError) {\n                this.log(`JSON parse error: ${parseError}, attempting recovery`, 'error');\n                return this.attemptSnapshotRecovery();\n            }\n        } catch (error) {\n            this.log(`Failed to retrieve state snapshot: ${error}`, 'error');\n            return null;\n        }\n    }\n    // Attempt to recover corrupted state\n    static attemptSnapshotRecovery() {\n        try {\n            this.log('Attempting state recovery', 'warn');\n            // Strategy 1: Check for backup\n            const backupSnapshot = localStorage.getItem(`${this.STORAGE_KEY}_BACKUP`);\n            if (backupSnapshot) {\n                try {\n                    const parsedBackup = JSON.parse(backupSnapshot);\n                    if (this.validateSnapshot(parsedBackup)) {\n                        this.log('Recovered state from backup', 'info');\n                        return parsedBackup;\n                    }\n                } catch (e) {\n                    this.log('Backup snapshot also corrupted', 'warn');\n                }\n            }\n            // Strategy 2: Build from individual pieces in localStorage\n            const recoveredState = {\n                timestamp: Date.now(),\n                version: this.STORAGE_VERSION,\n                userSession: {},\n                chatContext: {},\n                pageState: {},\n                widgetStates: {}\n            };\n            // Try to get last path from localStorage\n            const activeSessionId = localStorage.getItem('activeSessionId');\n            if (activeSessionId) {\n                recoveredState.chatContext.currentConversationId = activeSessionId;\n            }\n            // Set recovery flag\n            recoveredState.recovered = true;\n            this.log('Created minimal recovered state', 'info');\n            return recoveredState;\n        } catch (error) {\n            this.log(`Recovery failed: ${error}`, 'error');\n            return null;\n        }\n    }\n    // Hydrate application state\n    static hydrateState(router) {\n        const snapshot = this.retrieveSnapshot();\n        if (snapshot) {\n            // Optionally navigate to last visited path\n            if (router && snapshot.pageState.lastVisitedPath) {\n                router.push(snapshot.pageState.lastVisitedPath);\n            }\n            return snapshot;\n        }\n        return {};\n    }\n    // Clear the snapshot (used during logout)\n    static clearSnapshot() {\n        localStorage.removeItem(this.STORAGE_KEY);\n    }\n}\n// Prevent accidental page unload\nfunction preventUnintendedRefresh(e) {\n    e.preventDefault();\n    e.returnValue = ''; // Required for Chrome\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StatePersistenceManager);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eUNBQXlDO1lBQ3pDLE1BQU1nQixrQkFBa0JuRSxhQUFhSSxPQUFPLENBQUM7WUFDN0MsSUFBSStELGlCQUFpQjtnQkFDbkJELGVBQWV2QyxXQUFXLENBQUMyQixxQkFBcUIsR0FBR2E7WUFDckQ7WUFFQSxvQkFBb0I7WUFDcEJELGVBQWVFLFNBQVMsR0FBRztZQUUzQixJQUFJLENBQUM1RixHQUFHLENBQUMsbUNBQW1DO1lBQzVDLE9BQU8wRjtRQUNULEVBQUUsT0FBT2hGLE9BQU87WUFDZCxJQUFJLENBQUNWLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixFQUFFVSxPQUFPLEVBQUU7WUFDdEMsT0FBTztRQUNUO0lBQ0Y7SUFFQSw0QkFBNEI7SUFDNUIsT0FBT21GLGFBQWFDLE1BQW1CLEVBQWlDO1FBQ3RFLE1BQU0vQyxXQUFXLElBQUksQ0FBQ3NCLGdCQUFnQjtRQUV0QyxJQUFJdEIsVUFBVTtZQUNaLDJDQUEyQztZQUMzQyxJQUFJK0MsVUFBVS9DLFNBQVMyQixTQUFTLENBQUNLLGVBQWUsRUFBRTtnQkFDaERlLE9BQU83RCxJQUFJLENBQUNjLFNBQVMyQixTQUFTLENBQUNLLGVBQWU7WUFDaEQ7WUFFQSxPQUFPaEM7UUFDVDtRQUVBLE9BQU8sQ0FBQztJQUNWO0lBRUEsMENBQTBDO0lBQzFDLE9BQU9nRCxnQkFBc0I7UUFDM0J2RSxhQUFhc0IsVUFBVSxDQUFDLElBQUksQ0FBQ2xELFdBQVc7SUFDMUM7QUFDRjtBQUVBLGlDQUFpQztBQUMxQixTQUFTb0cseUJBQXlCeEMsQ0FBb0I7SUFDM0RBLEVBQUV5QyxjQUFjO0lBQ2hCekMsRUFBRTBDLFdBQVcsR0FBRyxJQUFJLHNCQUFzQjtBQUM1QztBQUVBLGlFQUFlekcsdUJBQXVCQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvd29ua2Fzd29ybGQvRG93bmxvYWRzL2dyYWNlLXByb2plY3Qvc3JjL3VpL3V0aWxzL1N0YXRlUGVyc2lzdGVuY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCBTdGF0ZU9wZXJhdGlvbkxvY2sgZnJvbSAnLi9TdGF0ZU9wZXJhdGlvbkxvY2snO1xuXG4vLyBEZWZpbmUgdGhlIHNoYXBlIG9mIG91ciBwZXJzaXN0ZW50IHN0YXRlXG5leHBvcnQgaW50ZXJmYWNlIER5bmFtaWNTdGF0ZVNuYXBzaG90IHtcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIHZlcnNpb24/OiBudW1iZXI7ICAgICAgLy8gU2NoZW1hIHZlcnNpb24gZm9yIG1pZ3JhdGlvbnNcbiAgcmVjb3ZlcmVkPzogYm9vbGVhbjsgICAvLyBGbGFnIGZvciByZWNvdmVyZWQgc3RhdGVcbiAgdXNlclNlc3Npb246IHtcbiAgICB0b2tlbj86IHN0cmluZztcbiAgICB1c2VybmFtZT86IHN0cmluZztcbiAgfTtcbiAgY2hhdENvbnRleHQ6IHtcbiAgICBjdXJyZW50Q29udmVyc2F0aW9uSWQ/OiBzdHJpbmc7XG4gICAgZHJhZnRNZXNzYWdlPzogc3RyaW5nO1xuICAgIGxhc3RNZXNzYWdlVGltZXN0YW1wPzogbnVtYmVyO1xuICB9O1xuICBwYWdlU3RhdGU6IHtcbiAgICBsYXN0VmlzaXRlZFBhdGg/OiBzdHJpbmc7XG4gICAgc2Nyb2xsUG9zaXRpb25zPzogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgfTtcbiAgd2lkZ2V0U3RhdGVzOiB7XG4gICAgdHJhZGluZ1Bvc2l0aW9ucz86IGFueVtdO1xuICAgIHdhbGxldEJhbGFuY2U/OiBudW1iZXI7XG4gIH07XG4gIFxuICAvLyBFeHRlbmRlZCBzdGF0ZSBwcm9wZXJ0aWVzXG4gIGNoYXRTdGF0ZT86IHtcbiAgICBjdXJyZW50U2Vzc2lvbklkPzogc3RyaW5nO1xuICAgIGFjdGl2ZVNlc3Npb25zPzogc3RyaW5nW107XG4gICAgc2Vzc2lvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIGRyYWZ0TWVzc2FnZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICB9O1xuICBcbiAgdHJhZGluZ1N0YXRlPzoge1xuICAgIHNlbGVjdGVkVG9rZW4/OiBhbnk7XG4gICAgd2F0Y2hsaXN0Pzogc3RyaW5nW107XG4gICAgdHJhZGVIaXN0b3J5PzogYW55W107XG4gICAgdHJhZGVGb3JtPzogYW55O1xuICAgIHJlc29sdXRpb24/OiBzdHJpbmc7XG4gICAgc2VhcmNoPzogc3RyaW5nO1xuICAgIHBvc2l0aW9ucz86IGFueVtdO1xuICB9O1xuICBcbiAgd2FsbGV0U3RhdGU/OiB7XG4gICAgY29ubmVjdGVkV2FsbGV0cz86IGFueVtdO1xuICAgIHRyYW5zYWN0aW9ucz86IGFueVtdO1xuICB9O1xuICBcbiAgc29jaWFsU3RhdGU/OiB7XG4gICAgcG9zdHM/OiBhbnlbXTtcbiAgICBmb2xsb3dpbmc/OiBzdHJpbmdbXTtcbiAgICBub3RpZmljYXRpb25zPzogYW55W107XG4gIH07XG4gIFxuICB1aVN0YXRlPzoge1xuICAgIGRhcmtNb2RlPzogYm9vbGVhbjtcbiAgICBzaWRlYmFyT3Blbj86IGJvb2xlYW47XG4gICAgYWN0aXZlVGFicz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIH07XG59XG5cbmNsYXNzIFN0YXRlUGVyc2lzdGVuY2VNYW5hZ2VyIHtcbiAgc3RhdGljIGdldFN0b3JlZFN0YXRlKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgfVxuICAvLyBTdG9yYWdlIGtleXMgLSBtYWtpbmcgdGhpcyBwdWJsaWMgc28gaXQgY2FuIGJlIHJlZmVyZW5jZWQgYnkgc3luYyBsb2dpY1xuICBwdWJsaWMgc3RhdGljIFNUT1JBR0VfS0VZID0gJ0dSQUNFX0RZTkFNSUNfU05BUFNIT1QnO1xuICBwcml2YXRlIHN0YXRpYyBNQVhfU05BUFNIT1RfQUdFID0gMjQgKiA2MCAqIDYwICogMTAwMDsgLy8gMjQgaG91cnNcbiAgcHJpdmF0ZSBzdGF0aWMgU1RPUkFHRV9WRVJTSU9OID0gMTsgLy8gVXNlZCBmb3Igc2NoZW1hIG1pZ3JhdGlvbnNcbiAgcHJpdmF0ZSBzdGF0aWMgTUFYX1NUT1JBR0VfU0laRSA9IDQgKiAxMDI0ICogMTAyNDsgLy8gNE1CIG1heCBzaXplIChsb2NhbFN0b3JhZ2UgaXMgdHlwaWNhbGx5IDVNQilcblxuICAvLyBBZHZhbmNlZCBsb2dnaW5nIG1lY2hhbmlzbVxuICBwcml2YXRlIHN0YXRpYyBsb2cobWVzc2FnZTogc3RyaW5nLCBsZXZlbDogJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyA9ICdpbmZvJykge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICBjb25zdCBsb2dNZXNzYWdlID0gYFtTdGF0ZVBlcnNpc3RlbmNlOiR7bGV2ZWwudG9VcHBlckNhc2UoKX1dICR7dGltZXN0YW1wfSAtICR7bWVzc2FnZX1gO1xuICAgIFxuICAgIHN3aXRjaChsZXZlbCkge1xuICAgICAgY2FzZSAnaW5mbyc6IGNvbnNvbGUubG9nKGxvZ01lc3NhZ2UpOyBicmVhaztcbiAgICAgIGNhc2UgJ3dhcm4nOiBjb25zb2xlLndhcm4obG9nTWVzc2FnZSk7IGJyZWFrO1xuICAgICAgY2FzZSAnZXJyb3InOiBjb25zb2xlLmVycm9yKGxvZ01lc3NhZ2UpOyBicmVhaztcbiAgICB9XG5cbiAgICAvLyBPcHRpb25hbDogU2VuZCB0byBlcnJvciB0cmFja2luZyBzZXJ2aWNlXG4gICAgLy8gdGhpcy5yZXBvcnRUb0Vycm9yVHJhY2tpbmcobWVzc2FnZSwgbGV2ZWwpO1xuICB9XG5cbiAgLy8gQ2hlY2sgc3RvcmFnZSBxdW90YSBhbmQgbWFuYWdlIHNpemVcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgY2hlY2tTdG9yYWdlUXVvdGEoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFVzZSB0aGUgU3RvcmFnZSBBUEkgaWYgYXZhaWxhYmxlIChtb2Rlcm4gYnJvd3NlcnMpXG4gICAgICBpZiAoJ3N0b3JhZ2UnIGluIG5hdmlnYXRvciAmJiAnZXN0aW1hdGUnIGluIG5hdmlnYXRvci5zdG9yYWdlKSB7XG4gICAgICAgIGNvbnN0IGVzdGltYXRlID0gYXdhaXQgbmF2aWdhdG9yLnN0b3JhZ2UuZXN0aW1hdGUoKTtcbiAgICAgICAgY29uc3QgeyB1c2FnZSwgcXVvdGEgfSA9IGVzdGltYXRlO1xuICAgICAgICBcbiAgICAgICAgaWYgKHVzYWdlICYmIHF1b3RhKSB7XG4gICAgICAgICAgY29uc3QgdXNhZ2VSYXRpbyA9IHVzYWdlIC8gcXVvdGE7XG4gICAgICAgICAgdGhpcy5sb2coYFN0b3JhZ2UgdXNhZ2U6ICR7KHVzYWdlUmF0aW8gKiAxMDApLnRvRml4ZWQoMil9JSAoJHtNYXRoLnJvdW5kKHVzYWdlIC8gMTAyNCAvIDEwMjQpfU1CIC8gJHtNYXRoLnJvdW5kKHF1b3RhIC8gMTAyNCAvIDEwMjQpfU1CKWApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIG92ZXIgOTAlIG9mIHF1b3RhLCB0cnkgdG8gY2xlYW4gdXBcbiAgICAgICAgICBpZiAodXNhZ2VSYXRpbyA+IDAuOSkge1xuICAgICAgICAgICAgdGhpcy5sb2coJ1N0b3JhZ2UgcXVvdGEgbmVhcmluZyBsaW1pdCwgY2xlYW5pbmcgdXAgb2xkIGRhdGEnLCAnd2FybicpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xlYW51cFN0b3JhZ2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZhbGxiYWNrIGZvciBicm93c2VycyB3aXRob3V0IFN0b3JhZ2UgQVBJXG4gICAgICAgIC8vIENoZWNrIGN1cnJlbnQgc3RvcmFnZSBzaXplXG4gICAgICAgIGxldCB0b3RhbFNpemUgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsU3RvcmFnZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGtleSA9IGxvY2FsU3RvcmFnZS5rZXkoaSk7XG4gICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpIHx8ICcnO1xuICAgICAgICAgICAgdG90YWxTaXplICs9IGtleS5sZW5ndGggKyB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDb252ZXJ0IHRvIE1CIGZvciBlYXNpZXIgZGVidWdnaW5nXG4gICAgICAgIGNvbnN0IHNpemVNQiA9IHRvdGFsU2l6ZSAvICgxMDI0ICogMTAyNCk7XG4gICAgICAgIHRoaXMubG9nKGBFc3RpbWF0ZWQgbG9jYWxTdG9yYWdlIHVzYWdlOiAke3NpemVNQi50b0ZpeGVkKDIpfU1CYCk7XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBvdmVyIDRNQiwgY2xlYW4gdXAgKHR5cGljYWwgbG9jYWxTdG9yYWdlIGxpbWl0IGlzIDVNQilcbiAgICAgICAgaWYgKHRvdGFsU2l6ZSA+IHRoaXMuTUFYX1NUT1JBR0VfU0laRSkge1xuICAgICAgICAgIHRoaXMubG9nKCdTdG9yYWdlIHNpemUgbmVhcmluZyBsaW1pdCwgY2xlYW5pbmcgdXAgb2xkIGRhdGEnLCAnd2FybicpO1xuICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFudXBTdG9yYWdlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nKGBFcnJvciBjaGVja2luZyBzdG9yYWdlIHF1b3RhOiAke2Vycm9yfWAsICdlcnJvcicpO1xuICAgICAgcmV0dXJuIHRydWU7IC8vIENvbnRpbnVlIGFueXdheSB0byBub3QgYmxvY2sgb3BlcmF0aW9uXG4gICAgfVxuICB9XG4gIFxuICAvLyBDbGVhbiB1cCBzdG9yYWdlIHdoZW4gYXBwcm9hY2hpbmcgcXVvdGEgbGltaXRzXG4gIHByaXZhdGUgc3RhdGljIGNsZWFudXBTdG9yYWdlKCk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBTdHJhdGVneSAxOiBSZW1vdmUgb2xkIGNoYXQgbWVzc2FnZXMgKHR5cGljYWxseSB0aGUgbGFyZ2VzdCBkYXRhKVxuICAgICAgY29uc3Qga2V5c1RvQ2hlY2s6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsU3RvcmFnZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpO1xuICAgICAgICBpZiAoa2V5ICYmIChrZXkuc3RhcnRzV2l0aCgnbWVzc2FnZXNfJykgfHwga2V5LmluY2x1ZGVzKCdkcmFmdF8nKSkpIHtcbiAgICAgICAgICBrZXlzVG9DaGVjay5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU29ydCBieSBsYXN0IGFjY2VzcyB0aW1lIGlmIGF2YWlsYWJsZVxuICAgICAgY29uc3Qga2V5c1dpdGhUaW1lID0ga2V5c1RvQ2hlY2subWFwKGtleSA9PiB7XG4gICAgICAgIC8vIEVuc3VyZSBrZXkgaXMgYSBzdHJpbmcgYmVmb3JlIGNhbGxpbmcgcmVwbGFjZVxuICAgICAgICBjb25zdCBzZXNzaW9uSWQgPSBTdHJpbmcoa2V5KS5yZXBsYWNlKCdtZXNzYWdlc18nLCAnJykucmVwbGFjZSgnZHJhZnRfJywgJycpO1xuICAgICAgICBjb25zdCBsYXN0U3luY2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYGxhc3RTeW5jZWRfJHtzZXNzaW9uSWR9YCk7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IGxhc3RTeW5jZWQgPyBuZXcgRGF0ZShsYXN0U3luY2VkKS5nZXRUaW1lKCkgOiAwO1xuICAgICAgICByZXR1cm4geyBrZXksIHRpbWVzdGFtcCB9O1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNvcnQgb2xkZXN0IGZpcnN0XG4gICAgICBrZXlzV2l0aFRpbWUuc29ydCgoYSwgYikgPT4gYS50aW1lc3RhbXAgLSBiLnRpbWVzdGFtcCk7XG4gICAgICBcbiAgICAgIC8vIFJlbW92ZSBvbGRlc3QgMzAlIG9mIGl0ZW1zXG4gICAgICBjb25zdCBpdGVtc1RvUmVtb3ZlID0gTWF0aC5jZWlsKGtleXNXaXRoVGltZS5sZW5ndGggKiAwLjMpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtc1RvUmVtb3ZlOyBpKyspIHtcbiAgICAgICAgaWYgKGkgPCBrZXlzV2l0aFRpbWUubGVuZ3RoKSB7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5c1dpdGhUaW1lW2ldLmtleSk7XG4gICAgICAgICAgdGhpcy5sb2coYFJlbW92ZWQgb2xkIGRhdGE6ICR7a2V5c1dpdGhUaW1lW2ldLmtleX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTdHJhdGVneSAyOiBJZiBtYWluIHNuYXBzaG90IGlzIHRvbyBsYXJnZSwgdHJ5IHRvIHRyaW0gaXRcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5TVE9SQUdFX0tFWSk7XG4gICAgICBpZiAoc25hcHNob3QgJiYgc25hcHNob3QubGVuZ3RoID4gMTAyNCAqIDEwMjQpIHsgLy8gSWYgb3ZlciAxTUJcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBwYXJzZWRTbmFwc2hvdCA9IEpTT04ucGFyc2Uoc25hcHNob3QpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFRyaW0gbWVzc2FnZSBoaXN0b3J5IHRvIHJlZHVjZSBzaXplXG4gICAgICAgICAgaWYgKHBhcnNlZFNuYXBzaG90LmNoYXRDb250ZXh0ICYmIHBhcnNlZFNuYXBzaG90LmNoYXRDb250ZXh0Lm1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAvLyBLZWVwIG9ubHkgbGFzdCAyMCBtZXNzYWdlc1xuICAgICAgICAgICAgcGFyc2VkU25hcHNob3QuY2hhdENvbnRleHQubWVzc2FnZXMgPSBcbiAgICAgICAgICAgICAgcGFyc2VkU25hcHNob3QuY2hhdENvbnRleHQubWVzc2FnZXMuc2xpY2UoLTIwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU3RvcmUgdGhlIHRyaW1tZWQgdmVyc2lvblxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KHBhcnNlZFNuYXBzaG90KSk7XG4gICAgICAgICAgdGhpcy5sb2coJ1RyaW1tZWQgbWFpbiBzbmFwc2hvdCBzaXplJyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB0aGlzLmxvZyhgRXJyb3IgdHJpbW1pbmcgc25hcHNob3Q6ICR7ZX1gLCAnZXJyb3InKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coYEVycm9yIGNsZWFuaW5nIHVwIHN0b3JhZ2U6ICR7ZXJyb3J9YCwgJ2Vycm9yJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIFxuICAvLyBWYWxpZGF0ZSBzbmFwc2hvdCBzdHJ1Y3R1cmUgYW5kIHNjaGVtYVxuICBwcml2YXRlIHN0YXRpYyB2YWxpZGF0ZVNuYXBzaG90U2NoZW1hKHNuYXBzaG90OiBhbnkpOiBib29sZWFuIHtcbiAgICBpZiAoIXNuYXBzaG90IHx8IHR5cGVvZiBzbmFwc2hvdCAhPT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICAvLyBDaGVjayByZXF1aXJlZCBmaWVsZHNcbiAgICBpZiAodHlwZW9mIHNuYXBzaG90LnRpbWVzdGFtcCAhPT0gJ251bWJlcicpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgcmVxdWlyZWQgc3ViLW9iamVjdHNcbiAgICBjb25zdCByZXF1aXJlZE9iamVjdHMgPSBbJ3VzZXJTZXNzaW9uJywgJ2NoYXRDb250ZXh0JywgJ3BhZ2VTdGF0ZScsICd3aWRnZXRTdGF0ZXMnXTtcbiAgICBmb3IgKGNvbnN0IG9iaiBvZiByZXF1aXJlZE9iamVjdHMpIHtcbiAgICAgIGlmICghc25hcHNob3Rbb2JqXSB8fCB0eXBlb2Ygc25hcHNob3Rbb2JqXSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIENyZWF0ZSBhIGJhY2t1cCBvZiB0aGUgY3VycmVudCBzbmFwc2hvdFxuICBwcml2YXRlIHN0YXRpYyBjcmVhdGVCYWNrdXAoKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTbmFwc2hvdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuU1RPUkFHRV9LRVkpO1xuICAgICAgaWYgKGN1cnJlbnRTbmFwc2hvdCkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHt0aGlzLlNUT1JBR0VfS0VZfV9CQUNLVVBgLCBjdXJyZW50U25hcHNob3QpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZyhgRmFpbGVkIHRvIGNyZWF0ZSBiYWNrdXA6ICR7ZXJyb3J9YCwgJ3dhcm4nKTtcbiAgICB9XG4gIH1cblxuICAvLyBDYXB0dXJlIHRoZSBjdXJyZW50IGFwcGxpY2F0aW9uIHN0YXRlIHdpdGggZW5oYW5jZWQgc2FmZXR5XG4gIHN0YXRpYyBhc3luYyBjYXB0dXJlU25hcHNob3QocGFydGlhbFN0YXRlPzogUGFydGlhbDxEeW5hbWljU3RhdGVTbmFwc2hvdD4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBBY3F1aXJlIGEgbG9jayBmb3Igc3RhdGUgb3BlcmF0aW9ucyB0byBwcmV2ZW50IHJhY2UgY29uZGl0aW9uc1xuICAgIGNvbnN0IGxvY2tJZCA9IFN0YXRlT3BlcmF0aW9uTG9jay5hY3F1aXJlTG9jaygnc3RhdGVfc25hcHNob3QnLCAnY2FwdHVyZV9zbmFwc2hvdCcpO1xuICAgIGlmICghbG9ja0lkKSB7XG4gICAgICB0aGlzLmxvZygnQ291bGQgbm90IGFjcXVpcmUgbG9jayBmb3Igc3RhdGUgb3BlcmF0aW9uLCBhbm90aGVyIG9wZXJhdGlvbiBpcyBpbiBwcm9ncmVzcycsICd3YXJuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSBzdG9yYWdlIGF2YWlsYWJpbGl0eVxuICAgICAgaWYgKCF0aGlzLmlzU3RvcmFnZUF2YWlsYWJsZSgpKSB7XG4gICAgICAgIHRoaXMubG9nKCdMb2NhbCBzdG9yYWdlIG5vdCBhdmFpbGFibGUnLCAnd2FybicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIHF1b3RhIGJlZm9yZSB3cml0aW5nXG4gICAgICBjb25zdCBxdW90YU9rID0gYXdhaXQgdGhpcy5jaGVja1N0b3JhZ2VRdW90YSgpO1xuICAgICAgaWYgKCFxdW90YU9rKSB7XG4gICAgICAgIHRoaXMubG9nKCdTdG9yYWdlIHF1b3RhIGlzc3VlcywgZGF0YSBtYXkgbm90IGJlIHNhdmVkIGNvbXBsZXRlbHknLCAnd2FybicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBleGlzdGluZ1NuYXBzaG90ID0gdGhpcy5yZXRyaWV2ZVNuYXBzaG90KCk7XG4gICAgICBjb25zdCBuZXdTbmFwc2hvdDogRHluYW1pY1N0YXRlU25hcHNob3QgPSB7XG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgdmVyc2lvbjogdGhpcy5TVE9SQUdFX1ZFUlNJT04sIC8vIEFkZCB2ZXJzaW9uIGZvciBzY2hlbWEgbWlncmF0aW9uc1xuICAgICAgICB1c2VyU2Vzc2lvbjogcGFydGlhbFN0YXRlPy51c2VyU2Vzc2lvbiB8fCBleGlzdGluZ1NuYXBzaG90Py51c2VyU2Vzc2lvbiB8fCB7fSxcbiAgICAgICAgY2hhdENvbnRleHQ6IHBhcnRpYWxTdGF0ZT8uY2hhdENvbnRleHQgfHwgZXhpc3RpbmdTbmFwc2hvdD8uY2hhdENvbnRleHQgfHwge30sXG4gICAgICAgIHBhZ2VTdGF0ZTogcGFydGlhbFN0YXRlPy5wYWdlU3RhdGUgfHwgZXhpc3RpbmdTbmFwc2hvdD8ucGFnZVN0YXRlIHx8IHt9LFxuICAgICAgICB3aWRnZXRTdGF0ZXM6IHBhcnRpYWxTdGF0ZT8ud2lkZ2V0U3RhdGVzIHx8IGV4aXN0aW5nU25hcHNob3Q/LndpZGdldFN0YXRlcyB8fCB7fVxuICAgICAgfTtcblxuICAgICAgLy8gQ3JlYXRlIGEgYmFja3VwIG9mIHRoZSBjdXJyZW50IHN0YXRlIGJlZm9yZSB1cGRhdGluZ1xuICAgICAgdGhpcy5jcmVhdGVCYWNrdXAoKTtcbiAgICAgIFxuICAgICAgLy8gQXR0ZW1wdCB0byBzYXZlIHN0YXRlXG4gICAgICB0cnkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLlNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShuZXdTbmFwc2hvdCkpO1xuICAgICAgICB0aGlzLmxvZygnU3RhdGUgc25hcHNob3QgY2FwdHVyZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICB9IGNhdGNoIChzdG9yYWdlRXJyb3IpIHtcbiAgICAgICAgLy8gSWYgZmFpbGVkIGR1ZSB0byBxdW90YSwgZm9yY2UgY2xlYW51cCBhbmQgdHJ5IGFnYWluXG4gICAgICAgIHRoaXMubG9nKGBTdG9yYWdlIGVycm9yLCBmb3JjaW5nIGNsZWFudXA6ICR7c3RvcmFnZUVycm9yfWAsICd3YXJuJyk7XG4gICAgICAgIHRoaXMuY2xlYW51cFN0b3JhZ2UoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSBvbmUgbW9yZSB0aW1lIHdpdGggYSBtb3JlIG1pbmltYWwgc3RhdGVcbiAgICAgICAgY29uc3QgbWluaW1hbFNuYXBzaG90ID0ge1xuICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICB2ZXJzaW9uOiB0aGlzLlNUT1JBR0VfVkVSU0lPTixcbiAgICAgICAgICB1c2VyU2Vzc2lvbjogbmV3U25hcHNob3QudXNlclNlc3Npb24sXG4gICAgICAgICAgLy8gTWluaW1hbCBvYmplY3RzIHRvIGVuc3VyZSBiYXNpYyBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgY2hhdENvbnRleHQ6IHsgY3VycmVudENvbnZlcnNhdGlvbklkOiBuZXdTbmFwc2hvdC5jaGF0Q29udGV4dC5jdXJyZW50Q29udmVyc2F0aW9uSWQgfSxcbiAgICAgICAgICBwYWdlU3RhdGU6IHsgbGFzdFZpc2l0ZWRQYXRoOiBuZXdTbmFwc2hvdC5wYWdlU3RhdGUubGFzdFZpc2l0ZWRQYXRoIH0sXG4gICAgICAgICAgd2lkZ2V0U3RhdGVzOiB7fVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5TVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkobWluaW1hbFNuYXBzaG90KSk7XG4gICAgICAgIHRoaXMubG9nKCdNaW5pbWFsIHN0YXRlIHNuYXBzaG90IHNhdmVkIGFzIGZhbGxiYWNrJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nKGBGYWlsZWQgdG8gY2FwdHVyZSBzdGF0ZSBzbmFwc2hvdDogJHtlcnJvcn1gLCAnZXJyb3InKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gQWx3YXlzIHJlbGVhc2UgdGhlIGxvY2tcbiAgICAgIFN0YXRlT3BlcmF0aW9uTG9jay5yZWxlYXNlTG9jaygnc3RhdGVfc25hcHNob3QnLCBsb2NrSWQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENoZWNrIGxvY2FsIHN0b3JhZ2UgYXZhaWxhYmlsaXR5XG4gIHByaXZhdGUgc3RhdGljIGlzU3RvcmFnZUF2YWlsYWJsZSgpOiBib29sZWFuIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGVzdEtleSA9ICdfX3N0b3JhZ2VfdGVzdF9fJztcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRlc3RLZXksIHRlc3RLZXkpO1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGVzdEtleSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gVmFsaWRhdGUgc25hcHNob3QgYWdlIGFuZCBpbnRlZ3JpdHlcbiAgcHJpdmF0ZSBzdGF0aWMgdmFsaWRhdGVTbmFwc2hvdChzbmFwc2hvdDogRHluYW1pY1N0YXRlU25hcHNob3QpOiBib29sZWFuIHtcbiAgICBpZiAoIXNuYXBzaG90KSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBDaGVjayBzY2hlbWEvc3RydWN0dXJlIHZhbGlkaXR5XG4gICAgaWYgKCF0aGlzLnZhbGlkYXRlU25hcHNob3RTY2hlbWEoc25hcHNob3QpKSB7XG4gICAgICB0aGlzLmxvZygnU25hcHNob3QgaGFzIGludmFsaWQgc2NoZW1hLCBkaXNjYXJkaW5nJywgJ3dhcm4nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XG4gICAgY29uc3Qgc25hcHNob3RBZ2UgPSBjdXJyZW50VGltZSAtIHNuYXBzaG90LnRpbWVzdGFtcDtcblxuICAgIGlmIChzbmFwc2hvdEFnZSA+IHRoaXMuTUFYX1NOQVBTSE9UX0FHRSkge1xuICAgICAgdGhpcy5sb2coJ1NuYXBzaG90IHRvbyBvbGQsIGRpc2NhcmRpbmcnLCAnd2FybicpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gUmV0cmlldmUgdGhlIGxhc3Qgc2F2ZWQgc3RhdGUgc25hcHNob3Qgd2l0aCBjb3JydXB0aW9uIHJlY292ZXJ5XG4gIHN0YXRpYyByZXRyaWV2ZVNuYXBzaG90KCk6IER5bmFtaWNTdGF0ZVNuYXBzaG90IHwgbnVsbCB7XG4gICAgLy8gV2UgZG9uJ3QgbG9jayBmb3IgcmVhZHMsIGJ1dCB3ZSBkbyBjaGVjayBpZiB0aGVyZSdzIGEgd3JpdGUgaW4gcHJvZ3Jlc3NcbiAgICBpZiAoU3RhdGVPcGVyYXRpb25Mb2NrLmlzTG9ja2VkKCdzdGF0ZV9zbmFwc2hvdCcpKSB7XG4gICAgICB0aGlzLmxvZygnU3RhdGUgc25hcHNob3QgaXMgY3VycmVudGx5IGJlaW5nIHVwZGF0ZWQsIHVzaW5nIGV4aXN0aW5nIHNuYXBzaG90JywgJ3dhcm4nKTtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5TVE9SQUdFX0tFWSk7XG4gICAgICBpZiAoIXNuYXBzaG90KSByZXR1cm4gbnVsbDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFyc2VkU25hcHNob3Q6IER5bmFtaWNTdGF0ZVNuYXBzaG90ID0gSlNPTi5wYXJzZShzbmFwc2hvdCk7XG4gICAgICAgIFxuICAgICAgICAvLyBWYWxpZGF0ZSBzbmFwc2hvdCBpbnRlZ3JpdHlcbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVTbmFwc2hvdChwYXJzZWRTbmFwc2hvdCkpIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VkU25hcHNob3Q7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5sb2coJ0ludmFsaWQgc25hcHNob3QgZGV0ZWN0ZWQsIGF0dGVtcHRpbmcgcmVjb3ZlcnknLCAnd2FybicpO1xuICAgICAgICAgIHJldHVybiB0aGlzLmF0dGVtcHRTbmFwc2hvdFJlY292ZXJ5KCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgdGhpcy5sb2coYEpTT04gcGFyc2UgZXJyb3I6ICR7cGFyc2VFcnJvcn0sIGF0dGVtcHRpbmcgcmVjb3ZlcnlgLCAnZXJyb3InKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0ZW1wdFNuYXBzaG90UmVjb3ZlcnkoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5sb2coYEZhaWxlZCB0byByZXRyaWV2ZSBzdGF0ZSBzbmFwc2hvdDogJHtlcnJvcn1gLCAnZXJyb3InKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gQXR0ZW1wdCB0byByZWNvdmVyIGNvcnJ1cHRlZCBzdGF0ZVxuICBwcml2YXRlIHN0YXRpYyBhdHRlbXB0U25hcHNob3RSZWNvdmVyeSgpOiBEeW5hbWljU3RhdGVTbmFwc2hvdCB8IG51bGwge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmxvZygnQXR0ZW1wdGluZyBzdGF0ZSByZWNvdmVyeScsICd3YXJuJyk7XG4gICAgICBcbiAgICAgIC8vIFN0cmF0ZWd5IDE6IENoZWNrIGZvciBiYWNrdXBcbiAgICAgIGNvbnN0IGJhY2t1cFNuYXBzaG90ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7dGhpcy5TVE9SQUdFX0tFWX1fQkFDS1VQYCk7XG4gICAgICBpZiAoYmFja3VwU25hcHNob3QpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBwYXJzZWRCYWNrdXAgPSBKU09OLnBhcnNlKGJhY2t1cFNuYXBzaG90KTtcbiAgICAgICAgICBpZiAodGhpcy52YWxpZGF0ZVNuYXBzaG90KHBhcnNlZEJhY2t1cCkpIHtcbiAgICAgICAgICAgIHRoaXMubG9nKCdSZWNvdmVyZWQgc3RhdGUgZnJvbSBiYWNrdXAnLCAnaW5mbycpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZEJhY2t1cDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB0aGlzLmxvZygnQmFja3VwIHNuYXBzaG90IGFsc28gY29ycnVwdGVkJywgJ3dhcm4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTdHJhdGVneSAyOiBCdWlsZCBmcm9tIGluZGl2aWR1YWwgcGllY2VzIGluIGxvY2FsU3RvcmFnZVxuICAgICAgY29uc3QgcmVjb3ZlcmVkU3RhdGU6IER5bmFtaWNTdGF0ZVNuYXBzaG90ID0ge1xuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIHZlcnNpb246IHRoaXMuU1RPUkFHRV9WRVJTSU9OLFxuICAgICAgICB1c2VyU2Vzc2lvbjoge30sXG4gICAgICAgIGNoYXRDb250ZXh0OiB7fSxcbiAgICAgICAgcGFnZVN0YXRlOiB7fSxcbiAgICAgICAgd2lkZ2V0U3RhdGVzOiB7fVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIGdldCBsYXN0IHBhdGggZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICAgIGNvbnN0IGFjdGl2ZVNlc3Npb25JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY3RpdmVTZXNzaW9uSWQnKTtcbiAgICAgIGlmIChhY3RpdmVTZXNzaW9uSWQpIHtcbiAgICAgICAgcmVjb3ZlcmVkU3RhdGUuY2hhdENvbnRleHQuY3VycmVudENvbnZlcnNhdGlvbklkID0gYWN0aXZlU2Vzc2lvbklkO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTZXQgcmVjb3ZlcnkgZmxhZ1xuICAgICAgcmVjb3ZlcmVkU3RhdGUucmVjb3ZlcmVkID0gdHJ1ZTtcbiAgICAgIFxuICAgICAgdGhpcy5sb2coJ0NyZWF0ZWQgbWluaW1hbCByZWNvdmVyZWQgc3RhdGUnLCAnaW5mbycpO1xuICAgICAgcmV0dXJuIHJlY292ZXJlZFN0YXRlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmxvZyhgUmVjb3ZlcnkgZmFpbGVkOiAke2Vycm9yfWAsICdlcnJvcicpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gSHlkcmF0ZSBhcHBsaWNhdGlvbiBzdGF0ZVxuICBzdGF0aWMgaHlkcmF0ZVN0YXRlKHJvdXRlcj86IE5leHRSb3V0ZXIpOiBQYXJ0aWFsPER5bmFtaWNTdGF0ZVNuYXBzaG90PiB7XG4gICAgY29uc3Qgc25hcHNob3QgPSB0aGlzLnJldHJpZXZlU25hcHNob3QoKTtcbiAgICBcbiAgICBpZiAoc25hcHNob3QpIHtcbiAgICAgIC8vIE9wdGlvbmFsbHkgbmF2aWdhdGUgdG8gbGFzdCB2aXNpdGVkIHBhdGhcbiAgICAgIGlmIChyb3V0ZXIgJiYgc25hcHNob3QucGFnZVN0YXRlLmxhc3RWaXNpdGVkUGF0aCkge1xuICAgICAgICByb3V0ZXIucHVzaChzbmFwc2hvdC5wYWdlU3RhdGUubGFzdFZpc2l0ZWRQYXRoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgIH1cblxuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIC8vIENsZWFyIHRoZSBzbmFwc2hvdCAodXNlZCBkdXJpbmcgbG9nb3V0KVxuICBzdGF0aWMgY2xlYXJTbmFwc2hvdCgpOiB2b2lkIHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLlNUT1JBR0VfS0VZKTtcbiAgfVxufVxuXG4vLyBQcmV2ZW50IGFjY2lkZW50YWwgcGFnZSB1bmxvYWRcbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50VW5pbnRlbmRlZFJlZnJlc2goZTogQmVmb3JlVW5sb2FkRXZlbnQpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBlLnJldHVyblZhbHVlID0gJyc7IC8vIFJlcXVpcmVkIGZvciBDaHJvbWVcbn1cblxuZXhwb3J0IGRlZmF1bHQgU3RhdGVQZXJzaXN0ZW5jZU1hbmFnZXI7XG4iXSwibmFtZXMiOlsiU3RhdGVPcGVyYXRpb25Mb2NrIiwiU3RhdGVQZXJzaXN0ZW5jZU1hbmFnZXIiLCJnZXRTdG9yZWRTdGF0ZSIsIkVycm9yIiwiU1RPUkFHRV9LRVkiLCJNQVhfU05BUFNIT1RfQUdFIiwiU1RPUkFHRV9WRVJTSU9OIiwiTUFYX1NUT1JBR0VfU0laRSIsImxvZyIsIm1lc3NhZ2UiLCJsZXZlbCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImxvZ01lc3NhZ2UiLCJ0b1VwcGVyQ2FzZSIsImNvbnNvbGUiLCJ3YXJuIiwiZXJyb3IiLCJjaGVja1N0b3JhZ2VRdW90YSIsIm5hdmlnYXRvciIsInN0b3JhZ2UiLCJlc3RpbWF0ZSIsInVzYWdlIiwicXVvdGEiLCJ1c2FnZVJhdGlvIiwidG9GaXhlZCIsIk1hdGgiLCJyb3VuZCIsImNsZWFudXBTdG9yYWdlIiwidG90YWxTaXplIiwiaSIsImxvY2FsU3RvcmFnZSIsImxlbmd0aCIsImtleSIsInZhbHVlIiwiZ2V0SXRlbSIsInNpemVNQiIsImtleXNUb0NoZWNrIiwic3RhcnRzV2l0aCIsImluY2x1ZGVzIiwicHVzaCIsImtleXNXaXRoVGltZSIsIm1hcCIsInNlc3Npb25JZCIsIlN0cmluZyIsInJlcGxhY2UiLCJsYXN0U3luY2VkIiwiZ2V0VGltZSIsInNvcnQiLCJhIiwiYiIsIml0ZW1zVG9SZW1vdmUiLCJjZWlsIiwicmVtb3ZlSXRlbSIsInNuYXBzaG90IiwicGFyc2VkU25hcHNob3QiLCJKU09OIiwicGFyc2UiLCJjaGF0Q29udGV4dCIsIm1lc3NhZ2VzIiwic2xpY2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZSIsInZhbGlkYXRlU25hcHNob3RTY2hlbWEiLCJyZXF1aXJlZE9iamVjdHMiLCJvYmoiLCJjcmVhdGVCYWNrdXAiLCJjdXJyZW50U25hcHNob3QiLCJjYXB0dXJlU25hcHNob3QiLCJwYXJ0aWFsU3RhdGUiLCJsb2NrSWQiLCJhY3F1aXJlTG9jayIsImlzU3RvcmFnZUF2YWlsYWJsZSIsInF1b3RhT2siLCJleGlzdGluZ1NuYXBzaG90IiwicmV0cmlldmVTbmFwc2hvdCIsIm5ld1NuYXBzaG90Iiwibm93IiwidmVyc2lvbiIsInVzZXJTZXNzaW9uIiwicGFnZVN0YXRlIiwid2lkZ2V0U3RhdGVzIiwic3RvcmFnZUVycm9yIiwibWluaW1hbFNuYXBzaG90IiwiY3VycmVudENvbnZlcnNhdGlvbklkIiwibGFzdFZpc2l0ZWRQYXRoIiwicmVsZWFzZUxvY2siLCJ0ZXN0S2V5IiwidmFsaWRhdGVTbmFwc2hvdCIsImN1cnJlbnRUaW1lIiwic25hcHNob3RBZ2UiLCJpc0xvY2tlZCIsImF0dGVtcHRTbmFwc2hvdFJlY292ZXJ5IiwicGFyc2VFcnJvciIsImJhY2t1cFNuYXBzaG90IiwicGFyc2VkQmFja3VwIiwicmVjb3ZlcmVkU3RhdGUiLCJhY3RpdmVTZXNzaW9uSWQiLCJyZWNvdmVyZWQiLCJoeWRyYXRlU3RhdGUiLCJyb3V0ZXIiLCJjbGVhclNuYXBzaG90IiwicHJldmVudFVuaW50ZW5kZWRSZWZyZXNoIiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./utils/StatePersistence.ts\n");

/***/ }),

/***/ "./utils/authUtils.ts":
/*!****************************!*\
  !*** ./utils/authUtils.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TOKEN_EXPIRY_KEY: () => (/* binding */ TOKEN_EXPIRY_KEY),\n/* harmony export */   TOKEN_KEY: () => (/* binding */ TOKEN_KEY),\n/* harmony export */   addAuthHeaders: () => (/* binding */ addAuthHeaders),\n/* harmony export */   authFetch: () => (/* binding */ authFetch),\n/* harmony export */   clearAuthTokens: () => (/* binding */ clearAuthTokens),\n/* harmony export */   getAuthToken: () => (/* binding */ getAuthToken),\n/* harmony export */   getTokenExpiry: () => (/* binding */ getTokenExpiry),\n/* harmony export */   isTokenExpired: () => (/* binding */ isTokenExpired),\n/* harmony export */   storeAuthToken: () => (/* binding */ storeAuthToken)\n/* harmony export */ });\n/**\n * Authentication Utilities for Grace App\n * \n * Provides standardized token management compatible with the existing auth-utils.js system.\n */ // Token storage constants - exported for consistency across the codebase\nconst TOKEN_KEY = 'grace_token';\nconst TOKEN_EXPIRY_KEY = 'grace_token_expiry';\n// Backward/parallel compatibility: some modules may use this alternate key\nconst ALT_TOKEN_KEY = 'grace_auth_token';\n// Simple mutex to prevent race conditions\nlet tokenMutex = Promise.resolve();\n/**\n * Store authentication token with remember-me preference\n * Uses a mutex to prevent race conditions\n */ async function storeAuthToken(token, rememberMe = false) {\n    if (true) return;\n    // Wait for any existing operation to complete\n    await tokenMutex;\n    // Create a new lock that others will wait for\n    let releaseLock;\n    tokenMutex = new Promise((resolve)=>{\n        releaseLock = resolve;\n    });\n    try {\n        // Clear both to prevent any token conflicts\n        clearAuthTokens();\n        // Store in the appropriate location\n        const storage = rememberMe ? localStorage : sessionStorage;\n        // Write under both keys for compatibility\n        storage.setItem(TOKEN_KEY, token);\n        storage.setItem(ALT_TOKEN_KEY, token);\n        // Set expiry date (24 hours from now)\n        const expiry = new Date();\n        expiry.setHours(expiry.getHours() + 24);\n        storage.setItem(TOKEN_EXPIRY_KEY, expiry.toISOString());\n    } finally{\n        releaseLock();\n    }\n}\n/**\n * Get the current authentication token from storage\n * Checks sessionStorage first, then falls back to localStorage\n */ function getAuthToken() {\n    if (false) {}\n    return null;\n}\n/**\n * Get token expiration date\n */ function getTokenExpiry() {\n    if (false) {}\n    return null;\n}\n/**\n * Check if token is expired\n */ function isTokenExpired() {\n    const expiry = getTokenExpiry();\n    return !expiry || expiry < new Date();\n}\n/**\n * Clear all authentication tokens\n */ function clearAuthTokens() {\n    if (false) {}\n}\n/**\n * Add authorization headers to fetch options\n */ function addAuthHeaders(options = {}) {\n    const token = getAuthToken();\n    const headers = {\n        ...options.headers,\n        'Content-Type': 'application/json'\n    };\n    if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n    }\n    return {\n        ...options,\n        headers\n    };\n}\n/**\n * Wrapper for fetch with authentication headers\n */ async function authFetch(url, options = {}) {\n    return fetch(url, addAuthHeaders(options));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlscy9hdXRoVXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7Q0FJQyxHQUVELHlFQUF5RTtBQUNsRSxNQUFNQSxZQUFZLGNBQWM7QUFDaEMsTUFBTUMsbUJBQW1CLHFCQUFxQjtBQUNyRCwyRUFBMkU7QUFDM0UsTUFBTUMsZ0JBQWdCO0FBRXRCLDBDQUEwQztBQUMxQyxJQUFJQyxhQUFhQyxRQUFRQyxPQUFPO0FBRWhDOzs7Q0FHQyxHQUNNLGVBQWVDLGVBQWVDLEtBQWEsRUFBRUMsYUFBc0IsS0FBSztJQUM3RSxJQUFJLElBQTZCLEVBQUU7SUFFbkMsOENBQThDO0lBQzlDLE1BQU1MO0lBRU4sOENBQThDO0lBQzlDLElBQUlNO0lBQ0pOLGFBQWEsSUFBSUMsUUFBUUMsQ0FBQUE7UUFDdkJJLGNBQWNKO0lBQ2hCO0lBRUEsSUFBSTtRQUNGLDRDQUE0QztRQUM1Q0s7UUFFQSxvQ0FBb0M7UUFDcEMsTUFBTUMsVUFBVUgsYUFBYUksZUFBZUM7UUFDNUMsMENBQTBDO1FBQzFDRixRQUFRRyxPQUFPLENBQUNkLFdBQVdPO1FBQzNCSSxRQUFRRyxPQUFPLENBQUNaLGVBQWVLO1FBRS9CLHNDQUFzQztRQUN0QyxNQUFNUSxTQUFTLElBQUlDO1FBQ25CRCxPQUFPRSxRQUFRLENBQUNGLE9BQU9HLFFBQVEsS0FBSztRQUNwQ1AsUUFBUUcsT0FBTyxDQUFDYixrQkFBa0JjLE9BQU9JLFdBQVc7SUFDdEQsU0FBVTtRQUNSVjtJQUNGO0FBQ0Y7QUFFQTs7O0NBR0MsR0FDTSxTQUFTVztJQUNkLElBQUksS0FBNkIsRUFBRSxFQVNsQztJQUNELE9BQU87QUFDVDtBQUVBOztDQUVDLEdBQ00sU0FBU0U7SUFDZCxJQUFJLEtBQTZCLEVBQUUsRUFHbEM7SUFDRCxPQUFPO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNNLFNBQVNFO0lBQ2QsTUFBTVQsU0FBU087SUFDZixPQUFPLENBQUNQLFVBQVVBLFNBQVMsSUFBSUM7QUFDakM7QUFFQTs7Q0FFQyxHQUNNLFNBQVNOO0lBQ2QsSUFBSSxLQUE2QixFQUFFLEVBUWxDO0FBQ0g7QUFFQTs7Q0FFQyxHQUNNLFNBQVNnQixlQUFlQyxVQUF1QixDQUFDLENBQUM7SUFDdEQsTUFBTXBCLFFBQVFhO0lBQ2QsTUFBTVEsVUFBVTtRQUNkLEdBQUdELFFBQVFDLE9BQU87UUFDbEIsZ0JBQWdCO0lBQ2xCO0lBRUEsSUFBSXJCLE9BQU87UUFDVHFCLE9BQU8sQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLE9BQU8sRUFBRXJCLE9BQU87SUFDOUM7SUFFQSxPQUFPO1FBQ0wsR0FBR29CLE9BQU87UUFDVkM7SUFDRjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxVQUFVQyxHQUFXLEVBQUVILFVBQXVCLENBQUMsQ0FBQztJQUNwRSxPQUFPSSxNQUFNRCxLQUFLSixlQUFlQztBQUNuQyIsInNvdXJjZXMiOlsiL1VzZXJzL3dvbmthc3dvcmxkL0Rvd25sb2Fkcy9ncmFjZS1wcm9qZWN0L3NyYy91aS91dGlscy9hdXRoVXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBdXRoZW50aWNhdGlvbiBVdGlsaXRpZXMgZm9yIEdyYWNlIEFwcFxuICogXG4gKiBQcm92aWRlcyBzdGFuZGFyZGl6ZWQgdG9rZW4gbWFuYWdlbWVudCBjb21wYXRpYmxlIHdpdGggdGhlIGV4aXN0aW5nIGF1dGgtdXRpbHMuanMgc3lzdGVtLlxuICovXG5cbi8vIFRva2VuIHN0b3JhZ2UgY29uc3RhbnRzIC0gZXhwb3J0ZWQgZm9yIGNvbnNpc3RlbmN5IGFjcm9zcyB0aGUgY29kZWJhc2VcbmV4cG9ydCBjb25zdCBUT0tFTl9LRVkgPSAnZ3JhY2VfdG9rZW4nO1xuZXhwb3J0IGNvbnN0IFRPS0VOX0VYUElSWV9LRVkgPSAnZ3JhY2VfdG9rZW5fZXhwaXJ5Jztcbi8vIEJhY2t3YXJkL3BhcmFsbGVsIGNvbXBhdGliaWxpdHk6IHNvbWUgbW9kdWxlcyBtYXkgdXNlIHRoaXMgYWx0ZXJuYXRlIGtleVxuY29uc3QgQUxUX1RPS0VOX0tFWSA9ICdncmFjZV9hdXRoX3Rva2VuJztcblxuLy8gU2ltcGxlIG11dGV4IHRvIHByZXZlbnQgcmFjZSBjb25kaXRpb25zXG5sZXQgdG9rZW5NdXRleCA9IFByb21pc2UucmVzb2x2ZSgpO1xuXG4vKipcbiAqIFN0b3JlIGF1dGhlbnRpY2F0aW9uIHRva2VuIHdpdGggcmVtZW1iZXItbWUgcHJlZmVyZW5jZVxuICogVXNlcyBhIG11dGV4IHRvIHByZXZlbnQgcmFjZSBjb25kaXRpb25zXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdG9yZUF1dGhUb2tlbih0b2tlbjogc3RyaW5nLCByZW1lbWJlck1lOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gIFxuICAvLyBXYWl0IGZvciBhbnkgZXhpc3Rpbmcgb3BlcmF0aW9uIHRvIGNvbXBsZXRlXG4gIGF3YWl0IHRva2VuTXV0ZXg7XG4gIFxuICAvLyBDcmVhdGUgYSBuZXcgbG9jayB0aGF0IG90aGVycyB3aWxsIHdhaXQgZm9yXG4gIGxldCByZWxlYXNlTG9jazogKCkgPT4gdm9pZDtcbiAgdG9rZW5NdXRleCA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHJlbGVhc2VMb2NrID0gcmVzb2x2ZTtcbiAgfSk7XG4gIFxuICB0cnkge1xuICAgIC8vIENsZWFyIGJvdGggdG8gcHJldmVudCBhbnkgdG9rZW4gY29uZmxpY3RzXG4gICAgY2xlYXJBdXRoVG9rZW5zKCk7XG4gICAgXG4gICAgLy8gU3RvcmUgaW4gdGhlIGFwcHJvcHJpYXRlIGxvY2F0aW9uXG4gICAgY29uc3Qgc3RvcmFnZSA9IHJlbWVtYmVyTWUgPyBsb2NhbFN0b3JhZ2UgOiBzZXNzaW9uU3RvcmFnZTtcbiAgICAvLyBXcml0ZSB1bmRlciBib3RoIGtleXMgZm9yIGNvbXBhdGliaWxpdHlcbiAgICBzdG9yYWdlLnNldEl0ZW0oVE9LRU5fS0VZLCB0b2tlbik7XG4gICAgc3RvcmFnZS5zZXRJdGVtKEFMVF9UT0tFTl9LRVksIHRva2VuKTtcbiAgICBcbiAgICAvLyBTZXQgZXhwaXJ5IGRhdGUgKDI0IGhvdXJzIGZyb20gbm93KVxuICAgIGNvbnN0IGV4cGlyeSA9IG5ldyBEYXRlKCk7XG4gICAgZXhwaXJ5LnNldEhvdXJzKGV4cGlyeS5nZXRIb3VycygpICsgMjQpO1xuICAgIHN0b3JhZ2Uuc2V0SXRlbShUT0tFTl9FWFBJUllfS0VZLCBleHBpcnkudG9JU09TdHJpbmcoKSk7XG4gIH0gZmluYWxseSB7XG4gICAgcmVsZWFzZUxvY2shKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgYXV0aGVudGljYXRpb24gdG9rZW4gZnJvbSBzdG9yYWdlXG4gKiBDaGVja3Mgc2Vzc2lvblN0b3JhZ2UgZmlyc3QsIHRoZW4gZmFsbHMgYmFjayB0byBsb2NhbFN0b3JhZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEF1dGhUb2tlbigpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gUHJlZmVyIHNlc3Npb25TdG9yYWdlIGZvciBjdXJyZW50IHNlc3Npb24sIHRoZW4gbG9jYWxTdG9yYWdlXG4gICAgLy8gQ2hlY2sgYm90aCBwcmltYXJ5IGFuZCBhbHRlcm5hdGUga2V5c1xuICAgIHJldHVybiAoXG4gICAgICBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFRPS0VOX0tFWSkgfHxcbiAgICAgIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oQUxUX1RPS0VOX0tFWSkgfHxcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFRPS0VOX0tFWSkgfHxcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKEFMVF9UT0tFTl9LRVkpXG4gICAgKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBHZXQgdG9rZW4gZXhwaXJhdGlvbiBkYXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb2tlbkV4cGlyeSgpOiBEYXRlIHwgbnVsbCB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnN0IGV4cGlyeVN0ciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFRPS0VOX0VYUElSWV9LRVkpIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oVE9LRU5fRVhQSVJZX0tFWSk7XG4gICAgcmV0dXJuIGV4cGlyeVN0ciA/IG5ldyBEYXRlKGV4cGlyeVN0cikgOiBudWxsO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHRva2VuIGlzIGV4cGlyZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVG9rZW5FeHBpcmVkKCk6IGJvb2xlYW4ge1xuICBjb25zdCBleHBpcnkgPSBnZXRUb2tlbkV4cGlyeSgpO1xuICByZXR1cm4gIWV4cGlyeSB8fCBleHBpcnkgPCBuZXcgRGF0ZSgpO1xufVxuXG4vKipcbiAqIENsZWFyIGFsbCBhdXRoZW50aWNhdGlvbiB0b2tlbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQXV0aFRva2VucygpOiB2b2lkIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gQ2xlYXIgZnJvbSBib3RoIHN0b3JhZ2UgbG9jYXRpb25zIHRvIGJlIHNhZmVcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShUT0tFTl9LRVkpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKEFMVF9UT0tFTl9LRVkpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFRPS0VOX0VYUElSWV9LRVkpO1xuICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oVE9LRU5fS0VZKTtcbiAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKEFMVF9UT0tFTl9LRVkpO1xuICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oVE9LRU5fRVhQSVJZX0tFWSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgYXV0aG9yaXphdGlvbiBoZWFkZXJzIHRvIGZldGNoIG9wdGlvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEF1dGhIZWFkZXJzKG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge30pOiBSZXF1ZXN0SW5pdCB7XG4gIGNvbnN0IHRva2VuID0gZ2V0QXV0aFRva2VuKCk7XG4gIGNvbnN0IGhlYWRlcnMgPSB7IFxuICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICB9O1xuICBcbiAgaWYgKHRva2VuKSB7XG4gICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3Rva2VufWA7XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBoZWFkZXJzLFxuICB9O1xufVxuXG4vKipcbiAqIFdyYXBwZXIgZm9yIGZldGNoIHdpdGggYXV0aGVudGljYXRpb24gaGVhZGVyc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXV0aEZldGNoKHVybDogc3RyaW5nLCBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9KTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICByZXR1cm4gZmV0Y2godXJsLCBhZGRBdXRoSGVhZGVycyhvcHRpb25zKSk7XG59XG5cbiJdLCJuYW1lcyI6WyJUT0tFTl9LRVkiLCJUT0tFTl9FWFBJUllfS0VZIiwiQUxUX1RPS0VOX0tFWSIsInRva2VuTXV0ZXgiLCJQcm9taXNlIiwicmVzb2x2ZSIsInN0b3JlQXV0aFRva2VuIiwidG9rZW4iLCJyZW1lbWJlck1lIiwicmVsZWFzZUxvY2siLCJjbGVhckF1dGhUb2tlbnMiLCJzdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwic2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwiZXhwaXJ5IiwiRGF0ZSIsInNldEhvdXJzIiwiZ2V0SG91cnMiLCJ0b0lTT1N0cmluZyIsImdldEF1dGhUb2tlbiIsImdldEl0ZW0iLCJnZXRUb2tlbkV4cGlyeSIsImV4cGlyeVN0ciIsImlzVG9rZW5FeHBpcmVkIiwicmVtb3ZlSXRlbSIsImFkZEF1dGhIZWFkZXJzIiwib3B0aW9ucyIsImhlYWRlcnMiLCJhdXRoRmV0Y2giLCJ1cmwiLCJmZXRjaCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./utils/authUtils.ts\n");

/***/ }),

/***/ "./utils/devAuth.ts":
/*!**************************!*\
  !*** ./utils/devAuth.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bypassLogin: () => (/* binding */ bypassLogin),\n/* harmony export */   getAdminAuthData: () => (/* binding */ getAdminAuthData),\n/* harmony export */   hasAdminBypass: () => (/* binding */ hasAdminBypass)\n/* harmony export */ });\n/* harmony import */ var _authUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./authUtils */ \"./utils/authUtils.ts\");\n/**\n * Grace Admin Access Utilities\n * \n * This file contains the admin backdoor mechanism that provides\n * immediate access to the Grace interface with full privileges.\n */ \n// Admin user credentials with full access permissions\nconst ADMIN_USER = {\n    id: 'admin-kdot-id',\n    username: 'kdot',\n    email: 'kmanjo11@gmail.com',\n    role: 'admin',\n    permissions: [\n        'ALL'\n    ],\n    wallets: [],\n    settings: {\n        theme: 'dark',\n        notifications: true\n    }\n};\n// Admin authentication token (extremely long-lived - 10 years)\n// This is a properly formatted JWT that should pass validation checks\nconst ADMIN_TOKEN = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbi1rZG90LWlkIiwidXNlcm5hbWUiOiJrZG90IiwiZW1haWwiOiJrbWFuam8xMUBnbWFpbC5jb20iLCJyb2xlIjoiYWRtaW4iLCJwZXJtaXNzaW9ucyI6WyJBTEwiXSwiZXhwIjoxOTAwMDAwMDAwLCJpYXQiOjE1ODAwMDAwMDB9.p58K8xzT2BEuBRKgNUMTdbzHRhPgpnL_q91qfm8qRCk';\n/**\n * Check for admin backdoor query parameter\n */ const hasAdminBypass = ()=>{\n    const urlParams = new URLSearchParams(window.location.search);\n    // Secret parameter with a specific value for added security\n    return urlParams.get('xmaster') === 'kdotaccess';\n};\n/**\n * Create admin authentication data\n */ const getAdminAuthData = ()=>{\n    return {\n        token: ADMIN_TOKEN,\n        user: ADMIN_USER,\n        remember_me: true\n    };\n};\n/**\n * Bypass normal login for admin user with all access privileges\n * \n * @param loginFunction The real login function from AuthContext\n */ const bypassLogin = (loginFunction)=>{\n    try {\n        // Get admin credentials and token\n        const adminAuthData = getAdminAuthData();\n        if (adminAuthData) {\n            console.info('🔑 Using admin master access');\n            // Ensure the token is stored in BOTH localStorage and sessionStorage\n            // This guarantees it will be found regardless of which storage is checked\n            localStorage.setItem('grace_token', adminAuthData.token);\n            sessionStorage.setItem('grace_token', adminAuthData.token);\n            // Set a very far future expiry to prevent token timeout\n            const farFuture = new Date();\n            farFuture.setFullYear(farFuture.getFullYear() + 10); // 10 years in the future\n            localStorage.setItem('grace_token_expiry', farFuture.toISOString());\n            sessionStorage.setItem('grace_token_expiry', farFuture.toISOString());\n            // Use the standard auth function to store properly\n            (0,_authUtils__WEBPACK_IMPORTED_MODULE_0__.storeAuthToken)(adminAuthData.token, true);\n            // Call the real login function with our admin data\n            loginFunction(adminAuthData);\n            // Store a flag indicating we're using admin mode\n            localStorage.setItem('grace_admin_mode', 'true');\n        }\n    } catch (error) {\n        console.error('Admin access failed:', error);\n        // Fallback direct storage in case of error\n        const adminAuthData = getAdminAuthData();\n        localStorage.setItem('grace_token', adminAuthData.token);\n        localStorage.setItem('grace_admin_mode', 'true');\n        window.location.reload(); // Force reload to retry auth\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlscy9kZXZBdXRoLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7Ozs7Q0FLQyxHQUU0QztBQUU3QyxzREFBc0Q7QUFDdEQsTUFBTUMsYUFBYTtJQUNqQkMsSUFBSTtJQUNKQyxVQUFVO0lBQ1ZDLE9BQU87SUFDUEMsTUFBTTtJQUNOQyxhQUFhO1FBQUM7S0FBTTtJQUNwQkMsU0FBUyxFQUFFO0lBQ1hDLFVBQVU7UUFDUkMsT0FBTztRQUNQQyxlQUFlO0lBQ2pCO0FBQ0Y7QUFFQSwrREFBK0Q7QUFDL0Qsc0VBQXNFO0FBQ3RFLE1BQU1DLGNBQWM7QUFFcEI7O0NBRUMsR0FDTSxNQUFNQyxpQkFBaUI7SUFDNUIsTUFBTUMsWUFBWSxJQUFJQyxnQkFBZ0JDLE9BQU9DLFFBQVEsQ0FBQ0MsTUFBTTtJQUM1RCw0REFBNEQ7SUFDNUQsT0FBT0osVUFBVUssR0FBRyxDQUFDLGVBQWU7QUFDdEMsRUFBRTtBQUVGOztDQUVDLEdBQ00sTUFBTUMsbUJBQW1CO0lBQzlCLE9BQU87UUFDTEMsT0FBT1Q7UUFDUFUsTUFBTXBCO1FBQ05xQixhQUFhO0lBQ2Y7QUFDRixFQUFFO0FBRUY7Ozs7Q0FJQyxHQUNNLE1BQU1DLGNBQWMsQ0FBQ0M7SUFDMUIsSUFBSTtRQUNGLGtDQUFrQztRQUNsQyxNQUFNQyxnQkFBZ0JOO1FBRXRCLElBQUlNLGVBQWU7WUFDakJDLFFBQVFDLElBQUksQ0FBQztZQUViLHFFQUFxRTtZQUNyRSwwRUFBMEU7WUFDMUVDLGFBQWFDLE9BQU8sQ0FBQyxlQUFlSixjQUFjTCxLQUFLO1lBQ3ZEVSxlQUFlRCxPQUFPLENBQUMsZUFBZUosY0FBY0wsS0FBSztZQUV6RCx3REFBd0Q7WUFDeEQsTUFBTVcsWUFBWSxJQUFJQztZQUN0QkQsVUFBVUUsV0FBVyxDQUFDRixVQUFVRyxXQUFXLEtBQUssS0FBSyx5QkFBeUI7WUFDOUVOLGFBQWFDLE9BQU8sQ0FBQyxzQkFBc0JFLFVBQVVJLFdBQVc7WUFDaEVMLGVBQWVELE9BQU8sQ0FBQyxzQkFBc0JFLFVBQVVJLFdBQVc7WUFFbEUsbURBQW1EO1lBQ25EbkMsMERBQWNBLENBQUN5QixjQUFjTCxLQUFLLEVBQUU7WUFFcEMsbURBQW1EO1lBQ25ESSxjQUFjQztZQUVkLGlEQUFpRDtZQUNqREcsYUFBYUMsT0FBTyxDQUFDLG9CQUFvQjtRQUMzQztJQUNGLEVBQUUsT0FBT08sT0FBTztRQUNkVixRQUFRVSxLQUFLLENBQUMsd0JBQXdCQTtRQUN0QywyQ0FBMkM7UUFDM0MsTUFBTVgsZ0JBQWdCTjtRQUN0QlMsYUFBYUMsT0FBTyxDQUFDLGVBQWVKLGNBQWNMLEtBQUs7UUFDdkRRLGFBQWFDLE9BQU8sQ0FBQyxvQkFBb0I7UUFDekNkLE9BQU9DLFFBQVEsQ0FBQ3FCLE1BQU0sSUFBSSw2QkFBNkI7SUFDekQ7QUFDRixFQUFFIiwic291cmNlcyI6WyIvVXNlcnMvd29ua2Fzd29ybGQvRG93bmxvYWRzL2dyYWNlLXByb2plY3Qvc3JjL3VpL3V0aWxzL2RldkF1dGgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBHcmFjZSBBZG1pbiBBY2Nlc3MgVXRpbGl0aWVzXG4gKiBcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgYWRtaW4gYmFja2Rvb3IgbWVjaGFuaXNtIHRoYXQgcHJvdmlkZXNcbiAqIGltbWVkaWF0ZSBhY2Nlc3MgdG8gdGhlIEdyYWNlIGludGVyZmFjZSB3aXRoIGZ1bGwgcHJpdmlsZWdlcy5cbiAqL1xuXG5pbXBvcnQgeyBzdG9yZUF1dGhUb2tlbiB9IGZyb20gJy4vYXV0aFV0aWxzJztcblxuLy8gQWRtaW4gdXNlciBjcmVkZW50aWFscyB3aXRoIGZ1bGwgYWNjZXNzIHBlcm1pc3Npb25zXG5jb25zdCBBRE1JTl9VU0VSID0ge1xuICBpZDogJ2FkbWluLWtkb3QtaWQnLFxuICB1c2VybmFtZTogJ2tkb3QnLFxuICBlbWFpbDogJ2ttYW5qbzExQGdtYWlsLmNvbScsXG4gIHJvbGU6ICdhZG1pbicsXG4gIHBlcm1pc3Npb25zOiBbJ0FMTCddLFxuICB3YWxsZXRzOiBbXSwgLy8gV2lsbCBiZSBwb3B1bGF0ZWQgYnkgdGhlIGFwcFxuICBzZXR0aW5nczoge1xuICAgIHRoZW1lOiAnZGFyaycsXG4gICAgbm90aWZpY2F0aW9uczogdHJ1ZVxuICB9XG59O1xuXG4vLyBBZG1pbiBhdXRoZW50aWNhdGlvbiB0b2tlbiAoZXh0cmVtZWx5IGxvbmctbGl2ZWQgLSAxMCB5ZWFycylcbi8vIFRoaXMgaXMgYSBwcm9wZXJseSBmb3JtYXR0ZWQgSldUIHRoYXQgc2hvdWxkIHBhc3MgdmFsaWRhdGlvbiBjaGVja3NcbmNvbnN0IEFETUlOX1RPS0VOID0gJ2V5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUp6ZFdJaU9pSmhaRzFwYmkxclpHOTBMV2xrSWl3aWRYTmxjbTVoYldVaU9pSnJaRzkwSWl3aVpXMWhhV3dpT2lKcmJXRnVhbTh4TVVCbmJXRnBiQzVqYjIwaUxDSnliMnhsSWpvaVlXUnRhVzRpTENKd1pYSnRhWE56YVc5dWN5STZXeUpCVEV3aVhTd2laWGh3SWpveE9UQXdNREF3TURBd0xDSnBZWFFpT2pFMU9EQXdNREF3TURCOS5wNThLOHh6VDJCRXVCUktnTlVNVGRiekhSaFBncG5MX3E5MXFmbThxUkNrJzsgXG5cbi8qKlxuICogQ2hlY2sgZm9yIGFkbWluIGJhY2tkb29yIHF1ZXJ5IHBhcmFtZXRlclxuICovXG5leHBvcnQgY29uc3QgaGFzQWRtaW5CeXBhc3MgPSAoKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gIC8vIFNlY3JldCBwYXJhbWV0ZXIgd2l0aCBhIHNwZWNpZmljIHZhbHVlIGZvciBhZGRlZCBzZWN1cml0eVxuICByZXR1cm4gdXJsUGFyYW1zLmdldCgneG1hc3RlcicpID09PSAna2RvdGFjY2Vzcyc7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhZG1pbiBhdXRoZW50aWNhdGlvbiBkYXRhXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRBZG1pbkF1dGhEYXRhID0gKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIHRva2VuOiBBRE1JTl9UT0tFTixcbiAgICB1c2VyOiBBRE1JTl9VU0VSLFxuICAgIHJlbWVtYmVyX21lOiB0cnVlXG4gIH07XG59O1xuXG4vKipcbiAqIEJ5cGFzcyBub3JtYWwgbG9naW4gZm9yIGFkbWluIHVzZXIgd2l0aCBhbGwgYWNjZXNzIHByaXZpbGVnZXNcbiAqIFxuICogQHBhcmFtIGxvZ2luRnVuY3Rpb24gVGhlIHJlYWwgbG9naW4gZnVuY3Rpb24gZnJvbSBBdXRoQ29udGV4dFxuICovXG5leHBvcnQgY29uc3QgYnlwYXNzTG9naW4gPSAobG9naW5GdW5jdGlvbjogKGRhdGE6IGFueSkgPT4gdm9pZCk6IHZvaWQgPT4ge1xuICB0cnkge1xuICAgIC8vIEdldCBhZG1pbiBjcmVkZW50aWFscyBhbmQgdG9rZW5cbiAgICBjb25zdCBhZG1pbkF1dGhEYXRhID0gZ2V0QWRtaW5BdXRoRGF0YSgpO1xuICAgIFxuICAgIGlmIChhZG1pbkF1dGhEYXRhKSB7XG4gICAgICBjb25zb2xlLmluZm8oJ/CflJEgVXNpbmcgYWRtaW4gbWFzdGVyIGFjY2VzcycpO1xuICAgICAgXG4gICAgICAvLyBFbnN1cmUgdGhlIHRva2VuIGlzIHN0b3JlZCBpbiBCT1RIIGxvY2FsU3RvcmFnZSBhbmQgc2Vzc2lvblN0b3JhZ2VcbiAgICAgIC8vIFRoaXMgZ3VhcmFudGVlcyBpdCB3aWxsIGJlIGZvdW5kIHJlZ2FyZGxlc3Mgb2Ygd2hpY2ggc3RvcmFnZSBpcyBjaGVja2VkXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ3JhY2VfdG9rZW4nLCBhZG1pbkF1dGhEYXRhLnRva2VuKTtcbiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2dyYWNlX3Rva2VuJywgYWRtaW5BdXRoRGF0YS50b2tlbik7XG4gICAgICBcbiAgICAgIC8vIFNldCBhIHZlcnkgZmFyIGZ1dHVyZSBleHBpcnkgdG8gcHJldmVudCB0b2tlbiB0aW1lb3V0XG4gICAgICBjb25zdCBmYXJGdXR1cmUgPSBuZXcgRGF0ZSgpO1xuICAgICAgZmFyRnV0dXJlLnNldEZ1bGxZZWFyKGZhckZ1dHVyZS5nZXRGdWxsWWVhcigpICsgMTApOyAvLyAxMCB5ZWFycyBpbiB0aGUgZnV0dXJlXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ3JhY2VfdG9rZW5fZXhwaXJ5JywgZmFyRnV0dXJlLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnZ3JhY2VfdG9rZW5fZXhwaXJ5JywgZmFyRnV0dXJlLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgXG4gICAgICAvLyBVc2UgdGhlIHN0YW5kYXJkIGF1dGggZnVuY3Rpb24gdG8gc3RvcmUgcHJvcGVybHlcbiAgICAgIHN0b3JlQXV0aFRva2VuKGFkbWluQXV0aERhdGEudG9rZW4sIHRydWUpO1xuICAgICAgXG4gICAgICAvLyBDYWxsIHRoZSByZWFsIGxvZ2luIGZ1bmN0aW9uIHdpdGggb3VyIGFkbWluIGRhdGFcbiAgICAgIGxvZ2luRnVuY3Rpb24oYWRtaW5BdXRoRGF0YSk7XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIGEgZmxhZyBpbmRpY2F0aW5nIHdlJ3JlIHVzaW5nIGFkbWluIG1vZGVcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdncmFjZV9hZG1pbl9tb2RlJywgJ3RydWUnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQWRtaW4gYWNjZXNzIGZhaWxlZDonLCBlcnJvcik7XG4gICAgLy8gRmFsbGJhY2sgZGlyZWN0IHN0b3JhZ2UgaW4gY2FzZSBvZiBlcnJvclxuICAgIGNvbnN0IGFkbWluQXV0aERhdGEgPSBnZXRBZG1pbkF1dGhEYXRhKCk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dyYWNlX3Rva2VuJywgYWRtaW5BdXRoRGF0YS50b2tlbik7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dyYWNlX2FkbWluX21vZGUnLCAndHJ1ZScpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsgLy8gRm9yY2UgcmVsb2FkIHRvIHJldHJ5IGF1dGhcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJzdG9yZUF1dGhUb2tlbiIsIkFETUlOX1VTRVIiLCJpZCIsInVzZXJuYW1lIiwiZW1haWwiLCJyb2xlIiwicGVybWlzc2lvbnMiLCJ3YWxsZXRzIiwic2V0dGluZ3MiLCJ0aGVtZSIsIm5vdGlmaWNhdGlvbnMiLCJBRE1JTl9UT0tFTiIsImhhc0FkbWluQnlwYXNzIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJnZXQiLCJnZXRBZG1pbkF1dGhEYXRhIiwidG9rZW4iLCJ1c2VyIiwicmVtZW1iZXJfbWUiLCJieXBhc3NMb2dpbiIsImxvZ2luRnVuY3Rpb24iLCJhZG1pbkF1dGhEYXRhIiwiY29uc29sZSIsImluZm8iLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwic2Vzc2lvblN0b3JhZ2UiLCJmYXJGdXR1cmUiLCJEYXRlIiwic2V0RnVsbFllYXIiLCJnZXRGdWxsWWVhciIsInRvSVNPU3RyaW5nIiwiZXJyb3IiLCJyZWxvYWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utils/devAuth.ts\n");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/page-path/normalize-data-path":
/*!*********************************************************************!*\
  !*** external "next/dist/shared/lib/page-path/normalize-data-path" ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/page-path/normalize-data-path");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/add-path-prefix":
/*!********************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/add-path-prefix" ***!
  \********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/format-url":
/*!***************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/format-url" ***!
  \***************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/format-url");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/is-bot":
/*!***********************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/is-bot" ***!
  \***********************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/remove-trailing-slash":
/*!**************************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/remove-trailing-slash" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash");

/***/ }),

/***/ "next/dist/shared/lib/utils":
/*!*********************************************!*\
  !*** external "next/dist/shared/lib/utils" ***!
  \*********************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/utils");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom");

/***/ }),

/***/ "react-toastify":
/*!*********************************!*\
  !*** external "react-toastify" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = import("react-toastify");;

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("./webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1","vendor-chunks/@swc+helpers@0.5.15","vendor-chunks/react-toastify@10.0.6_react-dom@19.1.1_react@19.1.1__react@19.1.1"], () => (__webpack_exec__("./node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F_error&preferredRegion=&absolutePagePath=.%2Fnode_modules%2F.pnpm%2Fnext%4015.4.5_%40babel%2Bcore%407.28.0_react-dom%4019.1.1_react%4019.1.1__react%4019.1.1%2Fnode_modules%2Fnext%2Fdist%2Fpages%2F_error.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();