(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[199],{6678:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return s(9240)}])},9240:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var l=s(7765),a=s(5977),n=s(8840),i=s(7650);function r(){let{user:e,updateUser:t}=(0,n.A)(),[s,r]=(0,a.useState)({}),[o,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[m,p]=(0,a.useState)(!1),g=(0,a.useRef)(void 0),h=(0,a.useRef)(!1),x=e=>{let t=e,s=new Set;for(;t&&"object"==typeof t&&!Array.isArray(t)&&!s.has(t);){if(s.add(t),"success"in t&&Object.keys(t).length>=1){let{success:e,...s}=t;t=s}if(t&&"object"==typeof t&&"settings"in t&&Object.keys(t).length<=2){t=t.settings;continue}break}return t};(0,a.useEffect)(()=>{let t=async()=>{if(h.current)return;h.current=!0;let e=new AbortController;try{p(!0),u("");let{data:s,success:l}=await i.FH.get(i.Sn.SETTINGS.PROFILE,{signal:e.signal});if(l&&s){var t;let e=x(null!=(t=null==s?void 0:s.settings)?t:s);r(e||{});try{(null==e?void 0:e.displayName)&&localStorage.setItem("displayName",e.displayName)}catch(e){}}else throw Error((null==s?void 0:s.error)||"Failed to load settings")}catch(e){if((null==e?void 0:e.name)==="AbortError")return;console.error("Error loading settings:",e),u((null==e?void 0:e.message)||"Failed to load settings")}finally{p(!1),h.current=!1}},s=(null==e?void 0:e.id)||(null==e?void 0:e.user_id)||(null==e?void 0:e.username);s&&g.current!==s&&(g.current=s,t())},[null==e?void 0:e.id,null==e?void 0:e.user_id,null==e?void 0:e.username]);let f=async()=>{try{d(""),u(""),p(!0);let e=x(s),{data:l,success:a}=await i.FH.post(i.Sn.SETTINGS.PROFILE,{settings:e});if(a){if(d((null==l?void 0:l.message)||"Settings updated successfully"),void 0!==e.displayName){t({displayName:e.displayName});try{localStorage.setItem("displayName",String(e.displayName||""))}catch(e){}}}else throw Error((null==l?void 0:l.error)||"Failed to update settings")}catch(e){console.error("Settings update error:",e),u((null==e?void 0:e.message)||"Failed to update settings")}finally{p(!1)}};return(0,l.jsxs)("div",{className:"max-w-xl mx-auto space-y-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-mono text-red-300",children:"User Settings"}),m&&(0,l.jsx)("p",{className:"text-blue-300 text-sm",children:"Loading..."}),c&&(0,l.jsx)("p",{className:"text-red-500 text-sm",children:c}),o&&(0,l.jsx)("p",{className:"text-green-500 text-sm",children:o}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("label",{className:"block text-sm",children:["Display Name:",(0,l.jsx)("input",{className:"w-full mt-1 p-2 rounded bg-white/10 text-white",value:s.displayName||"",onChange:e=>r({...s,displayName:e.target.value}),placeholder:"Your name"})]}),(0,l.jsxs)("label",{className:"block text-sm",children:["Default Token:",(0,l.jsx)("input",{className:"w-full mt-1 p-2 rounded bg-white/10 text-white",value:s.defaultToken||"",onChange:e=>r({...s,defaultToken:e.target.value}),placeholder:"e.g. SOL, USDC"})]}),(0,l.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,l.jsx)("input",{type:"checkbox",checked:s.notificationsEnabled||!1,onChange:()=>r({...s,notificationsEnabled:!s.notificationsEnabled})}),(0,l.jsx)("span",{children:"Enable notifications"})]}),(0,l.jsx)("button",{onClick:f,className:"w-full rounded bg-red-700 px-4 py-2 hover:bg-red-900",children:"Save Settings"}),o&&(0,l.jsx)("p",{className:"text-green-400 text-sm",children:o})]})]})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=6678)),_N_E=e.O()}]);