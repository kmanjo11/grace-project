(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[787],{330:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return a(568)}])},568:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(7765),r=a(5977),l=a(7303),i=a(5538),n=a.n(i),o=a(8840),d=a(7650),c=a(4238);function u(){let[e,t]=(0,r.useState)(""),[a,i]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[w,b]=(0,r.useState)(""),[f,v]=(0,r.useState)(""),[N,j]=(0,r.useState)(""),[y,C]=(0,r.useState)(!1),[R,_]=(0,r.useState)(!1);(0,l.useRouter)();let{login:S,isAuthenticated:E,user:A}=(0,o.A)();(0,r.useEffect)(()=>{if(R&&E&&A){console.log("Registration and authentication confirmed; navigation handled by AuthGuard");try{sessionStorage.setItem("GRACE_POST_LOGIN_REDIRECT","1")}catch(e){}}},[R,E,A]);let k=async()=>{if(C(!0),j(""),_(!1),!e||!a||!u||!m||!w||!f){let e="All fields except phone are required";c.oR.error(e,{position:"bottom-right"}),j(e),C(!1);return}if(w!==f){let e="Passwords do not match";c.oR.error(e,{position:"bottom-right"}),j(e),C(!1);return}try{let s=await d.FH.post(d.Sn.AUTH.REGISTER,{username:e,firstName:a,lastName:u,email:m,password:w,phone:p});if(s.success)c.oR.success("Registration successful! Redirecting...",{position:"bottom-right",autoClose:2e3}),await S(s.data||{}),_(!0);else{var t;let e=s.error||(null==(t=s.data)?void 0:t.message)||"Registration failed";c.oR.error(e,{position:"bottom-right"}),j(e)}}catch(t){console.error("Register error:",t);let e=t instanceof Error?t.message:"Registration failed";c.oR.error(e,{position:"bottom-right"}),j(e)}finally{C(!1)}};return(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-black text-white",children:(0,s.jsxs)("div",{className:"w-full max-w-sm rounded-xl bg-black/70 p-6 shadow-xl border border-red-700",children:[(0,s.jsx)("h1",{className:"mb-4 text-2xl font-mono text-red-400 text-center",children:"Create Grace Account"}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("input",{type:"text",placeholder:"Username",className:"w-full rounded bg-white/10 p-2 text-white",value:e,onChange:e=>t(e.target.value),required:!0})}),(0,s.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,s.jsx)("input",{type:"text",placeholder:"First Name",className:"w-full rounded bg-white/10 p-2 text-white",value:a,onChange:e=>i(e.target.value),required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"Last Name",className:"w-full rounded bg-white/10 p-2 text-white",value:u,onChange:e=>h(e.target.value),required:!0})]}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("input",{type:"email",placeholder:"Email",className:"w-full rounded bg-white/10 p-2 text-white",value:m,onChange:e=>x(e.target.value),required:!0})}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("input",{type:"password",placeholder:"Password",className:"w-full rounded bg-white/10 p-2 text-white",value:w,onChange:e=>b(e.target.value),required:!0})}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("input",{type:"password",placeholder:"Confirm Password",className:"w-full rounded bg-white/10 p-2 text-white",value:f,onChange:e=>v(e.target.value),required:!0})}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("input",{type:"text",placeholder:"Phone (optional)",className:"w-full rounded bg-white/10 p-2 text-white",value:p,onChange:e=>g(e.target.value)})}),N&&(0,s.jsx)("div",{className:"mb-2 p-2 bg-red-900/30 rounded border border-red-800",children:(0,s.jsx)("p",{className:"text-sm text-red-400",children:N})}),(0,s.jsx)("button",{type:"submit",onClick:k,className:"w-full py-2 text-white bg-red-700 hover:bg-red-900 rounded transition-colors",disabled:y,children:y?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Creating Account"}),(0,s.jsx)("div",{className:"animate-pulse",children:"..."})]}):"Create Account"}),(0,s.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-400",children:["Already have an account? ",(0,s.jsx)(n(),{href:"/login",className:"text-red-400 hover:text-red-300 hover:underline",children:"Login"})]})]})})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=330)),_N_E=e.O()}]);