(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{420:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(3402)}])},3402:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var o=t(7765),r=t(5977),n=t(7303),a=t(5538),l=t.n(a),i=t(8840),c=t(7650),d=t(4238);function u(){let[e,s]=(0,r.useState)(""),[t,a]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[h,g]=(0,r.useState)(!1),[x,p]=(0,r.useState)(!1);(0,n.useRouter)();let{login:b,isAuthenticated:f,user:w}=(0,i.A)();(0,r.useEffect)(()=>{console.log("Navigation check:",{loginSuccess:x,isAuthenticated:f,user:!!w})},[x,f,w]);let N=async s=>{s.preventDefault(),m(""),g(!0),p(!1);try{let{data:s,success:o}=await c.FH.post(c.Sn.AUTH.LOGIN,{username:e,password:t,remember_me:!0});if(console.log("API Response:",{data:s,success:o}),console.log("Token check:",{hasToken:!!(null==s?void 0:s.token),token:null==s?void 0:s.token}),o){console.log("Login successful, token received:",s),d.oR.success("Login successful! Redirecting...",{position:"bottom-right",autoClose:2e3}),console.log("Calling AuthContext login function with data:",s);let e=await b(s);console.log("Login function result:",e),p(!0);try{sessionStorage.setItem("GRACE_POST_LOGIN_REDIRECT","1")}catch(e){}}else d.oR.error((null==s?void 0:s.message)||"Login failed",{position:"bottom-right"}),m((null==s?void 0:s.message)||"Login failed")}catch(s){let e=(null==s?void 0:s.message)||"Connection error";d.oR.error(e,{position:"bottom-right"}),m(e),console.error("Login error:",s)}finally{g(!1)}};return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-[#140000] to-black",children:(0,o.jsxs)("div",{className:"w-full max-w-sm p-8 space-y-6 rounded bg-black/80 text-white shadow-xl border border-red-900/30",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"flex justify-center mb-6",children:(0,o.jsx)("img",{src:"/assets/grace_logo.png",alt:"Grace Logo",className:"w-64 h-auto mx-auto"})}),(0,o.jsx)("h1",{className:"text-3xl font-mono text-red-300 mb-4",children:"Login"})]}),u&&(0,o.jsx)("div",{className:"p-2 text-sm bg-red-600/20 text-red-400 rounded",children:u}),(0,o.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"username",className:"text-sm block mb-1",children:"Username"}),(0,o.jsx)("input",{id:"username",name:"username",className:"w-full p-2 rounded bg-white/10 focus:outline-none focus:ring-1 focus:ring-red-400 border border-white/20",value:e,onChange:e=>s(e.target.value),placeholder:"Username",autoComplete:"username"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"password",className:"text-sm block mb-1",children:"Password"}),(0,o.jsx)("input",{id:"password",type:"password",name:"password",className:"w-full p-2 rounded bg-white/10 focus:outline-none focus:ring-1 focus:ring-red-400 border border-white/20",value:t,onChange:e=>a(e.target.value),placeholder:"Password",autoComplete:"current-password"})]}),(0,o.jsx)("div",{className:"text-right text-sm",children:(0,o.jsx)(l(),{href:"/forgot",className:"text-gray-400 hover:text-white",children:"Forgot password?"})}),(0,o.jsx)("button",{type:"submit",className:"w-full py-2 text-white bg-red-700 hover:bg-red-900 rounded transition-colors",disabled:h,children:h?(0,o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,o.jsx)("span",{className:"mr-2",children:"Signing in"}),(0,o.jsx)("div",{className:"animate-pulse",children:"..."})]}):"Sign in"}),(0,o.jsxs)("p",{className:"text-center text-sm text-white",children:["Don't have an account? ",(0,o.jsx)(l(),{href:"/register",className:"text-red-500 hover:text-red-400 transition-colors",children:"Sign up"})]}),(0,o.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-700",children:[(0,o.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText("5dFhFf5g2GCqNwZeTeirkZX9iwLqqFwGXuD4m5DhndD6"),alert("Wallet address copied to clipboard: 5dFhFf5g2GCqNwZeTeirkZX9iwLqqFwGXuD4m5DhndD6")},className:"w-full py-2 text-white bg-green-700 hover:bg-green-800 rounded flex items-center justify-center transition-colors",type:"button",children:[(0,o.jsx)("span",{className:"mr-2",children:"\uD83D\uDCB0"})," Donate to Grace"]}),(0,o.jsx)("p",{className:"text-center text-xs text-gray-400 mt-2",children:"Support Grace's development by donating to our wallet"})]})]})]})})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=420)),_N_E=e.O()}]);